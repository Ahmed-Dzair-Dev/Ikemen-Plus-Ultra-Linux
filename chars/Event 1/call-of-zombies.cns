;made by armin_iuf

[Data]
life = 1000
power = 3000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 45
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 0
IntPersistIndex = 1
FloatPersistIndex = 0

[Size]
xscale = 1
yscale = 1
ground.back = 20
ground.front = 20
air.back = 20
air.front = 20
height = 60
attack.dist = 0 
proj.attack.dist= 0
proj.doscale = 0
head.pos = 0,-88
mid.pos = 0,-60
shadowoffset = 0
draw.offset = 0,0 

[Velocity]
walk.fwd = 3
walk.back = -3
run.fwd = 7,0
run.back = -7,0
jump.neu = 0,0
jump.back = 0
jump.fwd = 0
runjump.back = 0,0
runjump.fwd = 0,0

[Movement]
airjump.num = 0 
airjump.height = 0
yaccel=.5
stand.friction = .85
crouch.friction = .85

;--------------------------------------------------------------------------
[Statedef 0]
type = S
anim = 0
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;--------------------------------------------------------------------------
[Statedef 1]
type = S
anim = 0
ctrl=0
velset = 0,0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
[Statedef 180]
type = S
ctrl = 1

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181

[Statedef 181]
type = S
velset = 0,0

[State 181, 0]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 181, notover] 
type = assertspecial
trigger1 = time < 250
flag = roundnotover
;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = time = 0
value = 0

[State 190, intro]
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nobardisplay
flag3 = nomusic

[State 190, 2]
type = ChangeState
trigger1 = time >= 1
value = 191

; INTRO
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, intro]
type = assertspecial
trigger1 = 1
flag = intro
flag2 = nobardisplay
flag3 = nomusic

[State 191, end]
type = changestate
trigger1 = time>=150
value = 0

;---------------------------------------------------------------------------
[Statedef 5100]
movetype = H
anim=0

[State 5100, end]
type = changestate
trigger1 = 1
value = 0

;---------------------------------------------------------------------------
;LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


;--------------------------------------------------------------------------------
;main helper init
[Statedef 10000]
physics=N
anim=10201
movetype=A

[State 0, StopSnd]
type = StopSnd
trigger1 = !time
channel = 10

[State 0, StopSnd]
type = StopSnd
trigger1 = !time
channel = 12

[State 0, VarRangeSet]
type = VarRangeSet
trigger1 = 1
value = 0
first = 0
last = 59

[State 0, VarRangeSet]
type = VarRangeSet
trigger1 = 1
fvalue = 0
first = 0
last = 39

[State 0, Turn]
type = Turn
trigger1 = facing=-1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = -backedgedist
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noBG
flag3 = noFG
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =1 
flag = timerfreeze
flag2 = nomusic
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, bound]
type=screenbound
trigger1= 1
value=0
movecamera=0,0
ignorehitpause=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = 1
channel = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = numpartner && partner,numhelper(10000)
trigger2 = root,var(4)!=[1,3]

;money
[State 0, VarSet]
type = VarSet
trigger1 = 1
var(2)=500

;map
[State 0, VarSet]
type = VarSet
trigger1 = 1
var(4)=parent,var(4)-1

;room
[State 0, VarSet]
type = VarSet
trigger1 = 1
var(0)=1*(var(4)=0)+9*(var(4)=1)+20*(var(4)=2)

;pos
[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0)=3600*(var(0)=[1,7])+1200*(var(0)=[9,19])+1400*(var(0)=[20,29])

;life
[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(5)=100

[State 0, ChangeState]
type = ChangeState
trigger1 = 1
value =10010

;--------------------------------------------------------------------------------
;main
[Statedef 10010]
physics=N
anim=0
movetype=I

;var(0)=room id
;fvar(0)=cam pos
;var(1)=pal
;var(2)=money
;var(3)=get money
;var(4)=map
;fvar(4)=revive
;fvar(5-7)=life=[0,100-35,100]
;fvar(8)=poisoned
;fvar(9)=explod
;var(10-12)=text
;var(13)=end text
;var(15)=rounds number
;var(16)=rounds counter
;var(17)=enemy counter
;var(18-19)=boss round
;var(20-29)=windows
;var(30),(35)=juggernog
;var(31),(36)=revive
;var(32),(37)=staminup
;var(33),(38)=doubletap
;var(34),(39)=flopper
;var(40)=power
;var(41)=power counter
;var(42)=secret room
;var(45-48)=mine
;var(49)=kills
;fvar(10-39)=doors flag
;var(50-59)=powerups

[State 0, changestate]
type = changestate
trigger1 = numpartner && partner,numhelper(10000)
trigger2 = root,var(4)!=[1,3]
value=10000


[State 0, Turn]
type = Turn
trigger1 = facing=-1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = -backedgedist
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noBG
flag3 = noFG
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =1 
flag = timerfreeze
flag2 = nomusic
ignorehitpause = 1


[State 0, Helper]
type = Helper
trigger1 = numpartner && partner,stateno!=10151 && !(partner,name = "cod_nazi_zombies") && !(win||winko||lose||loseko)
trigger1 = !numhelper(10150)
helpertype = normal
name = "o"
ID = 10150
stateno = 10150
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1


;----------------move

[State 0, VarAdd]
type = VarAdd
triggerall = roundstate>=2
trigger1 =  !((enemy(0),frontedgedist>=155 && enemy(0),vel x>0) || (enemy(0),backedgedist>=155 && enemy(0),vel x<0))
fvar(0)=ifelse(enemy(0),vel x<5,enemy(0),vel x,5)*(enemy(0),facing)*(1+0.7*(helper(10000),var(32)!=0))*(1-(0.2*(fvar(5)<=90)+0.2*(fvar(5)<=50)+0.2*(fvar(8)>0)+0.2*(numexplod(10401)!=0)+0.2*(numexplod(10427)!=0))*(var(34)=0)-0.2*(fvar(9)>0))*(1-0.8*(fvar(4)>0))

[State 0, VarSet]
type = VarSet
trigger1 = var(0)=1 && fvar(0)<300
trigger2 = var(0)=2 && fvar(0)<170
trigger3 = var(0)=3 && fvar(0)<195
trigger4 = var(0)=4 && fvar(0)<174
trigger5 = var(0)=5 && fvar(0)<165
trigger6 = var(0)=6 && fvar(0)<230
trigger7 = var(0)=7 && fvar(0)<190
trigger8 = var(0)=9 && fvar(0)<137
trigger9 = var(0)=10 && fvar(0)<142
trigger10 = var(0)=11 && fvar(0)<142
trigger11 = var(0)=12 && fvar(0)<155
fvar(0)=300*(var(0)=1)+170*(var(0)=2)+195*(var(0)=3)+174*(var(0)=4)+165*(var(0)=5)+230*(var(0)=6)+190*(var(0)=7)+137*(var(0)=9)+142*(var(0)=10)+142*(var(0)=11)+155*(var(0)=12)

[State 0, VarSet]
type = VarSet
trigger1 = var(0)=1 && fvar(0)>6355
trigger2 = var(0)=2 && fvar(0)>3157
trigger3 = var(0)=3 && fvar(0)>5300
trigger4 = var(0)=4 && fvar(0)>2555
trigger5 = var(0)=5 && fvar(0)>1940
trigger6 = var(0)=6 && fvar(0)>1608
trigger7 = var(0)=7 && fvar(0)>1193
trigger8 = var(0)=9 && fvar(0)>2253
trigger9 = var(0)=10 && fvar(0)>3603
trigger10 = var(0)=11 && fvar(0)>2210
trigger11 = var(0)=12 && fvar(0)>2495
fvar(0)=6355*(var(0)=1)+3157*(var(0)=2)+5300*(var(0)=3)+2555*(var(0)=4)+1940*(var(0)=5)+1608*(var(0)=6)+1193*(var(0)=7)+2253*(var(0)=9)+3603*(var(0)=10)+2210*(var(0)=11)+2495*(var(0)=12)



[State 0, VarSet]
type = VarSet
trigger1 = var(0)=13 && fvar(0)<162
trigger2 = var(0)=14 && fvar(0)<145
trigger3 = var(0)=15 && fvar(0)<184
trigger4 = var(0)=16 && fvar(0)<165
trigger5 = var(0)=17 && fvar(0)<137
trigger6 = var(0)=18 && fvar(0)<97
trigger7 = var(0)=20 && fvar(0)<150
trigger8 = var(0)=21 && fvar(0)<145
trigger9 = var(0)=22 && fvar(0)<269
trigger10 = var(0)=23 && fvar(0)<95
fvar(0)=162*(var(0)=13)+145*(var(0)=14)+184*(var(0)=15)+165*(var(0)=16)+137*(var(0)=17)+97*(var(0)=18)+150*(var(0)=20)+145*(var(0)=21)+269*(var(0)=22)+95*(var(0)=23)

[State 0, VarSet]
type = VarSet
trigger1 = var(0)=13 && fvar(0)>3245
trigger2 = var(0)=14 && fvar(0)>3112
trigger3 = var(0)=15 && fvar(0)>1625
trigger4 = var(0)=16 && fvar(0)>1260
trigger5 = var(0)=17 && fvar(0)>2015
trigger6 = var(0)=18 && fvar(0)>874
trigger7 = var(0)=20 && fvar(0)>2664
trigger8 = var(0)=21 && fvar(0)>2410
trigger9 = var(0)=22 && fvar(0)>1700
trigger10 = var(0)=23 && fvar(0)>1665
fvar(0)=3245*(var(0)=13)+3112*(var(0)=14)+1625*(var(0)=15)+1260*(var(0)=16)+2015*(var(0)=17)+874*(var(0)=18)+2664*(var(0)=20)+2410*(var(0)=21)+1700*(var(0)=22)+1665*(var(0)=23)


[State 0, VarSet]
type = VarSet
trigger1 = var(0)=24 && fvar(0)<256
trigger2 = var(0)=25 && fvar(0)<132
trigger3 = var(0)=26 && fvar(0)<162
trigger4 = var(0)=27 && fvar(0)<230
fvar(0)=256*(var(0)=24)+132*(var(0)=25)+162*(var(0)=26)+230*(var(0)=27)

[State 0, VarSet]
type = VarSet
trigger1 = var(0)=24 && fvar(0)>1915
trigger2 = var(0)=25 && fvar(0)>3408
trigger3 = var(0)=26 && fvar(0)>2647
trigger4 = var(0)=27 && fvar(0)>1150
fvar(0)=1915*(var(0)=24)+3408*(var(0)=25)+2647*(var(0)=26)+1150*(var(0)=27)







[State 0, VarSet]
type = VarSet
triggerall = var(0)=1
trigger1 = numhelper(20100) && helper(20100),time>=2 && helper(20100),var(10)=20100 && (fvar(0)=[1753+1,2027-1])
trigger2 = numhelper(20102) && helper(20102),time>=2 && helper(20102),var(10)=20100 && (fvar(0)=[4690+1,4965-1])
fvar(0)= 1753*(fvar(0)=[1753,1890])+2027*(fvar(0)=[1890+1,2027])  +  4690*(fvar(0)=[4690,4828])+4965*(fvar(0)=[4828+1,4965])

[State 0, VarSet]
type = VarSet
triggerall = var(0)=3
trigger1 = numhelper(20305) && helper(20305),time>=2 && helper(20305),var(10)=20305 && (fvar(0)=[2590+1,2800-1])
fvar(0)= 2590*(fvar(0)=[2590,2695])+2800*(fvar(0)=[2695+1,2800])

[State 0, VarSet]
type = VarSet
triggerall = var(0)=7
trigger1 = numhelper(10080) && helper(10080),var(12)=7 && fvar(0)>900
fvar(0)= 900

[State 0, VarSet]
type = VarSet
triggerall = var(0)=10
trigger1 = numhelper(21001) && helper(21001),time>=2 && helper(21001),var(10)=21001 && (fvar(0)=[1800+1,2200-1])
fvar(0)= 1800*(fvar(0)=[1800,2000])+2200*(fvar(0)=[2000+1,2200])

[State 0, VarSet]
type = VarSet
triggerall = var(0)=18
trigger1 = numhelper(10080) && helper(10080),var(12)=7 && fvar(0)>620
fvar(0)= 620

[State 0, VarSet]
type = VarSet
triggerall = var(0)=21
trigger1 = numhelper(22101) && helper(22101),time>=2 && helper(22101),var(10)=20100 && (fvar(0)=[930+1,1233-1])
fvar(0)= 930*(fvar(0)=[930,1080])+1233*(fvar(0)=[1080+1,1233])

[State 0, VarSet]
type = VarSet
triggerall = var(0)=27
trigger1 = numhelper(10080) && helper(10080),var(12)=7 && fvar(0)>840
fvar(0)= 840



;---------------life

[State 0, VarAdd]
type = VarAdd
trigger1 = fvar(6)!=0
fvar(7)=1

[State 0, Explod]
type = explod
trigger1 = fvar(7)=1
anim = 10431+(random%3)
ID = 10431
pos = -10+(random%200),40+(random%90)
postype = back
bindtime=-1
scale=0.5+0.01*(random%50),0.5+0.01*(random%50)
sprpriority = 250
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = fvar(7)=1
anim = 10431+(random%3)
ID = 10431
pos = -10+(random%200),40+(random%90)
postype = back
bindtime=-1
scale=0.5+0.01*(random%50),0.5+0.01*(random%50)
sprpriority = 250
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, VarAdd]
type = VarAdd
trigger1 = fvar(6)!=0 && fvar(7)=1
fvar(5)=fvar(6)

[State 0, VarAdd]
type = VarAdd
trigger1 = fvar(5)<100 && fvar(7)=0 && ((fvar(8)<=0&&fvar(9)<=0&&numexplod(10401)=0&&numexplod(10427)=0)||var(34)!=0)
fvar(5)=0.1+fvar(5)*0.002

[State 0, VarSet]
type = VarSet
trigger1 = fvar(7)>=10
fvar(6)=0

[State 0, VarSet]
type = VarSet
trigger1 = fvar(6)=0
fvar(7)=0

[State 0, VarSet]
type = VarSet
trigger1 = fvar(5)<0 || fvar(5)>100
fvar(5)=100*(fvar(5)>100)

[State 0, VarSet]
type = VarSet
triggerall = fvar(4)<=0
trigger1 = numhelper(10080) && helper(10080),var(12)=3 && (helper(10080),time=610) && (helper(10080),p2dist x=[-70,70])
trigger2 = numhelper(10090) && helper(10090),stateno=10092 && (helper(10090),time=10) && (helper(10090),p2dist x=[-70,70])
trigger3 = numhelper(10091) && helper(10091),stateno=10092 && (helper(10091),time=10) && (helper(10091),p2dist x=[-70,70])
trigger4 = numhelper(10092) && helper(10092),stateno=10092 && (helper(10092),time=10) && (helper(10092),p2dist x=[-70,70])
trigger5 = numhelper(10093) && helper(10093),stateno=10092 && (helper(10093),time=10) && (helper(10093),p2dist x=[-70,70])
trigger6 = numhelper(10094) && helper(10094),stateno=10092 && (helper(10094),time=10) && (helper(10094),p2dist x=[-70,70])
trigger7 = numhelper(10095) && helper(10095),stateno=10092 && (helper(10095),time=10) && (helper(10095),p2dist x=[-70,70])
trigger8 = numhelper(10096) && helper(10096),stateno=10092 && (helper(10096),time=10) && (helper(10096),p2dist x=[-70,70])
fvar(9)=350

[State 0, PlaySnd]
type = PlaySnd
trigger1 = fvar(9)=350
value = S5,13
channel=10

[State 0, Explod]
type = explod
trigger1 = !numexplod(10429)
trigger1 = fvar(8)>0
anim = 10429
ID = 10429
pos = 0,0
postype =back
bindtime=-1
removetime=-1
scale=1,1
sprpriority = 1000-1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = !numexplod(10428)
trigger1 = fvar(9)>0
anim = 10428
ID = 10428
pos = 0,0
postype =back
bindtime=-1
removetime=-1
scale=1,1
sprpriority = 1000+1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, VarAdd]
type = VarAdd
trigger1 = numhelper(10080)&&helper(10080),var(12)=5 && (helper(10080),p2dist x=[-30,30])
fvar(0)=-ifelse(enemy(0),vel x<5,enemy(0),vel x,5)*(enemy(0),facing)*(1+0.7*(helper(10000),var(32)!=0))

[State 0, PlaySnd]
type = PlaySnd
trigger1 = numhelper(10080)&&helper(10080),var(12)=5 && (helper(10080),p2dist x=[-30,30])
value = s1,22
channel=9

[State 0, Explod]
type = explod
triggerall = numexplod(10427)<=4
trigger1 = numhelper(10080)&&helper(10080),var(12)=5 && (helper(10080),p2dist x=[-30,30])
trigger2 = numhelper(11100) && helper(11100),var(0)=2200 && helper(11100),var(1)=helper(10000),var(0) && helper(11100),numexplod(10421)
anim = 10427
ID = 10427
pos = 0,0
postype =back
bindtime=-1
scale=1,1
sprpriority = 1000-2
supermovetime=9999
pausemovetime=9999
ownpal=1


[State 0, VarAdd]
type = VarAdd
trigger1 = numhelper(10080)&&helper(10080),var(12)=1 && helper(10080),time<=130 && (helper(10080),p2dist x=[10,250]) && (helper(10080),p2dist y>-60)
fvar(5)=-0.24

[State 0, Explod]
type = explod 
trigger1 = !numexplod(10401)
trigger1 = numhelper(10080)&&helper(10080),var(12)=1 && helper(10080),time<=130 && (helper(10080),p2dist x=[10,250]) && (helper(10080),p2dist y>-60)
anim = 10401
ID = 10401
pos = 0,-50
postype = p2
bindtime=-1
removetime=300
scale=0.7,0.7
sprpriority = 5
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = numexplod(10426)<=2
trigger1 = numexplod(10401)
anim = 10426
ID = 10426
pos = 0,0
postype =back
bindtime=-1
scale=1,1
sprpriority = 1000-2
supermovetime=9999
pausemovetime=9999
ownpal=1


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = numexplod(10429)
trigger1 = fvar(8)<=0
id = 10429

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = numexplod(10428)
trigger1 = fvar(9)<=0
id = 10428

[State 0, VarAdd]
type = VarAdd
trigger1 = fvar(8)>0
fvar(8)=-1

[State 0, Var]
type = Varset
trigger1 = fvar(8)<0
fvar(8)=0

[State 0, VarAdd]
type = VarAdd
trigger1 = fvar(9)>0
fvar(9)=-1

[State 0, Var]
type = Varset
trigger1 = fvar(9)<0
fvar(9)=0

[State 0, VarAdd]
type = VarAdd
trigger1 = fvar(4)>0
fvar(4)=-1

[State 0, VarSet]
type = VarSet
trigger1 = fvar(5)<=65*(var(30)=0) && var(31)
fvar(4)=1031

[State 0, VarRangeSet]
type = VarRangeSet
trigger1 = fvar(4)=1030
value = 0
first = 30
last = 34

[State 0, VarSet]
type = VarSet
trigger1 = fvar(4)>0
fvar(5)=100


[State 0, Explod]
type = explod
trigger1 = fvar(4)=1030
anim = 10435
ID = 10435
pos = 0,0
postype = back
bindtime=-1
removetime=31
scale=3,3
sprpriority = 1000+10
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = fvar(4)>0 && !numexplod(10439)
anim = 10439
ID = 10439
pos = 0,0
postype = back
bindtime=-1
sprpriority = 1000+8
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = fvar(4)>0 && !numexplod(10438)
anim = 10438
ID = 10438
pos = 0,0
postype = back
bindtime=-1
removetime=-1
sprpriority = 1000+6
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = numexplod(10438)
trigger1 = fvar(4)<=0
id = 10438

[State 0, ChangeState]
type = ChangeState
trigger1 = fvar(5)<=65*(var(30)=0)
trigger2 = var(15)=40 && var(16)=2
trigger3 = var(14)=100000
value =10020

;----------------power

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(40) && var(41)<=0
value = S4,13

[State 0, VarSet]
type = VarSet
trigger1 = var(40) && var(41)<=0
var(40)=0

;----------------rounds

[State 0, Var]
type = Varadd
triggerall = roundstate>=2
trigger1 = (var(16)=[0,600])
trigger2 = var(16)>=601 && var(17)<=0 && !numhelper(11000) && !numhelper(11100) && !(var(18)=2300 && var(19)>0)
var(16)=1

[State 0, VarSet]
type = VarSet
trigger1 = var(16)>=1100
var(16)=0


;round started
[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(16)=20+50*(var(15)=1 && var(4)=0)
trigger1 = var(18)!=2100
value =S2,3*(var(18)=2000||var(18)=2200)+6*(var(4)=1&&!var(18))+8*(var(4)=2&&!var(18))+10*(var(18)=2300)
channel=1
[State 0, SndPan]
type = SndPan
trigger1 = 1
channel = 1
abspan =  145

;timer
[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(16)>=900 && (((var(16)%56)=1 && var(4)=0)||(var(16)=905 && var(4)=2))
value = S2,1+8*(var(4)=2)
channel=2
[State 0, SndPan]
type = SndPan
trigger1 = 1
channel = 2
abspan =  145

;round ended
[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(16)=620
value = S2,2+3*(var(4)=1)
channel=3
[State 0, SndPan]
type = SndPan
trigger1 = 1
channel = 3
abspan =  145

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(16)=300 && (var(15)=[3,5]) && var(4)!=1
value = S2,4
[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(16)=1 && (var(15)=0) && var(4)=0
value = S2,7

;round
[State 0, VarAdd]
type = VarAdd
trigger1 = var(16)=10
var(15)=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(16)=80||var(16)=750
id = 10100

[State 0, Explod]
type = explod 
trigger1 = var(16)=80
anim = 10101-1*(var(15)=1)
ID = 10100
pos = 0,0
postype = back
bindtime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(16)=80 && var(15)>=2
anim = 10110+(var(15)-10*floor(var(15)*0.1))
ID = 10100
pos = 5*(var(15)>=10),0
postype = back
bindtime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(16)=80 && var(15)>=2 && var(15)>=10
anim = 10110+(floor(var(15)*0.1)-10*floor(var(15)*0.01))
ID = 10100
pos = -5,0
postype = back
bindtime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1


[State 0, Explod]
type = explod 
trigger1 = var(16)=750
anim = 10102
ID = 10100
pos = 0,0
postype = back
bindtime=-1
removetime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(16)=750
anim = 10120+(var(15)-10*floor(var(15)*0.1))
ID = 10100
pos = 5*(var(15)>=10),0
postype = back
bindtime=-1
removetime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(16)=750 && var(15)>=10
anim = 10120+(floor(var(15)*0.1)-10*floor(var(15)*0.01))
ID = 10100
pos = -5,0
postype = back
bindtime=-1
removetime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1





;enemys
[State 0, VarSet]
type = VarSet
trigger1 = var(16)=600
var(17)=floor((4+3*var(15))*(1-0.5*(var(18)!=0)))*(var(18)!=2000)*(var(18)!=2300)

[State 0, Helper]
type = Helper
trigger1 = numhelper(11000)<ifelse(var(15)<15,5+var(15),20) && var(0) && var(17)>0
trigger2 = numhelper(10073) && helper(10073),var(15) && (helper(10073),time=10||helper(10073),time=13||helper(10073),time=20||helper(10073),time=23)
helpertype = normal
name = "e"
ID = 11000
stateno = 11000
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1




;------bosses

[State 0, Helper]
type = Helper
trigger1 = var(18)=2000 && var(16)=590
trigger2 = var(18)=2100 && (var(16)=590||(var(16)=592&&var(15)>20)||var(16)=594&&var(15)>30)
trigger3 = var(18)=2200 && var(16)=590
trigger4 = var(18)=2300 && var(16)>=590 && var(19)>0 && random<=6 && numhelper(11100)<3+(var(15)>=15)+(var(15)>=30)
helpertype = normal
name = "e"
ID = 11100
stateno = 11000
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1


[State 0, VarSet]
type = VarSet
trigger1 = var(16)=18 && var(4)=0 && var(15)>=8
var(18)=(2000+300*(var(40)=0))*((var(15)%5)=3)

[State 0, VarSet]
type = VarSet
trigger1 = var(16)=18 && var(4)=1 && var(15)>=8
var(18)=(2100+200*((var(15)%10)!=3))*((var(15)%5)=3)

[State 0, VarSet]
type = VarSet
trigger1 = var(16)=18 && var(4)=2 && var(15)>=8
var(18)=(2200+100*((var(15)%10)=3))*((var(15)%5)=3)

[State 0, VarSet]
type = VarSet
trigger1 = var(16)=18 && var(18)=2300
var(19)=5+floor(0.5*var(15))



[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(18)=2000 && (time%140)=70 && var(42)<=3200
value = S16,2
channel = 12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(18)=2100 && var(16)=400
value = S16,4
channel = 12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(18)=2200 && (time%150)=70 && var(42)<=3200
value = S16,3
channel = 12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(18)=2300 && (time%242)=70 && var(42)<=3200
value = S16,1
channel = 12




[State 0, VarSet]
type = VarSet
trigger1 = var(16)=602
var(18)=0

[State 0, StopSnd]
type = StopSnd
trigger1 = var(16)=602
channel = 12

;-----palfx

[State 0, VarAdd]
type = VarAdd
trigger1 = var(1)>=1
var(1)=1-101*(var(1)>=100)

[State 0, VarSet]
type = VarSet
triggerall = var(1)=0
trigger1 = var(18)=2000
trigger2 = numhelper(10070) && helper(10070),var(15)
trigger3 = var(42)=[3001,3200]
trigger4 = var(18)=2100
trigger5 = var(18)=2200
var(1)=1

[State 0, 0]
type = PalFX
triggerall = var(1)=1
trigger1 = var(18)=2000
time = 100
add = -80,-80,-30
sinadd = -20,-20,20,50

[State 0, 0]
type = PalFX
triggerall = var(1)=1
trigger1 = numhelper(10070) && helper(10070),var(15)
trigger2 = var(42)=[3001,3200]
time = 100
add = 0,0,-50
sinadd = 100,-100,-40,50

[State 0, 0]
type = PalFX
triggerall = var(1)=1
trigger1 = var(18)=2100
time = 100
add = 20,20,30
sinadd = 0,0,10,50

[State 0, 0]
type = PalFX
triggerall = var(1)=1
trigger1 = var(18)=2200
time = 100
add = -30,-30,-30
sinadd = 5,5,5,50



;---------------perks


[State 0, Helper]
type = Helper
trigger1 = var(0)=1||var(0)=16||var(0)=26
trigger1 = !numhelper(10060)
helpertype = normal
name = "o"
ID = 10060
stateno = 10060
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1||var(0)=9||var(0)=20
trigger1 = !numhelper(10061)
helpertype = normal
name = "o"
ID = 10061
stateno = 10060
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=2||var(0)=10||var(0)=25
trigger1 = !numhelper(10062)
helpertype = normal
name = "o"
ID = 10062
stateno = 10060
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=3||var(0)=17||var(0)=21
trigger1 = !numhelper(10063)
helpertype = normal
name = "o"
ID = 10063
stateno = 10060
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=4||var(0)=11||var(0)=24
trigger1 = !numhelper(10064)
helpertype = normal
name = "o"
ID = 10064
stateno = 10060
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, VarRangeSet]
type = VarRangeSet
trigger1 = var(16)=20
value = 0
first = 35
last = 39


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 10103

[State 0, Explod]
type = explod 
trigger1 = var(30)
anim = 10103
ID = 10103
pos = 0,0
postype = back
bindtime=-1
removetime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(31)
anim = 10104
ID = 10103
pos = 0,0
postype = back
bindtime=-1
removetime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(32)
anim = 10105
ID = 10103
pos = 0,0
postype = back
bindtime=-1
removetime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(33)
anim = 10106
ID = 10103
pos = 0,0
postype = back
bindtime=-1
removetime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(34)
anim = 10107
ID = 10103
pos = 0,0
postype = back
bindtime=-1
removetime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1


;-----------text


;---you need money : var(10)

[State 0, VarSet]
type = VarSet
trigger1 = var(10)
var(11)=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(11)=1 && var(12)=1
value = S0,35

[State 0, text]
type = Explod
trigger1 = var(11)=1
trigger1 = var(12)=[0,14]
anim = 10700+24*(var(12)=0)+54*(var(12)=1)+60*(var(12)=2)+99*(var(12)=3)+53*(var(12)=4)+44*(var(12)=5)+44*(var(12)=6)+43*(var(12)=7)+99*(var(12)=8)+52*(var(12)=9)+54*(var(12)=10)+53*(var(12)=11)+44*(var(12)=12)+64*(var(12)=13)+99*(var(12)=14)
ID = 5
pos = ifelse(facing=-1,320-7*(var(12)),7*(var(12))),235
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(11)=1
trigger1 = var(12)=[15,17]
anim = 10700+66*(var(12)=15)+ifelse(var(10)>=10000,30+(floor(var(10)*0.0001)-10*floor(var(10)*0.00001)),99)*(var(12)=16)+ifelse(var(10)>=1000,30+(floor(var(10)*0.001)-10*floor(var(10)*0.0001)),99)*(var(12)=17)
ID = 5
pos = ifelse(facing=-1,320-7*(var(12)),7*(var(12))),235
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(11)=1
trigger1 = var(12)=[18,20]
anim = 10700+ifelse(var(10)>=100,30+(floor(var(10)*0.01)-10*floor(var(10)*0.001)),99)*(var(12)=18)+ifelse(var(10)>=10,30+(floor(var(10)*0.1)-10*floor(var(10)*0.01)),99)*(var(12)=19)+(30+var(10)-10*floor(var(10)*0.1))*(var(12)=20)
ID = 5
pos = ifelse(facing=-1,320-7*(var(12)),7*(var(12))),235
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1


;---mission : survive 40 rounds!

[State 0, VarSet]
type = VarSet
trigger1 = root,stateno=[190,191]
var(11)=2

[State 0, text]
type = Explod
trigger1 = var(11)=2
trigger1 = var(12)=[0,14]
anim = 10700+12*(var(12)=0)+48*(var(12)=1)+58*(var(12)=2)+58*(var(12)=3)+48*(var(12)=4)+54*(var(12)=5)+53*(var(12)=6)+66*(var(12)=7)+99*(var(12)=8)+58*(var(12)=9)+60*(var(12)=10)+57*(var(12)=11)+61*(var(12)=12)+48*(var(12)=13)+61*(var(12)=14)
ID = 5
pos = ifelse(facing=-1,320-7*(var(12)),7*(var(12))),235
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(11)=2
trigger1 = var(12)=[15,26]
anim = 10700+44*(var(12)=15)+99*(var(12)=16)+34*(var(12)=17)+30*(var(12)=18)+99*(var(12)=19)+57*(var(12)=20)+54*(var(12)=21)+60*(var(12)=22)+53*(var(12)=23)+43*(var(12)=24)+58*(var(12)=25)+27*(var(12)=26)
ID = 5
pos = ifelse(facing=-1,320-7*(var(12)),7*(var(12))),235
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

;---first turn on the power.

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(11)=3 && var(12)=1
value = S0,35

[State 0, text]
type = Explod
trigger1 = var(11)=3
trigger1 = var(12)=[0,14]
anim = 10700+5*(var(12)=0)+48*(var(12)=1)+57*(var(12)=2)+58*(var(12)=3)+59*(var(12)=4)+99*(var(12)=5)+59*(var(12)=6)+60*(var(12)=7)+57*(var(12)=8)+53*(var(12)=9)+99*(var(12)=10)+54*(var(12)=11)+53*(var(12)=12)+99*(var(12)=13)+59*(var(12)=14)
ID = 5
pos = ifelse(facing=-1,320-7*(var(12)),7*(var(12))),235
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(11)=3
trigger1 = var(12)=[15,23]
anim = 10700+47*(var(12)=15)+44*(var(12)=16)+99*(var(12)=17)+55*(var(12)=18)+54*(var(12)=19)+62*(var(12)=20)+44*(var(12)=21)+57*(var(12)=22)+26*(var(12)=23)
ID = 5
pos = ifelse(facing=-1,320-7*(var(12)),7*(var(12))),235
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

;---enjoy the music!

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(11)=4 && var(12)=1
value = S0,35

[State 0, text]
type = Explod
trigger1 = var(11)=4
trigger1 = var(12)=[0,15]
anim = 10700+4*(var(12)=0)+53*(var(12)=1)+49*(var(12)=2)+54*(var(12)=3)+64*(var(12)=4)+99*(var(12)=5)+59*(var(12)=6)+47*(var(12)=7)+44*(var(12)=8)+99*(var(12)=9)+52*(var(12)=10)+60*(var(12)=11)+58*(var(12)=12)+48*(var(12)=13)+42*(var(12)=14)+27*(var(12)=15)
ID = 5
pos = ifelse(facing=-1,320-7*(var(12)),7*(var(12))),235
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

;-----------

[State 0, Varadd]
type = Varadd
trigger1 = var(11)
var(12)=1

[State 0, VarSet]
type = VarSet
trigger1 = var(12)>100
trigger2 = var(0)=0
var(10)=0

[State 0, VarSet]
type = VarSet
trigger1 = var(12)>100 && !(root,stateno=[190,191])
trigger2 = var(0)=0
var(11)=0

[State 0, VarSet]
type = VarSet
trigger1 = var(11)=0
trigger2 = var(0)=0
var(12)=0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(11)=0
id = 5

;--------money


[State 0, Varadd]
type = Varadd
trigger1 = var(3)!=0
var(2)=var(3)

[State 0, text]
type = Explod
trigger1 = var(3)!=0
anim = 10780+(abs(var(3))-10*floor(abs(var(3))*0.1))
ID = 3
pos = 290,30
postype = back
bindtime = -1
sprpriority = 200
scale=0.5,0.5
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(3)!=0 && abs(var(3))>=10
anim = 10780+(floor(abs(var(3))*0.1)-10*floor(abs(var(3))*0.01))
ID = 3
pos = 290-6,30
postype = back
bindtime = -1
sprpriority = 200
scale=0.5,0.5
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(3)!=0 && abs(var(3))>=100
anim = 10780+(floor(abs(var(3))*0.01)-10*floor(abs(var(3))*0.001))
ID = 3
pos = 290-2*6,30
postype = back
bindtime = -1
sprpriority = 200
scale=0.5,0.5
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(3)!=0 && abs(var(3))>=1000
anim = 10780+(floor(abs(var(3))*0.001)-10*floor(abs(var(3))*0.0001))
ID = 3
pos = 290-3*6,30
postype = back
bindtime = -1
sprpriority = 200
scale=0.5,0.5
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(3)!=0 && abs(var(3))>=10000
anim = 10780+(floor(abs(var(3))*0.0001)-10*floor(abs(var(3))*0.00001))
ID = 3
pos = 290-4*6,30
postype = back
bindtime = -1
sprpriority = 200
scale=0.5,0.5
ownpal=1


[State 0, text]
type = Explod
trigger1 = var(3)!=0
anim = ifelse(var(3)<0,10778,10779)
ID = 3
pos = 290-6-6*(abs(var(3))>=10)-6*(abs(var(3))>=100)-6*(abs(var(3))>=1000)-6*(abs(var(3))>=10000),30
postype = back
bindtime = -1
sprpriority = 200
scale=0.5,0.5
ownpal=1

[State 0, VarSet]
type = VarSet
trigger1 = var(3)!=0
var(3)=0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 1

[State 0, VarSet]
type = VarSet
trigger1 = parent,var(2)>2000000000
var(2)=2000000000
ignorehitpause = 1

[State 0, text]
type = Explod
trigger1 = 1
anim = 10730+(var(2)-10*floor(var(2)*0.1))
ID = 1
pos = 290,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(2)>=10
anim = 10730+(floor(var(2)*0.1)-10*floor(var(2)*0.01))
ID = 1
pos = 290-7,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(2)>=100
anim = 10730+(floor(var(2)*0.01)-10*floor(var(2)*0.001))
ID = 1
pos = 290-2*7,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(2)>=1000
anim = 10730+(floor(var(2)*0.001)-10*floor(var(2)*0.0001))
ID = 1
pos = 290-3*7,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(2)>=10000
anim = 10730+(floor(var(2)*0.0001)-10*floor(var(2)*0.00001))
ID = 1
pos = 290-4*7,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(2)>=100000
anim = 10730+(floor(var(2)*0.00001)-10*floor(var(2)*0.000001))
ID = 1
pos = 290-5*7,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(2)>=1000000
anim = 10730+(floor(var(2)*0.000001)-10*floor(var(2)*0.0000001))
ID = 1
pos = 290-6*7,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(2)>=10000000
anim = 10730+(floor(var(2)*0.0000001)-10*floor(var(2)*0.00000001))
ID = 1
pos = 290-7*7,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(2)>=100000000
anim = 10730+(floor(var(2)*0.00000001)-10*floor(var(2)*0.000000001))
ID = 1
pos = 290-8*7,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(2)>=1000000000
anim = 10730+(floor(var(2)*0.000000001)-10*floor(var(2)*0.0000000001))
ID = 1
pos = 290-9*7,20
postype = back
bindtime = -1
removetime = -1
sprpriority = 200
scale=0.6,0.6
ownpal=1


;-----------background

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 10

;background
[State 0, Explod]
type = explod 
trigger1 = selfanimexist(var(0))
anim = var(0)
ID = 10
pos = -floor(fvar(0)),0
postype = p1
bindtime=-1
sprpriority = -100
pausemovetime=999
supermovetime=999
ownpal=0

;mask
[State 0, Explod]
type = explod 
trigger1 = selfanimexist(20050+100*var(0))
anim = 20050+100*var(0)
ID = 10
pos = -floor(fvar(0)),0
postype = p1
bindtime=-1
sprpriority = 100
pausemovetime=999
supermovetime=999
ownpal=0

;mask
[State 0, Explod]
type = explod 
trigger1 = selfanimexist(20055+100*var(0))
anim = 20055+100*var(0)
ID = 10
pos = -floor(fvar(0)),0
postype = p1
bindtime=-1
sprpriority = -200
pausemovetime=999
supermovetime=999
ownpal=1

;mask
[State 0, Explod]
type = explod 
trigger1 = var(4)=1
anim = 21060+(time%64=[8,63])+(time%64=[16,63])+(time%64=[24,63])+(time%64=[32,63])+(time%64=[40,63])+(time%64=[48,63])+(time%64=[56,63])
ID = 10
pos = -80-(floor(fvar(0)*0.5)%1430),0
postype = p1
bindtime=-1
sprpriority = -250
pausemovetime=999
supermovetime=999
ownpal=1

;mask
[State 0, Explod]
type = explod 
trigger1 = var(4)=1
anim = 21070+(time%16=[2,15])+(time%16=[4,15])+(time%16=[6,15])+(time%16=[8,15])+(time%16=[10,15])+(time%16=[12,15])+(time%16=[14,15])
ID = 10
pos = -40-(floor(fvar(0))%640)-(random%80),0
postype = p1
bindtime=-1
sprpriority = 150-300*(var(0)=9||var(0)=15||var(0)=17)-380*(var(0)=18)
pausemovetime=999
supermovetime=999
ownpal=1

;mask
[State 0, Explod]
type = explod 
trigger1 = var(18)=2300
anim = 21080
ID = 10
pos = -40-(floor(fvar(0)+time)%1399),0
postype = p1
bindtime=-1
sprpriority = 150
pausemovetime=999
supermovetime=999
ownpal=1


;-------------------sh

[State 0, Helper]
type = Helper
trigger1 = !numhelper(10030)
helpertype = normal
name = "sh"
ID =10030
stateno = 10030
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = !numhelper(10031)
helpertype = normal
name = "sh"
ID =10031
stateno = 10031
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1



;------------------doors

[State 0, Helper]
type = Helper
trigger1 = (var(0)=[1,27])
trigger1 = !numhelper(10040)
helpertype = normal
name = "o"
ID = 10040
stateno = 10040
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = (var(0)=[1,6])||(var(0)=[9,15])||(var(0)=17)||(var(0)=[20,26])
trigger1 = !numhelper(10041)
helpertype = normal
name = "o"
ID = 10041
stateno = 10040
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = (var(0)=[1,5])||(var(0)=[10,11])||(var(0)=[13,15])||(var(0)=17)||(var(0)=[20,21])||(var(0)=23)||(var(0)=[25,26])
trigger1 = !numhelper(10042)
helpertype = normal
name = "o"
ID = 10042
stateno = 10040
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=3
trigger1 = !numhelper(10043)
helpertype = normal
name = "o"
ID = 10043
stateno = 10040
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=3
trigger1 = !numhelper(10044)
helpertype = normal
name = "o"
ID = 10044
stateno = 10040
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;------------------windows

[State 0, Helper]
type = Helper
trigger1 = (var(0)=[1,7])||(var(0)=[9,10])||(var(0)=[12,15])||(var(0)=[17,18])||(var(0)=[20,22])||(var(0)=[24,27])
trigger1 = !numhelper(10050)
helpertype = normal
name = "o"
ID = 10050
stateno = 10050
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = (var(0)=[1,7])||(var(0)=[9,10])||(var(0)=[12,14])||(var(0)=[17,18])||(var(0)=[20,22])||(var(0)=[24,27])
trigger1 = !numhelper(10051)
helpertype = normal
name = "o"
ID = 10051
stateno = 10050
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1||(var(0)=[3,4])||(var(0)=[9,10])||(var(0)=17)||(var(0)=[20,21])||(var(0)=26)
trigger1 = !numhelper(10052)
helpertype = normal
name = "o"
ID = 10052
stateno = 10050
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1||(var(0)=[3,4])||(var(0)=9)||(var(0)=21)
trigger1 = !numhelper(10053)
helpertype = normal
name = "o"
ID = 10053
stateno = 10050
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(10054)
helpertype = normal
name = "o"
ID = 10054
stateno = 10050
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(10055)
helpertype = normal
name = "o"
ID = 10055
stateno = 10050
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(10056)
helpertype = normal
name = "o"
ID = 10056
stateno = 10050
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(10057)
helpertype = normal
name = "o"
ID = 10057
stateno = 10050
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, VarRangeSet]
type = VarRangeSet
trigger1 = var(0)=0
value = 0
first = 20
last = 29


;-------------------levers

;power
[State 0, Helper]
type = Helper
trigger1 = var(0)=5||var(0)=25
trigger1 = !numhelper(10070)
helpertype = normal
name = "o"
ID = 10070
stateno = 10070
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;teleport
[State 0, Helper]
type = Helper
trigger1 = var(0)=1||var(0)=3||var(0)=5||var(0)=11||var(0)=13||var(0)=17||var(0)=21||var(0)=23||var(0)=26
trigger1 = !numhelper(10071)
helpertype = normal
name = "o"
ID = 10071
stateno = 10070
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;traps
[State 0, Helper]
type = Helper
trigger1 = (var(0)=[1,7])||(var(0)=[9,14])||(var(0)=[16,18])||(var(0)=[21,27])
trigger1 = !numhelper(10072)
helpertype = normal
name = "o"
ID = 10072
stateno = 10070
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;generators
[State 0, Helper]
type = Helper
trigger1 = (var(0)=[9,10])||(var(0)=12)||(var(0)=14)||(var(0)=[16,17])
trigger1 = !numhelper(10073)
helpertype = normal
name = "o"
ID = 10073
stateno = 10070
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------mines

[State 0, Helper]
type = Helper
trigger1 = var(0)=3||var(0)=11||var(0)=23
trigger1 = !numhelper(10090)
helpertype = normal
name = "o"
ID = 10090
stateno = 10090
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=3||var(0)=11||var(0)=23
trigger1 = !numhelper(10091)
helpertype = normal
name = "o"
ID = 10091
stateno = 10090
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=3||var(0)=13
trigger1 = !numhelper(10092)
helpertype = normal
name = "o"
ID = 10092
stateno = 10090
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=3||var(0)=13
trigger1 = !numhelper(10093)
helpertype = normal
name = "o"
ID = 10093
stateno = 10090
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, VarRangeSet]
type = VarRangeSet
trigger1 = var(16)=20
value = 0
first = 45
last = 48

;-------------------bonus

[State 0, Helper]
type = Helper
trigger1 = var(0)=1||var(0)=22
trigger1 = !numhelper(10100)
helpertype = normal
name = "o"
ID = 10100
stateno = 10100
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=3||var(0)=24
trigger1 = !numhelper(10101)
helpertype = normal
name = "o"
ID = 10101
stateno = 10100
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=6||var(0)=26
trigger1 = !numhelper(10102)
helpertype = normal
name = "o"
ID = 10102
stateno = 10100
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1


;-------------------water

[State 0, Helper]
type = Helper
trigger1 = (var(0)=[10,11])||(var(0)=13)
trigger1 = !numhelper(10110)
helpertype = normal
name = "o"
ID = 10110
stateno = 10110
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = (var(0)=[10,11])||(var(0)=13)
trigger1 = !numhelper(10111)
helpertype = normal
name = "o"
ID = 10111
stateno = 10110
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = (var(0)=13)
trigger1 = !numhelper(10112)
helpertype = normal
name = "o"
ID = 10112
stateno = 10110
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------powerups

[State 0, Helper]
type = Helper
trigger1 = var(50)
trigger1 = !numhelper(10120)
helpertype = normal
name = "o"
ID = 10120
stateno = 10120
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(51)
trigger1 = !numhelper(10121)
helpertype = normal
name = "o"
ID = 10121
stateno = 10120
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(52)
trigger1 = !numhelper(10122)
helpertype = normal
name = "o"
ID = 10122
stateno = 10120
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(53)
trigger1 = !numhelper(10123)
helpertype = normal
name = "o"
ID = 10123
stateno = 10120
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(54)
trigger1 = !numhelper(10124)
helpertype = normal
name = "o"
ID = 10124
stateno = 10120
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(55)>0
var(55)=-1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(56)>0
var(56)=-1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(57)>0
var(57)=-1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(58)>0
var(58)=-1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(59)>0
var(59)=-1

[State 0, Explod]
type = explod 
trigger1 = var(55)>0
anim = 10460
ID = 10103
pos = 0,0
postype = back
bindtime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(57)>0
anim = 10461
ID = 10103
pos = 0,0
postype = back
bindtime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(59)>0
anim = 10462
ID = 10103
pos = 0,0
postype = back
bindtime=-1
sprpriority = 200
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
trigger1 = var(59)>0
anim = 10459
ID = 10103
pos = 0,0
postype = back
bindtime=-1
scale=3,3
sprpriority = 270
pausemovetime=999
supermovetime=999
ownpal=1


;-------------------box

[State 0, Helper]
type = Helper
trigger1 = (var(0)=[9,10])||(var(0)=12)||(var(0)=14)||(var(0)=[16,17])
trigger1 = !numhelper(10130)
helpertype = normal
name = "o"
ID = 10130
stateno = 10130
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------bot

[State 0, Helper]
type = Helper
triggerall = roundstate>=2
trigger1 = var(0)=[9,19]
trigger1 = !numhelper(10140)
helpertype = normal
name = "o"
ID = 10140
stateno = 10140
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1


;-------------------room1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(20000+100*var(0) +0)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +0
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(20000+100*var(0) +1)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +1
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(20000+100*var(0) +2)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +2
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(20000+100*var(0) +3)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +3
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(20000+100*var(0) +5)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +5
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(20000+100*var(0) +32)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +32
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=1
trigger1 = !numhelper(20000+100*var(0) +33)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +33
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room2

[State 0, Helper]
type = Helper
trigger1 = var(0)=2
trigger1 = !numhelper(20000+100*var(0) +11)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +11
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=2
trigger1 = !numhelper(20000+100*var(0) +12)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +12
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=2
trigger1 = !numhelper(20000+100*var(0) +13)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +13
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room3

[State 0, Helper]
type = Helper
trigger1 = var(0)=3
trigger1 = !numhelper(20000+100*var(0) +5)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +5
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room5

[State 0, Helper]
type = Helper
trigger1 = var(0)=5
trigger1 = !numhelper(20000+100*var(0) +5)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +5
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room7

[State 0, Helper]
type = Helper
trigger1 = var(0)=7
trigger1 = !numhelper(20000+100*var(0) +1)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +1
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=7
trigger1 = !numhelper(20000+100*var(0) +2)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +2
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room10

[State 0, Helper]
type = Helper
trigger1 = var(0)=10
trigger1 = !numhelper(20000+100*var(0) +1)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +1
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=10
trigger1 = !numhelper(20000+100*var(0) +2)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +2
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room11

[State 0, Helper]
type = Helper
trigger1 = var(0)=11
trigger1 = !numhelper(20000+100*var(0) +1)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +1
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room13

[State 0, Helper]
type = Helper
trigger1 = var(0)=13
trigger1 = !numhelper(20000+100*var(0) +1)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +1
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room14

[State 0, Helper]
type = Helper
trigger1 = var(0)=14
trigger1 = !numhelper(20000+100*var(0) +1)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +1
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=14
trigger1 = !numhelper(20000+100*var(0) +2)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +2
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=14
trigger1 = !numhelper(20000+100*var(0) +3)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +3
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=14
trigger1 = !numhelper(20000+100*var(0) +4)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +4
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room15

[State 0, Helper]
type = Helper
trigger1 = var(0)=15
trigger1 = !numhelper(20000+100*var(0) +1)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +1
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=15
trigger1 = !numhelper(20000+100*var(0) +2)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +2
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room21

[State 0, Helper]
type = Helper
trigger1 = var(0)=21
trigger1 = !numhelper(20000+100*var(0) +1)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +1
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=21
trigger1 = !numhelper(20000+100*var(0) +2)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +2
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room24

[State 0, Helper]
type = Helper
trigger1 = var(0)=24
trigger1 = !numhelper(20000+100*var(0) +5)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +5
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room25

[State 0, Helper]
type = Helper
trigger1 = var(0)=25
trigger1 = !numhelper(20000+100*var(0) +1)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +1
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=25
trigger1 = !numhelper(20000+100*var(0) +2)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +2
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=25
trigger1 = !numhelper(20000+100*var(0) +3)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +3
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=25
trigger1 = !numhelper(20000+100*var(0) +4)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +4
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------------------room26

[State 0, Helper]
type = Helper
trigger1 = var(0)=26
trigger1 = !numhelper(20000+100*var(0) +2)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +2
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
trigger1 = var(0)=26
trigger1 = !numhelper(20000+100*var(0) +3)
helpertype = normal
name = "o"
ID = 20000+100*var(0) +3
stateno = 20000+100*var(0)
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

;-------

[State 0, VarAdd]
type = VarAdd
trigger1 = roundstate>=2 && !(win||winko||lose||loseko)
trigger1 = enemy(0),pos y<0 && var(14)<1000
var(14)=1

[State 0, VarAdd]
type = VarAdd
trigger1 = enemy(0),pos y>=0 && var(14)<1000
var(14)=-8

[State 0, VarSet]
type = VarSet
trigger1 = var(14)>=1000
var(14)=100000


;--------------------------------------------------------------------------------
;gameoer
[Statedef 10020]
physics=N
anim=10040
movetype=A

[State 0, StopSnd]
type = StopSnd
trigger1 = !time
channel = 10

[State 0, StopSnd]
type = StopSnd
trigger1 = !time
channel = 12

[State 0, StopSnd]
type = StopSnd
trigger1 = !time
channel = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time

[State 0, Explod]
type = explod
trigger1 = !time
anim = 10435
ID = 10435
pos = 0,0
postype = back
bindtime=-1
scale=3,3
sprpriority = 1000
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Turn]
type = Turn
trigger1 = facing=-1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = -backedgedist
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = noBG
flag3 = noFG
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =1 
flag = timerfreeze
flag2 = nomusic
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = 1
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = -1
numhits=0
p2stateno=10025

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=100 && !(var(15)=40 && var(16)=2)
value = S8,0
channel=11

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=200 && !(var(15)=40 && var(16)=2)
value = S8,1
channel=10
loop=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=100 && (var(15)=40 && var(16)=2)
value = S8,2
channel=10
loop=1


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 3

[State 0, Explod]
type = explod
trigger1 = time>=100
anim = 20355+1000*(var(4)=1)+1700*(var(4)=2)
ID = 3
pos = -600+50*(var(4)=2)-0.01*(time-100)*(time<2100)-20*(time>=2100),170+0.01*(time-100)*(time<2100)+20*(time>=2100)
postype = back
bindtime=-1
removetime=-1
scale=0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100),0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100)
sprpriority = 800-100
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = time>=100
anim = 3+10*(var(4)=1)+17*(var(4)=2)
ID = 3
pos = -600+50*(var(4)=2)-0.01*(time-100)*(time<2100)-20*(time>=2100),170+0.01*(time-100)*(time<2100)+20*(time>=2100)
postype = back
bindtime=-1
removetime=-1
scale=0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100),0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100)
sprpriority = 800
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = time>=100
anim = 20350+1000*(var(4)=1)+1700*(var(4)=2)
ID = 3
pos = -600+50*(var(4)=2)-0.01*(time-100)*(time<2100)-20*(time>=2100),170+0.01*(time-100)*(time<2100)+20*(time>=2100)
postype = back
bindtime=-1
removetime=-1
scale=0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100),0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100)
sprpriority = 900
pausemovetime=999
supermovetime=999
ownpal=1



[State 0, Explod]
type = explod
trigger1 = time>=100 && !(var(15)=40 && var(16)=2)
anim = 20220+(time%48=[6,47])+(time%48=[12,47])+(time%48=[18,47])+(time%48=[24,47])+(time%48=[30,47])+(time%48=[36,47])+(time%48=[42,47])
ID = 3
pos = (420-1.8*((time%1500)-100))*((time%1500)=[100,799])-120*((time%1500)=[0,99])+(-120+1.5*((time%1500)-800))*((time%1500)=[800,1499])   -0.01*(time-100)*(time<2100)-20*(time>=2100),170+0.01*(time-100)*(time<2100)+20*(time>=2100)
postype = back
bindtime=-1
removetime=-1
facing=ifelse(((time%1500)=[100,799]),-1,1)
scale=0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100),0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100)
sprpriority = 850
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = time>=100 && !(var(15)=40 && var(16)=2)
anim = 20230+(time%48=[6,47])+(time%48=[12,47])+(time%48=[18,47])+(time%48=[24,47])+(time%48=[30,47])+(time%48=[36,47])+(time%48=[42,47])
ID = 3
pos = (460-1.5*((time%1500)-100))*((time%1500)=[100,799])-120*((time%1500)=[0,99])+(-320+2*((time%1500)-800))*((time%1500)=[800,1499])   -0.01*(time-100)*(time<2100)-20*(time>=2100),170+0.01*(time-100)*(time<2100)+20*(time>=2100)
postype = back
bindtime=-1
removetime=-1
facing=ifelse(((time%1500)=[100,799]),-1,1)
scale=0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100),0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100)
sprpriority = 850
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = time>=100 && !(var(15)=40 && var(16)=2)
anim = 20220+20*(var(4)=0)+(time%48=[6,47])+(time%48=[12,47])+(time%48=[18,47])+(time%48=[24,47])+(time%48=[30,47])+(time%48=[36,47])+(time%48=[42,47])
ID = 3
pos = (520-2*((time%1500)-100))*((time%1500)=[100,799])-120*((time%1500)=[0,99])+(-330+1.3*((time%1500)-800))*((time%1500)=[800,1499])   -0.01*(time-100)*(time<2100)-20*(time>=2100),170+0.01*(time-100)*(time<2100)+20*(time>=2100)
postype = back
bindtime=-1
removetime=-1
facing=ifelse(((time%1500)=[100,799]),-1,1)
scale=0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100),0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100)
sprpriority = 850
pausemovetime=999
supermovetime=999
ownpal=1


[State 0, Explod]
type = explod
trigger1 = time>=100 && var(4)=1
anim = 21060+(time%64=[8,63])+(time%64=[16,63])+(time%64=[24,63])+(time%64=[32,63])+(time%64=[40,63])+(time%64=[48,63])+(time%64=[56,63])
ID = 3
pos = -600-0.01*(time-100)*(time<2100)-20*(time>=2100),170+0.01*(time-100)*(time<2100)+20*(time>=2100)
postype = back
bindtime=-1
removetime=-1
scale=0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100),0.5+0.0001*(time-100)*(time<2100)+0.2*(time>=2100)
sprpriority = 800-200
pausemovetime=999
supermovetime=999
ownpal=1




;--text

[State 0, Turn]
type = Turn
trigger1 = facing=-1


[State 0, VarSet]
type = VarSet
trigger1 = !time
var(13)=0

[State 0, VarAdd]
type = VarAdd
trigger1 = var(13)<64 && time>=120
var(13)=1

[State 0, text]
type = Explod
trigger1 = !(var(15)=40 && var(16)=2)
trigger1 = var(13)=[1,9]
anim = 10700+6*(var(13)=1)+0*(var(13)=2)+12*(var(13)=3)+4*(var(13)=4)+99*(var(13)=5)+14*(var(13)=6)+21*(var(13)=7)+4*(var(13)=8)+17*(var(13)=9)
ID = 5
pos = 78+15*(var(13)),80
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=1,1
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(15)=40 && var(16)=2
trigger1 = var(13)=[1,8]
anim = 10700+24*(var(13)=1)+14*(var(13)=2)+20*(var(13)=3)+99*(var(13)=4)+22*(var(13)=5)+14*(var(13)=6)+13*(var(13)=7)+27*(var(13)=8)
ID = 5
pos = 85+15*(var(13)),80
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=1,1
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(13)=[9,21]
anim = 10700+24*(var(13)=9)+54*(var(13)=10)+60*(var(13)=11)+99*(var(13)=12)+18*(var(13)=13)+60*(var(13)=14)+57*(var(13)=15)+61*(var(13)=16) +48*(var(13)=17)+61*(var(13)=18)+44*(var(13)=19)+43*(var(13)=20)+99*(var(13)=21)
ID = 5
pos = 4*(var(15)<10)+4*(var(15)<100) + 71+8*(var(13)-9),100
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.7,0.7
ownpal=1
[State 0, text]
type = Explod
trigger1 = var(13)=[22,25]
anim = 10700+ifelse(var(15)>=100,30+(floor(var(15)*0.01)-10*floor(var(15)*0.001)),99)*(var(13)=22)+ifelse(var(15)>=10,30+(floor(var(15)*0.1)-10*floor(var(15)*0.01)),99)*(var(13)=23)+(30+var(15)-10*floor(var(15)*0.1))*(var(13)=24)+99*(var(13)=25)
ID = 5
pos = 4*(var(15)<10)+4*(var(15)<100) + 71+8*(var(13)-9)-8*(var(15)<10)-8*(var(15)<100),100
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.7,0.7
ownpal=1
[State 0, text]
type = Explod
trigger1 = var(13)=[26,31]
anim = 10700+17*(var(13)=26)+54*(var(13)=27)+60*(var(13)=28)+53*(var(13)=29)+43*(var(13)=30)+58*(var(13)=31)
ID = 5
pos = 4*(var(15)<10)+4*(var(15)<100) + 71+8*(var(13)-9)-8*(var(15)<10)-8*(var(15)<100),100
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.7,0.7
ownpal=1


[State 0, text]
type = Explod
trigger1 = var(13)=[32,37]
anim = 10700+10*(var(13)=32)+48*(var(13)=33)+51*(var(13)=34)+51*(var(13)=35)+58*(var(13)=36)+99*(var(13)=37)
ID = 5
pos = 105+7*(var(13)-32),120
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(13)=[38,43]
anim = 10700+15*(var(13)=38)+54*(var(13)=39)+48*(var(13)=40)+53*(var(13)=41)+59*(var(13)=42)+58*(var(13)=43)
ID = 5
pos = 140+7*(var(13)-32),120
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1




[State 0, text]
type = Explod
trigger1 = var(13)=[44,46]
anim = 10700+ifelse(var(49)>=100000000,30+(floor(var(49)*0.00000001)-10*floor(var(49)*0.000000001)),99)*(var(13)=44)+ifelse(var(49)>=10000000,30+(floor(var(49)*0.0000001)-10*floor(var(49)*0.00000001)),99)*(var(13)=45)+ifelse(var(49)>=1000000,30+(floor(var(49)*0.000001)-10*floor(var(49)*0.0000001)),99)*(var(13)=46)
ID = 5
pos = floor(-3.5*(var(49)<10)-3.5*(var(49)<100)-3.5*(var(49)<1000)-3.5*(var(49)<10000)-3.5*(var(49)<100000)-3.5*(var(49)<1000000)-3.5*(var(49)<10000000)-3.5*(var(49)<10000000))+6+7*(var(13)-32),140
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1
[State 0, text]
type = Explod
trigger1 = var(13)=[47,49]
anim = 10700+ifelse(var(49)>=100000,30+(floor(var(49)*0.00001)-10*floor(var(49)*0.000001)),99)*(var(13)=47)+ifelse(var(49)>=10000,30+(floor(var(49)*0.0001)-10*floor(var(49)*0.00001)),99)*(var(13)=48)+ifelse(var(49)>=1000,30+(floor(var(49)*0.001)-10*floor(var(49)*0.0001)),99)*(var(13)=49)
ID = 5
pos = floor(-3.5*(var(49)<10)-3.5*(var(49)<100)-3.5*(var(49)<1000)-3.5*(var(49)<10000)-3.5*(var(49)<100000)-3.5*(var(49)<1000000)-3.5*(var(49)<10000000)-3.5*(var(49)<10000000))+6+7*(var(13)-32),140
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1
[State 0, text]
type = Explod
trigger1 = var(13)=[50,52]
anim = 10700+ifelse(var(49)>=100,30+(floor(var(49)*0.01)-10*floor(var(49)*0.001)),99)*(var(13)=50)+ifelse(var(49)>=10,30+(floor(var(49)*0.1)-10*floor(var(49)*0.01)),99)*(var(13)=51)+(30+(floor(var(49)*1)-10*floor(var(49)*0.1)))*(var(13)=52)
ID = 5
pos = floor(-3.5*(var(49)<10)-3.5*(var(49)<100)-3.5*(var(49)<1000)-3.5*(var(49)<10000)-3.5*(var(49)<100000)-3.5*(var(49)<1000000)-3.5*(var(49)<10000000)-3.5*(var(49)<10000000))+6+7*(var(13)-32),140
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1



[State 0, text]
type = Explod
trigger1 = var(13)=[54,56]
anim = 10700+ifelse(var(2)>=100000000,30+(floor(var(2)*0.00000001)-10*floor(var(2)*0.000000001)),99)*(var(13)=54)+ifelse(var(2)>=10000000,30+(floor(var(2)*0.0000001)-10*floor(var(2)*0.00000001)),99)*(var(13)=55)+ifelse(var(2)>=1000000,30+(floor(var(2)*0.000001)-10*floor(var(2)*0.0000001)),99)*(var(13)=56)
ID = 5
pos = floor(-3.5*(var(2)<10)-3.5*(var(2)<100)-3.5*(var(2)<1000)-3.5*(var(2)<10000)-3.5*(var(2)<100000)-3.5*(var(2)<1000000)-3.5*(var(2)<10000000)-3.5*(var(2)<10000000))+15+7*(var(13)-32),140
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1
[State 0, text]
type = Explod
trigger1 = var(13)=[57,59]
anim = 10700+ifelse(var(2)>=100000,30+(floor(var(2)*0.00001)-10*floor(var(2)*0.000001)),99)*(var(13)=57)+ifelse(var(2)>=10000,30+(floor(var(2)*0.0001)-10*floor(var(2)*0.00001)),99)*(var(13)=58)+ifelse(var(2)>=1000,30+(floor(var(2)*0.001)-10*floor(var(2)*0.0001)),99)*(var(13)=59)
ID = 5
pos = floor(-3.5*(var(2)<10)-3.5*(var(2)<100)-3.5*(var(2)<1000)-3.5*(var(2)<10000)-3.5*(var(2)<100000)-3.5*(var(2)<1000000)-3.5*(var(2)<10000000)-3.5*(var(2)<10000000))+15+7*(var(13)-32),140
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1
[State 0, text]
type = Explod
trigger1 = var(13)=[60,62]
anim = 10700+ifelse(var(2)>=100,30+(floor(var(2)*0.01)-10*floor(var(2)*0.001)),99)*(var(13)=60)+ifelse(var(2)>=10,30+(floor(var(2)*0.1)-10*floor(var(2)*0.01)),99)*(var(13)=61)+(30+(floor(var(2)*1)-10*floor(var(2)*0.1)))*(var(13)=62)
ID = 5
pos = floor(-3.5*(var(2)<10)-3.5*(var(2)<100)-3.5*(var(2)<1000)-3.5*(var(2)<10000)-3.5*(var(2)<100000)-3.5*(var(2)<1000000)-3.5*(var(2)<10000000)-3.5*(var(2)<10000000))+15+7*(var(13)-32),140
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(13)=63
anim = 10470+1*(var(15)=40 && var(16)=2)
ID = 5
pos =0,0
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
ownpal=1


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = roundstate>=2 && !(win||winko||lose||loseko)
trigger1 = var(13)=[64,65]
trigger1 = enemy(0),command="up" || enemy(0),command="down"
id = 6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = roundstate>=2 && !(win||winko||lose||loseko)
trigger1 = var(13)=[64,65]
trigger1 = enemy(0),command="up" || enemy(0),command="down"
value = S0,40

[State 0, VarSet]
type = VarSet
trigger1 = roundstate>=2 && !(win||winko||lose||loseko)
trigger1 = var(13)=[64,65]
trigger1 = enemy(0),command="up" || enemy(0),command="down"
var(13)=64*(var(13)=65)+65*(var(13)=64)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = roundstate>=2 && !(win||winko||lose||loseko)
trigger1 = var(13)=[64,65]
trigger1 = enemy(0),command="x" || enemy(0),command="y" || enemy(0),command="z" || enemy(0),command="a" || enemy(0),command="b" || enemy(0),command="c" || enemy(0),command="z"
value = S0,31

[State 0, text]
type = Explod
trigger1 = var(13)=[64,65]
trigger1 = !numexplod(6)
anim = 10472
ID = 6
pos =0,24*(var(13)=65)
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1201
ownpal=1

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = roundstate>=2 && !(win||winko||lose||loseko)
trigger1 = var(13)=64 && !(var(15)=40 && var(16)=2)
trigger1 = enemy(0),command="x" || enemy(0),command="y" || enemy(0),command="z" || enemy(0),command="a" || enemy(0),command="b" || enemy(0),command="c" || enemy(0),command="z"
var(4)=1+(random%3)


[State 0, VarSet]
type = VarSet
trigger1 = roundstate>=2 && !(win||winko||lose||loseko)
trigger1 = var(13)=64
trigger1 = enemy(0),command="x" || enemy(0),command="y" || enemy(0),command="z" || enemy(0),command="a" || enemy(0),command="b" || enemy(0),command="c" || enemy(0),command="z"
var(13)=70


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(13)=70

[State 0, StopSnd]
type = StopSnd
trigger1 = var(13)=70
channel = 10

[State 0, StopSnd]
type = StopSnd
trigger1 = var(13)=70
channel = 11

[State 0, VarSet]
type = VarSet
trigger1 = var(13)=70 && (var(15)=40 && var(16)=2)
var(16)=3

[State 0, TargetState]
type = TargetState
trigger1 = var(13)=70
value =10026

[State 0, ChangeState]
type = ChangeState
trigger1 = var(13)=70
value =10000+10*(var(15)=40 && var(16)=3)

[State 0, LifeSet]
type = targetlifeadd
trigger1 = roundstate>=2 && !(win||winko||lose||loseko)
trigger1 = var(13)=65 && !(var(15)=40 && var(16)=2)
trigger1 = enemy(0),command="x" || enemy(0),command="y" || enemy(0),command="z" || enemy(0),command="a" || enemy(0),command="b" || enemy(0),command="c" || enemy(0),command="z"
value = -1000000

;----

[State 0, text]
type = Explod
trigger1 = var(14)=100000
trigger1 = !(var(15)=40 && var(16)=2)
trigger1 = var(13)=[1,9]
anim = 10700+2*(var(13)=1)+47*(var(13)=2)+44*(var(13)=3)+40*(var(13)=4)+59*(var(13)=5)+48*(var(13)=6)+53*(var(13)=7)+46*(var(13)=8)+99*(var(13)=9)
ID = 5
pos = ifelse(facing=-1,320-7*(var(13)-1),7*(var(13)-1)),30
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1

[State 0, text]
type = Explod
trigger1 = var(14)=100000
trigger1 = !(var(15)=40 && var(16)=2)
trigger1 = var(13)=[10,19]
anim = 10700+43*(var(13)=10)+48*(var(13)=11)+58*(var(13)=12)+42*(var(13)=13)+54*(var(13)=14)+61*(var(13)=15)+44*(var(13)=16)+57*(var(13)=17)+44*(var(13)=18)+43*(var(13)=19)
ID = 5
pos = ifelse(facing=-1,320-7*(var(13)-1),7*(var(13)-1)),30
facing=ifelse(facing=-1,-1,1)
postype = back
bindtime = -1
removetime = -1
sprpriority = 1200
scale=0.6,0.6
ownpal=1

[State 0, VarSet]
type = VarSet
trigger1 = var(13)>=20
var(14)=0




;--------------------------------------------------------------------------------
;custum gameover
[statedef 10025]
type = S
movetype = H
physics = N
SprPriority=0
velset=0,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = 140-backedgedist
ignorehitpause = 1

[State 0, LifeSet]
type = LifeSet
trigger1 = lose||loseko
value = 0

[State 0, SelfState]
type = SelfState
trigger1 =lose||loseko
value =5150

[State 0, SelfState]
type = SelfState
trigger1 =win||winko
value =0
ctrl =1


;--------------------------------------------------------------------------------
;custum gameover
[statedef 10026]
type = S
movetype = H
physics = N
SprPriority=0
velset=0,0

[State 0, SelfState]
type = SelfState
trigger1 = 1
value =0
ctrl =1

;--------------------------------------------------------------------
;scrholder
[Statedef 10030]
physics=N
velset=0,0
anim=10030

;var(1)=life

;------------bunus

[State 0, VarSet]
type = VarSet
trigger1 = numhelper(10100) && helper(10100),var(15)
trigger1 = var(50)<1
var(50)=1

[State 0, VarSet]
type = VarSet
trigger1 = numhelper(10101) && helper(10101),var(15)
trigger1 = var(51)<1
var(51)=1

[State 0, VarSet]
type = VarSet
trigger1 = numhelper(10102) && helper(10102),var(15)
trigger1 = var(52)<1
var(52)=1

;------------map1

;room1 door
[State 0, VarSet]
type = VarSet
triggerall = helper(10000),var(0)=1
trigger1 = numhelper(20100) && helper(20100),var(10)=20101 && helper(20100),animelem=5
triggerall = var(10)<1
var(10)=1

;room1 door
[State 0, VarSet]
type = VarSet
triggerall = helper(10000),var(0)=1
trigger1 = numhelper(20102) && helper(20102),var(10)=20101 && helper(20102),animelem=5
triggerall = var(11)<1
var(11)=1

;room3 block
[State 0, VarSet]
type = VarSet
triggerall = helper(10000),var(0)=3
trigger1 = numhelper(20305) && helper(20305),var(15) && helper(20305),time>=70
triggerall = var(12)<1
var(12)=1

;room2 defcon
[State 0, Varadd]
type = Varadd
triggerall = helper(10000),var(0)=2
trigger1 = numhelper(20211) && helper(20211),var(50) && helper(20211),time=1 && helper(10000),var(40)
var(13)=1-5*(var(13)>=4)

;room2 defcon
[State 0, Varadd]
type = Varadd
triggerall = helper(10000),var(0)=2
trigger1 = numhelper(20212) && helper(20212),var(50) && helper(20212),time=1 && helper(10000),var(40)
var(14)=1-5*(var(14)>=4)

;room2 defcon
[State 0, Varadd]
type = Varadd
triggerall = helper(10000),var(0)=2
trigger1 = numhelper(20213) && helper(20213),var(50) && helper(20213),time=1 && helper(10000),var(40)
var(15)=1-5*(var(15)>=4)

;room1 defcon
[State 0, Varset]
type = Varset
triggerall = helper(10000),var(0)=1
trigger1 = numhelper(20132) && helper(20132),var(50) && helper(20132),time=1 && helper(10000),var(40)
var(16)=1+(random%5)

;room1 defcon
[State 0, Varset]
type = Varset
triggerall = helper(10000),var(0)=1
trigger1 = numhelper(20132) && helper(20132),var(50) && helper(20132),time=1 && helper(10000),var(40)
var(17)=1+(random%5)

;room1 defcon
[State 0, Varset]
type = Varset
triggerall = helper(10000),var(0)=1
trigger1 = numhelper(20132) && helper(20132),var(50) && helper(20132),time=1 && helper(10000),var(40)
var(18)=1+(random%5)

[State 0, VarRangeSet]
type = VarRangeSet
trigger1 = helper(10000),var(40)=0
trigger2 = helper(10000),var(42)
value = 0
first = 13
last = 18


;------------map2

;room10 block
[State 0, VarSet]
type = VarSet
triggerall = helper(10000),var(0)=10
trigger1 = numhelper(21001) && helper(21001),var(15) && helper(21001),time>=70
trigger2 = numhelper(21002) && helper(21002),var(15) && helper(21002),time>=70
triggerall = var(10)<1
var(10)=1

;room14 gear
[State 0, Varadd]
type = Varadd
triggerall = helper(10000),var(0)=14
trigger1 = numhelper(21402) && helper(21402),var(50) && helper(21402),time=1 && helper(10000),var(40)
var(13)=1-5*(var(13)>=4)

;room14 gear
[State 0, Varadd]
type = Varadd
triggerall = helper(10000),var(0)=14
trigger1 = numhelper(21403) && helper(21403),var(50) && helper(21403),time=1 && helper(10000),var(40)
var(14)=1-5*(var(14)>=4)

;room14 gear
[State 0, Varadd]
type = Varadd
triggerall = helper(10000),var(0)=14
trigger1 = numhelper(21404) && helper(21404),var(50) && helper(21404),time=1 && helper(10000),var(40)
var(15)=1-5*(var(15)>=4)

;room15 gear
[State 0, Varset]
type = Varset
triggerall = helper(10000),var(0)=15
trigger1 = numhelper(21501) && helper(21501),var(50) && helper(21501),time=1 && helper(10000),var(40)
var(16)=1+(random%5)

;room15 gear
[State 0, Varset]
type = Varset
triggerall = helper(10000),var(0)=15
trigger1 = numhelper(21501) && helper(21501),var(50) && helper(21501),time=1 && helper(10000),var(40)
var(17)=1+(random%5)

;room15 gear
[State 0, Varset]
type = Varset
triggerall = helper(10000),var(0)=15
trigger1 = numhelper(21501) && helper(21501),var(50) && helper(21501),time=1 && helper(10000),var(40)
var(18)=1+(random%5)


;--------generators

[State 0, VarSet]
type = VarSet
triggerall = helper(10000),var(4)=1
triggerall = helper(10000),var(0)=9||helper(10000),var(0)=10||helper(10000),var(0)=12||helper(10000),var(0)=14||helper(10000),var(0)=16||helper(10000),var(0)=17
trigger1 = numhelper(10073) && helper(10073),var(15)=1
var(20+(helper(10000),var(0)=10)+2*(helper(10000),var(0)=12)+3*(helper(10000),var(0)=16)+4*(helper(10000),var(0)=17)+5*(helper(10000),var(0)=14))=1

[State 0, VarSet]
type = VarSet
triggerall = helper(10000),var(4)=1
trigger1 = var(20)!=0 && var(21)!=0 && var(22)!=0 && var(23)!=0 && var(24)!=0 && var(25)!=0
trigger1 = helper(10000),var(41)<=0
var(20+(random%6))=0

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = helper(10000),var(4)=1
var(40)=1*(var(20)!=0 && var(21)!=0 && var(22)!=0 && var(23)!=0 && var(24)!=0 && var(25)!=0)



;------------map3

;room21 door
[State 0, VarSet]
type = VarSet
triggerall = helper(10000),var(0)=21
trigger1 = numhelper(22101) && helper(22101),var(10)=20101 && helper(22101),animelem=5
triggerall = var(10)<1
var(10)=1


;room25 tv
[State 0, Varadd]
type = Varadd
triggerall = helper(10000),var(0)=25
trigger1 = numhelper(22502) && helper(22502),var(50) && helper(22502),time=1 && helper(10000),var(40)
var(13)=1-5*(var(13)>=4)

;room25 tv
[State 0, Varadd]
type = Varadd
triggerall = helper(10000),var(0)=25
trigger1 = numhelper(22503) && helper(22503),var(50) && helper(22503),time=1 && helper(10000),var(40)
var(14)=1-5*(var(14)>=4)

;room25 tv
[State 0, Varadd]
type = Varadd
triggerall = helper(10000),var(0)=25
trigger1 = numhelper(22504) && helper(22504),var(50) && helper(22504),time=1 && helper(10000),var(40)
var(15)=1-5*(var(15)>=4)

;room26 tv
[State 0, Varset]
type = Varset
triggerall = helper(10000),var(0)=26
trigger1 = numhelper(22602) && helper(22602),var(50) && helper(22602),time=1 && helper(10000),var(40)
var(16)=1+(random%5)

;room26 tv
[State 0, Varset]
type = Varset
triggerall = helper(10000),var(0)=26
trigger1 = numhelper(22602) && helper(22602),var(50) && helper(22602),time=1 && helper(10000),var(40)
var(17)=1+(random%5)

;room26 tv
[State 0, Varset]
type = Varset
triggerall = helper(10000),var(0)=26
trigger1 = numhelper(22602) && helper(22602),var(50) && helper(22602),time=1 && helper(10000),var(40)
var(18)=1+(random%5)









;-------------life

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),fvar(7)=1
var(1)=0

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
var(1)=1-50*(var(1)>=75)

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 2
add=-100-floor(1*helper(10000),fvar(5))-((var(1)-25)*(var(1)=[26,50])+(75-var(1))*(var(1)=[51,75])),-100-floor(1*helper(10000),fvar(5))-((var(1)-25)*(var(1)=[26,50])+(75-var(1))*(var(1)=[51,75])),-100-floor(1*helper(10000),fvar(5))-((var(1)-25)*(var(1)=[26,50])+(75-var(1))*(var(1)=[51,75]))

[State 0, Explod]
type = explod
trigger1 = !numexplod(10430)
trigger1 = helper(10000),fvar(5)<100
anim = 10430
ID = 10430
pos = 0,0
postype =back
bindtime=-1
removetime=-1
scale=1,1
sprpriority = 1000
supermovetime=9999
pausemovetime=9999
ownpal=0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = numexplod(10430)
trigger1 = helper(10000),fvar(5)>=100
id = 10430












;----------

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, PosAdd]
type = PosAdd
trigger1 = numenemy<2
x = ifelse(facing=enemy(0),facing , ifelse(enemy(0),backedgedist<=95, enemy(0),backedgedist-1 ,95) , ifelse(enemy(0),frontedgedist<=95, enemy(0),frontedgedist-1 ,95))-backedgedist
y = p2dist y

[State 0, PosAdd]
type = PosAdd
trigger1 = numenemy>=2
x = ifelse(facing=enemy(0),facing , ifelse(enemy(0),backedgedist<=95, enemy(0),backedgedist-1 ,ifelse(enemy(1),backedgedist<=95, enemy(1),backedgedist-1 ,95)) , ifelse(enemy(0),frontedgedist<=95, enemy(0),frontedgedist-1 ,ifelse(enemy(1),frontedgedist<=95, enemy(1),frontedgedist-1 ,95)))-backedgedist
y = p2dist y

[State 0, ScreenBound]
type = ScreenBound
trigger1 =1 
value = 0
movecamera = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010

;--------------------------------------------------------------------
;scrholder
[Statedef 10031]
physics=N
velset=0,0
anim=10030


;-----

[State 0, VarSet]
type = VarSet
trigger1 = var(10)=0
trigger1 = (helper(10030),var(13)=helper(10030),var(16)-1)&&(helper(10030),var(14)=helper(10030),var(17)-1)&&(helper(10030),var(15)=helper(10030),var(18)-1)
var(10)=2451

[State 0, VarSet]
type = VarSet
trigger1 = var(10)!=0
trigger1 = !((helper(10030),var(13)=helper(10030),var(16)-1)&&(helper(10030),var(14)=helper(10030),var(17)-1)&&(helper(10030),var(15)=helper(10030),var(18)-1))
var(10)=0

[State 0, Var]
type = Varadd
trigger1 = var(10)>0
var(10)=-1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10)=2450||var(10)=2300||var(10)=1600||var(10)=1200||var(10)=800||var(10)=400
value = S4,5*(var(10)=2450)+6*(var(10)=2300)+9*(var(10)=1600)+8*(var(10)=1200)+7*(var(10)=800)+10*(var(10)=400)
channel=10

[State 0, StopSnd]
type = StopSnd
trigger1 = helper(10000),var(40)=0
channel = 10

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = var(10)=1
var(41)=0

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = helper(10000),var(42)>0 && helper(10000),var(42)!=3000
var(42)=-1

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = helper(10000),var(42)=3000 && helper(10000),var(16)=550
var(42)=2000

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = helper(10000),var(40)=0
trigger2 = helper(10000),var(42)<=3200 && helper(10000),var(0)=0
var(42)=0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = helper(10000),var(42)=5500
value = S4,0
channel = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = helper(10000),var(42)=5500-150
value = S4,11

[State 0, PlaySnd]
type = PlaySnd
trigger1 = helper(10000),var(42)=3001||helper(10000),var(42)=3100||helper(10000),var(42)=3200
value = S1,16


;------

[State 0, Turn]
type = Turn
trigger1 = facing=1

[State 0, PosAdd]
type = PosAdd
trigger1 = numenemy<2
x = ifelse(facing=enemy(0),facing , ifelse(enemy(0),backedgedist<=95, enemy(0),backedgedist-1 ,95) , ifelse(enemy(0),frontedgedist<=95, enemy(0),frontedgedist-1 ,95))-backedgedist
y = p2dist y

[State 0, PosAdd]
type = PosAdd
trigger1 = numenemy>=2
x = ifelse(facing=enemy(0),facing , ifelse(enemy(0),backedgedist<=95, enemy(0),backedgedist-1 ,ifelse(enemy(1),backedgedist<=95, enemy(1),backedgedist-1 ,95)) , ifelse(enemy(0),frontedgedist<=95, enemy(0),frontedgedist-1 ,ifelse(enemy(1),frontedgedist<=95, enemy(1),frontedgedist-1 ,95)))-backedgedist
y = p2dist y

[State 0, ScreenBound]
type = ScreenBound
trigger1 =1 
value = 0
movecamera = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010

;--------------------------------------------------------------------------------
;doors
[Statedef 10040]
physics=N
movetype = I
SprPriority=-70




;block anim
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[1,2]
var(10)=(10020*(ishelper(10040)||ishelper(10042)))*(helper(10000),var(0)=1)+(10023*(ishelper(10040))+10021*(ishelper(10041))+10024*(ishelper(10042)))*(helper(10000),var(0)=2)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[3,4]
var(10)=(10026*(ishelper(10040))+10021*(ishelper(10041))+10021*(ishelper(10043))+10025*(ishelper(10044)))*(helper(10000),var(0)=3)+(10020*(ishelper(10040))+10021*(ishelper(10041))+10020*(ishelper(10042)))*(helper(10000),var(0)=4)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[5,7]
var(10)=(10020*(ishelper(10040))+10020*(ishelper(10042)))*(helper(10000),var(0)=5)+(10026*(ishelper(10040))+10021*(ishelper(10041)))*(helper(10000),var(0)=6)+(20122*(ishelper(10040)))*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,10]
var(10)=(10029*(ishelper(10040))+10025*(ishelper(10041)))*(helper(10000),var(0)=9)+(10026*(ishelper(10040))+10029*(ishelper(10041))+10029*(ishelper(10042)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[11,12]
var(10)=(10026*(ishelper(10040))+10020*(ishelper(10042)))*(helper(10000),var(0)=11)+(10020*(ishelper(10040))+10020*(ishelper(10041)))*(helper(10000),var(0)=12)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[13,14]
var(10)=(10026*(ishelper(10040))+10025*(ishelper(10042)))*(helper(10000),var(0)=13)+(10021*(ishelper(10040))+10029*(ishelper(10041))+10025*(ishelper(10042)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[15,16]
var(10)=(10026*(ishelper(10040))+10021*(ishelper(10041))+10025*(ishelper(10042)))*(helper(10000),var(0)=15)+10025*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[17,18]
var(10)=(10026*(ishelper(10040))+10025*(ishelper(10042)))*(helper(10000),var(0)=17)+(20120*(ishelper(10040)))*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,21]
var(10)=(10020*(ishelper(10040))+20120*(ishelper(10041))+10025*(ishelper(10042)))*(helper(10000),var(0)=20)+(10020*(ishelper(10040))+10025*(ishelper(10042)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[22,23]
var(10)=(10026*(ishelper(10040))+10020*(ishelper(10041)))*(helper(10000),var(0)=22)+(10020*(ishelper(10040))+10024*(ishelper(10042)))*(helper(10000),var(0)=23)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[24,25]
var(10)=(10021*(ishelper(10040))+10025*(ishelper(10041)))*(helper(10000),var(0)=24)+(10026*(ishelper(10040))+10020*(ishelper(10041))+10021*(ishelper(10042)))*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[26,27]
var(10)=(20121*(ishelper(10040))+10025*(ishelper(10042)))*(helper(10000),var(0)=26)+20120*(helper(10000),var(0)=27)




;door anim
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[1,2]
var(11)=(20120*(ishelper(10040)||ishelper(10042))+20124*(ishelper(10041)))*(helper(10000),var(0)=1)+(20121*(ishelper(10040))+20120*(ishelper(10041))+20122*(ishelper(10042)))*(helper(10000),var(0)=2)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[3,4]
var(11)=(20121*(ishelper(10040))+20123*(ishelper(10041))+20124*(ishelper(10042))+20123*(ishelper(10043))+20122*(ishelper(10044)))*(helper(10000),var(0)=3)+(20120*(ishelper(10040))+20123*(ishelper(10041))+20120*(ishelper(10042)))*(helper(10000),var(0)=4)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[5,7]
var(11)=(20120*(ishelper(10040))+20124*(ishelper(10041))+20120*(ishelper(10042)))*(helper(10000),var(0)=5)+(20121*(ishelper(10040))+20123*(ishelper(10041)))*(helper(10000),var(0)=6)+(20122*(ishelper(10040)))*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,10]
var(11)=(20120*(ishelper(10040))+20122*(ishelper(10041)))*(helper(10000),var(0)=9)+(20121*(ishelper(10040))+20120*(ishelper(10041))+20120*(ishelper(10042)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[11,12]
var(11)=(20121*(ishelper(10040))+20124*(ishelper(10041))+20123*(ishelper(10042)))*(helper(10000),var(0)=11)+(20120*(ishelper(10040))+20123*(ishelper(10041)))*(helper(10000),var(0)=12)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[13,14]
var(11)=(20121*(ishelper(10040))+20124*(ishelper(10041))+20122*(ishelper(10042)))*(helper(10000),var(0)=13)+(20123*(ishelper(10040))+20120*(ishelper(10041))+20122*(ishelper(10042)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[15,16]
var(11)=(20121*(ishelper(10040))+20123*(ishelper(10041))+20122*(ishelper(10042)))*(helper(10000),var(0)=15)+20122*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[17,18]
var(11)=(20121*(ishelper(10040))+20124*(ishelper(10041))+20122*(ishelper(10042)))*(helper(10000),var(0)=17)+(20120*(ishelper(10040)))*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,21]
var(11)=(20123*(ishelper(10040))+20120*(ishelper(10041))+20122*(ishelper(10042)))*(helper(10000),var(0)=20)+(20120*(ishelper(10040))+20124*(ishelper(10041))+20122*(ishelper(10042)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[22,23]
var(11)=(20121*(ishelper(10040))+20120*(ishelper(10041)))*(helper(10000),var(0)=22)+(20123*(ishelper(10040))+20124*(ishelper(10041))+20122*(ishelper(10042)))*(helper(10000),var(0)=23)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[24,25]
var(11)=(20123*(ishelper(10040))+20122*(ishelper(10041)))*(helper(10000),var(0)=24)+(20121*(ishelper(10040))+20120*(ishelper(10041))+20123*(ishelper(10042)))*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[26,27]
var(11)=(20121*(ishelper(10040))+20124*(ishelper(10041))+20122*(ishelper(10042)))*(helper(10000),var(0)=26)+20120*(helper(10000),var(0)=27)


;pos
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[1,2]
fvar(0)=(620*(ishelper(10040))+3591*(ishelper(10041))+5840*(ishelper(10042)))*(helper(10000),var(0)=1)+(266*(ishelper(10040))+1853*(ishelper(10041))+3350*(ishelper(10042)))*(helper(10000),var(0)=2)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[3,4]
fvar(0)=(300*(ishelper(10040))+1490*(ishelper(10041))+4158*(ishelper(10042))+4604*(ishelper(10043))+5486*(ishelper(10044)))*(helper(10000),var(0)=3)+(504*(ishelper(10040))+1436*(ishelper(10041))+2508*(ishelper(10042)))*(helper(10000),var(0)=4)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[5,7]
fvar(0)=(392*(ishelper(10040))+1477*(ishelper(10041))+2005*(ishelper(10042)))*(helper(10000),var(0)=5)+(333*(ishelper(10040))+1150*(ishelper(10041)))*(helper(10000),var(0)=6)+(1370*(ishelper(10040)))*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,10]
fvar(0)=(1825*(ishelper(10040))+2433*(ishelper(10041)))*(helper(10000),var(0)=9)+(250*(ishelper(10040))+910*(ishelper(10041))+3730*(ishelper(10042)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[11,12]
fvar(0)=(250*(ishelper(10040))+1465*(ishelper(10041))+2012*(ishelper(10042)))*(helper(10000),var(0)=11)+(528*(ishelper(10040))+2521*(ishelper(10041)))*(helper(10000),var(0)=12)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[13,14]
fvar(0)=(270*(ishelper(10040))+1971*(ishelper(10041))+3430*(ishelper(10042)))*(helper(10000),var(0)=13)+(430*(ishelper(10040))+2056*(ishelper(10041))+3290*(ishelper(10042)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[15,16]
fvar(0)=(290*(ishelper(10040))+1555*(ishelper(10041))+1810*(ishelper(10042)))*(helper(10000),var(0)=15)+1450*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[17,18]
fvar(0)=(245*(ishelper(10040))+1156*(ishelper(10041))+2200*(ishelper(10042)))*(helper(10000),var(0)=17)+(960*(ishelper(10040)))*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,21]
fvar(0)=(702*(ishelper(10040))+2143*(ishelper(10041))+2850*(ishelper(10042)))*(helper(10000),var(0)=20)+(340*(ishelper(10040))+741*(ishelper(10041))+2595*(ishelper(10042)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[22,23]
fvar(0)=(377*(ishelper(10040))+1552*(ishelper(10041)))*(helper(10000),var(0)=22)+(266*(ishelper(10040))+1275*(ishelper(10041))+1860*(ishelper(10042)))*(helper(10000),var(0)=23)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[24,25]
fvar(0)=(980*(ishelper(10040))+2100*(ishelper(10041)))*(helper(10000),var(0)=24)+(237*(ishelper(10040))+903*(ishelper(10041))+3474*(ishelper(10042)))*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[26,27]
fvar(0)=(265*(ishelper(10040))+1898*(ishelper(10041))+2832*(ishelper(10042)))*(helper(10000),var(0)=26)+1270*(helper(10000),var(0)=27)


;cost
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[1,2]
var(12)=(1500*(ishelper(10040))+1500*(ishelper(10042)))*(helper(10000),var(0)=1)+(2000*(ishelper(10040))+1500*(ishelper(10041))+2000*(ishelper(10042)))*(helper(10000),var(0)=2)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[3,4]
var(12)=(2000*(ishelper(10040))+2000*(ishelper(10041))+2000*(ishelper(10043))+2500*(ishelper(10044)))*(helper(10000),var(0)=3)+(3000*(ishelper(10040))+2500*(ishelper(10041))+3000*(ishelper(10042)))*(helper(10000),var(0)=4)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[5,7]
var(12)=(3000*(ishelper(10040))+3000*(ishelper(10042)))*(helper(10000),var(0)=5)+(1500*(ishelper(10040))+2000*(ishelper(10041)))*(helper(10000),var(0)=6)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,10]
var(12)=(1000*(ishelper(10040))+1000*(ishelper(10041)))*(helper(10000),var(0)=9)+(1000*(ishelper(10040))+1500*(ishelper(10041))+2000*(ishelper(10042)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[11,12]
var(12)=(1000*(ishelper(10040))+1500*(ishelper(10042)))*(helper(10000),var(0)=11)+(2000*(ishelper(10040))+1500*(ishelper(10041)))*(helper(10000),var(0)=12)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[13,14]
var(12)=(2000*(ishelper(10040))+2500*(ishelper(10042)))*(helper(10000),var(0)=13)+(2500*(ishelper(10040))+2500*(ishelper(10041))+2000*(ishelper(10042)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[15,16]
var(12)=(2000*(ishelper(10040))+2000*(ishelper(10041))+1500*(ishelper(10042)))*(helper(10000),var(0)=15)+2000*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[17,18]
var(12)=(2500*(ishelper(10040))+2000*(ishelper(10042)))*(helper(10000),var(0)=17)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,21]
var(12)=(1000*(ishelper(10040))+1000*(ishelper(10042)))*(helper(10000),var(0)=20)+(1000*(ishelper(10040))+2000*(ishelper(10042)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[22,23]
var(12)=(2000*(ishelper(10040))+2500*(ishelper(10041)))*(helper(10000),var(0)=22)+(1000*(ishelper(10040))+1500*(ishelper(10042)))*(helper(10000),var(0)=23)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[24,25]
var(12)=(1500*(ishelper(10040))+2000*(ishelper(10041)))*(helper(10000),var(0)=24)+(2500*(ishelper(10040))+3000*(ishelper(10041))+2000*(ishelper(10042)))*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[26,27]
var(12)=(3000*(ishelper(10042)))*(helper(10000),var(0)=26)


;flag
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[1,2]
var(13)=(10*(ishelper(10040))+11*(ishelper(10042)))*(helper(10000),var(0)=1)+(12*(ishelper(10040))+10*(ishelper(10041))+13*(ishelper(10042)))*(helper(10000),var(0)=2)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[3,4]
var(13)=(14*(ishelper(10040))+12*(ishelper(10041))+13*(ishelper(10043))+15*(ishelper(10044)))*(helper(10000),var(0)=3)+(16*(ishelper(10040))+15*(ishelper(10041))+17*(ishelper(10042)))*(helper(10000),var(0)=4)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[5,7]
var(13)=(17*(ishelper(10040))+16*(ishelper(10042)))*(helper(10000),var(0)=5)+(11*(ishelper(10040))+14*(ishelper(10041)))*(helper(10000),var(0)=6)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,10]
var(13)=(10*(ishelper(10040))+11*(ishelper(10041)))*(helper(10000),var(0)=9)+(11*(ishelper(10040))+12*(ishelper(10041))+13*(ishelper(10042)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[11,12]
var(13)=(10*(ishelper(10040))+14*(ishelper(10042)))*(helper(10000),var(0)=11)+(15*(ishelper(10040))+14*(ishelper(10041)))*(helper(10000),var(0)=12)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[13,14]
var(13)=(13*(ishelper(10040))+16*(ishelper(10042)))*(helper(10000),var(0)=13)+(16*(ishelper(10040))+17*(ishelper(10041))+15*(ishelper(10042)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[15,16]
var(13)=(19*(ishelper(10040))+18*(ishelper(10041))+12*(ishelper(10042)))*(helper(10000),var(0)=15)+18*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[17,18]
var(13)=(17*(ishelper(10040))+19*(ishelper(10042)))*(helper(10000),var(0)=17)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,21]
var(13)=(10*(ishelper(10040))+11*(ishelper(10042)))*(helper(10000),var(0)=20)+(11*(ishelper(10040))+12*(ishelper(10042)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[22,23]
var(13)=(12*(ishelper(10040))+13*(ishelper(10041)))*(helper(10000),var(0)=22)+(10*(ishelper(10040))+14*(ishelper(10042)))*(helper(10000),var(0)=23)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[24,25]
var(13)=(14*(ishelper(10040))+15*(ishelper(10041)))*(helper(10000),var(0)=24)+(13*(ishelper(10040))+16*(ishelper(10041))+15*(ishelper(10042)))*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[26,27]
var(13)=(16*(ishelper(10042)))*(helper(10000),var(0)=26)


;door type
[State 0, VarSet]
type = VarSet
trigger1 = !time && (helper(10000),var(0)=[1,2])
var(51)=(22*(ishelper(10040))+23*(ishelper(10041))+2*(ishelper(10042)))*(helper(10000),var(0)=1)+(4*(ishelper(10040))+22*(ishelper(10041))+4*(ishelper(10042)))*(helper(10000),var(0)=2)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[3,4]
var(51)=(22*(ishelper(10040))+5*(ishelper(10041))+23*(ishelper(10042))+5*(ishelper(10043))+22*(ishelper(10044)))*(helper(10000),var(0)=3)+(19*(ishelper(10040))+22*(ishelper(10041))+19*(ishelper(10042)))*(helper(10000),var(0)=4)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[5,7]
var(51)=(19*(ishelper(10040))+23*(ishelper(10041))+19*(ishelper(10042)))*(helper(10000),var(0)=5)+(2*(ishelper(10040))+22*(ishelper(10041)))*(helper(10000),var(0)=6)+(12*(ishelper(10040)))*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,10]
var(51)=(19*(ishelper(10040))+19*(ishelper(10041)))*(helper(10000),var(0)=9)+(19*(ishelper(10040))+1*(ishelper(10041))+3*(ishelper(10042)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[11,12]
var(51)=(19*(ishelper(10040))+23*(ishelper(10041))+5*(ishelper(10042)))*(helper(10000),var(0)=11)+(3*(ishelper(10040))+4*(ishelper(10041)))*(helper(10000),var(0)=12)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[13,14]
var(51)=(3*(ishelper(10040))+23*(ishelper(10041))+5*(ishelper(10042)))*(helper(10000),var(0)=13)+(4*(ishelper(10040))+19*(ishelper(10041))+3*(ishelper(10042)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[15,16]
var(51)=(5*(ishelper(10040))+5*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=15)+4*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[17,18]
var(51)=(19*(ishelper(10040))+23*(ishelper(10041))+4*(ishelper(10042)))*(helper(10000),var(0)=17)+(24*(ishelper(10040)))*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,21]
var(51)=(5*(ishelper(10040))+9*(ishelper(10041))+0*(ishelper(10042)))*(helper(10000),var(0)=20)+(0*(ishelper(10040))+23*(ishelper(10041))+3*(ishelper(10042)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[22,23]
var(51)=(3*(ishelper(10040))+2*(ishelper(10041)))*(helper(10000),var(0)=22)+(4*(ishelper(10040))+23*(ishelper(10041))+4*(ishelper(10042)))*(helper(10000),var(0)=23)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[24,25]
var(51)=(5*(ishelper(10040))+10*(ishelper(10041)))*(helper(10000),var(0)=24)+(2*(ishelper(10040))+9*(ishelper(10041))+10*(ishelper(10042)))*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[26,27]
var(51)=(9*(ishelper(10040))+23*(ishelper(10041))+9*(ishelper(10042)))*(helper(10000),var(0)=26)+25*(helper(10000),var(0)=27)



;next room facing
[State 0, VarSet]
type = VarSet
trigger1 = !time && (helper(10000),var(0)=[1,2])
var(52)=(1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=1)+(-1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=2)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[3,4]
var(52)=(-1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042))-1*(ishelper(10043))+1*(ishelper(10044)))*(helper(10000),var(0)=3)+(-1*(ishelper(10040))-1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=4)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[5,7]
var(52)=(-1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=5)+(-1*(ishelper(10040))+1*(ishelper(10041)))*(helper(10000),var(0)=6)+(1*(ishelper(10040)))*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,10]
var(52)=(1*(ishelper(10040))+1*(ishelper(10041)))*(helper(10000),var(0)=9)+(-1*(ishelper(10040))-1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[11,12]
var(52)=(1*(ishelper(10040))+1*(ishelper(10041))-1*(ishelper(10042)))*(helper(10000),var(0)=11)+(-1*(ishelper(10040))-1*(ishelper(10041)))*(helper(10000),var(0)=12)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[13,14]
var(52)=(-1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=13)+(-1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[15,16]
var(52)=(-1*(ishelper(10040))-1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=15)+1*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[17,18]
var(52)=(-1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=17)+(1*(ishelper(10040)))*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,21]
var(52)=(1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=20)+(-1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[22,23]
var(52)=(-1*(ishelper(10040))+1*(ishelper(10041)))*(helper(10000),var(0)=22)+(1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=23)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[24,25]
var(52)=(-1*(ishelper(10040))-1*(ishelper(10041)))*(helper(10000),var(0)=24)+(-1*(ishelper(10040))-1*(ishelper(10041))-1*(ishelper(10042)))*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[26,27]
var(52)=(-1*(ishelper(10040))+1*(ishelper(10041))+1*(ishelper(10042)))*(helper(10000),var(0)=26)+1*(helper(10000),var(0)=27)


;next room pos
[State 0, VarSet]
type = VarSet
trigger1 = !time && (helper(10000),var(0)=[1,2])
var(53)=(1710*(ishelper(10040))+1330*(ishelper(10041))+230*(ishelper(10042)))*(helper(10000),var(0)=1)+(1350*(ishelper(10040))+475*(ishelper(10041))+4460*(ishelper(10042)))*(helper(10000),var(0)=2)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[3,4]
var(53)=(1000*(ishelper(10040))+170*(ishelper(10041))+3455*(ishelper(10042))+3157*(ishelper(10043))+1300*(ishelper(10044)))*(helper(10000),var(0)=3)+(1850*(ishelper(10040))+5300*(ishelper(10041))+245*(ishelper(10042)))*(helper(10000),var(0)=4)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[5,7]
var(53)=(2360*(ishelper(10040))+4020*(ishelper(10041))+360*(ishelper(10042)))*(helper(10000),var(0)=5)+(5695*(ishelper(10040))+195*(ishelper(10041)))*(helper(10000),var(0)=6)+(3195*(ishelper(10040)))*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,10]
var(53)=(142*(ishelper(10040))+142*(ishelper(10041)))*(helper(10000),var(0)=9)+(2253*(ishelper(10040))+1625*(ishelper(10041))+162*(ishelper(10042)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[11,12]
var(53)=(1675*(ishelper(10040))+1017*(ishelper(10041))+2380*(ishelper(10042)))*(helper(10000),var(0)=11)+(3112*(ishelper(10040))+1870*(ishelper(10041)))*(helper(10000),var(0)=12)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[13,14]
var(53)=(3580*(ishelper(10040))+1327*(ishelper(10041))+300*(ishelper(10042)))*(helper(10000),var(0)=13)+(3245*(ishelper(10040))+137*(ishelper(10041))+390*(ishelper(10042)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[15,16]
var(53)=(2015*(ishelper(10040))+1260*(ishelper(10041))+770*(ishelper(10042)))*(helper(10000),var(0)=15)+1410*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[17,18]
var(53)=(1907*(ishelper(10040))+1820*(ishelper(10041))+184*(ishelper(10042)))*(helper(10000),var(0)=17)+(2000*(ishelper(10040)))*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,21]
var(53)=(110*(ishelper(10040))+162*(ishelper(10041))+200*(ishelper(10042)))*(helper(10000),var(0)=20)+(2664*(ishelper(10040))+1127*(ishelper(10041))+269*(ishelper(10042)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[22,23]
var(53)=(2410*(ishelper(10040))+132*(ishelper(10041)))*(helper(10000),var(0)=22)+(550*(ishelper(10040))+1755*(ishelper(10041))+870*(ishelper(10042)))*(helper(10000),var(0)=23)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[24,25]
var(53)=(1665*(ishelper(10040))+3335*(ishelper(10041)))*(helper(10000),var(0)=24)+(1396*(ishelper(10040))+2647*(ishelper(10041))+1915*(ishelper(10042)))*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[26,27]
var(53)=(1990*(ishelper(10040))+590*(ishelper(10041))+760*(ishelper(10042)))*(helper(10000),var(0)=26)+1390*(helper(10000),var(0)=27)


;next room id
[State 0, VarSet]
type = VarSet
trigger1 = !time && (helper(10000),var(0)=[1,2])
var(54)=(2*(ishelper(10040))+5*(ishelper(10041))+6*(ishelper(10042)))*(helper(10000),var(0)=1)+(3*(ishelper(10040))+1*(ishelper(10041))+3*(ishelper(10042)))*(helper(10000),var(0)=2)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[3,4]
var(54)=(6*(ishelper(10040))+2*(ishelper(10041))+1*(ishelper(10042))+2*(ishelper(10043))+4*(ishelper(10044)))*(helper(10000),var(0)=3)+(5*(ishelper(10040))+3*(ishelper(10041))+5*(ishelper(10042)))*(helper(10000),var(0)=4)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[5,7]
var(54)=(4*(ishelper(10040))+3*(ishelper(10041))+4*(ishelper(10042)))*(helper(10000),var(0)=5)+(1*(ishelper(10040))+3*(ishelper(10041)))*(helper(10000),var(0)=6)+(3*(ishelper(10040)))*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,10]
var(54)=(11*(ishelper(10040))+10*(ishelper(10041)))*(helper(10000),var(0)=9)+(9*(ishelper(10040))+15*(ishelper(10041))+13*(ishelper(10042)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[11,12]
var(54)=(9*(ishelper(10040))+17*(ishelper(10041))+12*(ishelper(10042)))*(helper(10000),var(0)=11)+(14*(ishelper(10040))+11*(ishelper(10041)))*(helper(10000),var(0)=12)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[13,14]
var(54)=(10*(ishelper(10040))+11*(ishelper(10041))+14*(ishelper(10042)))*(helper(10000),var(0)=13)+(13*(ishelper(10040))+17*(ishelper(10041))+12*(ishelper(10042)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[15,16]
var(54)=(17*(ishelper(10040))+16*(ishelper(10041))+10*(ishelper(10042)))*(helper(10000),var(0)=15)+15*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[17,18]
var(54)=(14*(ishelper(10040))+13*(ishelper(10041))+15*(ishelper(10042)))*(helper(10000),var(0)=17)+(13*(ishelper(10040)))*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,21]
var(54)=(23*(ishelper(10040))+26*(ishelper(10041))+21*(ishelper(10042)))*(helper(10000),var(0)=20)+(20*(ishelper(10040))+23*(ishelper(10041))+22*(ishelper(10042)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[22,23]
var(54)=(21*(ishelper(10040))+25*(ishelper(10041)))*(helper(10000),var(0)=22)+(20*(ishelper(10040))+26*(ishelper(10041))+24*(ishelper(10042)))*(helper(10000),var(0)=23)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[24,25]
var(54)=(23*(ishelper(10040))+25*(ishelper(10041)))*(helper(10000),var(0)=24)+(22*(ishelper(10040))+26*(ishelper(10041))+24*(ishelper(10042)))*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[26,27]
var(54)=(20*(ishelper(10040))+21*(ishelper(10041))+25*(ishelper(10042)))*(helper(10000),var(0)=26)+20*(helper(10000),var(0)=27)


;-----pos y

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=3
fvar(1)=(5*(ishelper(10040))-24*(ishelper(10042))+5*(ishelper(10044)))*(helper(10000),var(0)=3)

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=5||helper(10000),var(0)=11||helper(10000),var(0)=13||helper(10000),var(0)=15
fvar(1)=(-9*(ishelper(10041)))*(helper(10000),var(0)=5)+(-4*(ishelper(10041)))*(helper(10000),var(0)=11)+(3*(ishelper(10041)))*(helper(10000),var(0)=13)+(7*(ishelper(10041)))*(helper(10000),var(0)=15)

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=17||helper(10000),var(0)=21||helper(10000),var(0)=23||helper(10000),var(0)=26
fvar(1)=(-5*(ishelper(10041)))*(helper(10000),var(0)=17)+(-8*(ishelper(10041)))*(helper(10000),var(0)=21)+(19*(ishelper(10040))+6*(ishelper(10041)))*(helper(10000),var(0)=23)+(5*(ishelper(10041)))*(helper(10000),var(0)=26)

;------------------blocked doors

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -70+160*((var(10)=[10023,10024])||(var(10)=10020&&helper(10000),var(0)=23&&ishelper(10040)))

[State 0, pVarSet]
type = parentVarSet
triggerall = var(51)!=23
trigger1 = var(10)!=var(11)
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && helper(10000),var(2)<var(12)
var(10)=var(12)

[State 0, VarSet]
type = VarSet
triggerall = var(51)!=23
trigger1 = var(10)!=var(11)
trigger1 = var(50) && time=1 && helper(10000),var(2)>=var(12)
var(15)=1

[State 0, NotHitBy]
type = NotHitBy
triggerall = var(51)!=23
trigger1 = var(10)!=var(11)  && var(15)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, PalFX]
type = PalFX
triggerall = var(51)!=23
trigger1 = var(10)!=var(11)
trigger1 = var(15)
time = 1
add = 3*time,3*time,3*time

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(51)!=23
trigger1 = var(10)!=var(11)
trigger1 = var(15) && time=1
value = S1,9

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(51)!=23
trigger1 = var(10)!=var(11)
trigger1 = var(15) && time=1
value = S1,17

[State 0, Explod]
type = explod 
triggerall = var(51)!=23
trigger1 = var(10)!=var(11) 
trigger1 = var(15) && time=10
anim = 10022
ID = 10022
pos = 0,-8
postype = p1
bindtime=-1
scale=1.3,1.7
sprpriority = -60
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = var(51)!=23
trigger1 = var(10)!=var(11)
trigger1 = var(15) && time=1
var(3)=-var(12)

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = var(51)!=23
trigger1 = var(10)!=var(11)
trigger1 = var(15) && time>=70
fvar(var(13))=1

[State 0, VarSet]
type = VarSet
triggerall = var(51)!=23
trigger1 = var(10)!=var(11)
trigger1 = helper(10000),fvar(var(13))
var(10)=var(11)

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = var(51)!=23
trigger1 = var(10)=var(11) 
trigger1 = var(50) && time=1 && helper(10000),var(42)>3200
var(11)=4

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = var(51)!=23
trigger1 = var(10)=var(11) 
trigger1 = var(50) && time=1 && helper(10000),var(42)<=3200 &&  (helper(10000),var(40)=0 && ((ishelper(10041) && helper(10000),var(0)=20)||(ishelper(10040) && helper(10000),var(0)=26)))
var(11)=3

[State 0, ChangeState]
type = ChangeState
triggerall = var(51)!=23
trigger1 = var(10)=var(11) 
trigger1 = var(50) && time=10 && helper(10000),var(42)<=3200 && !(helper(10000),var(40)=0 && ((ishelper(10041) && helper(10000),var(0)=20)||(ishelper(10040) && helper(10000),var(0)=26)))
value =10041

;----------teleport

[State 0, Explod]
type = explod 
triggerall = var(51)=23
trigger1 = helper(10000),var(40)
trigger1 = !numexplod(10027)
anim = 10027
ID = 10027
pos = 0,-40
postype = p1
bindtime=-1
scale=1,1
sprpriority = -60
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = var(51)=23
trigger1 = helper(10000),var(40)=0
trigger1 = numexplod(10027)
id = 10027

[State 0, VarSet]
type = VarSet
triggerall = var(51)=23
trigger1 = helper(10000),var(40)
var(10)=var(11)*(helper(10071),var(15)||helper(10031),var(10))

[State 0, Explod]
type = explod 
triggerall = var(51)=23
trigger1 = helper(10000),var(40) && var(10)=var(11)
trigger1 = (p2dist x=[-20,20]) && (p2dist y>=-50)
anim = 10028
ID = 10028
pos = 0,-40
postype = p1
bindtime=-1
scale=1,1
sprpriority = 310
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, ChangeState]
type = ChangeState
triggerall = var(51)=23
trigger1 = helper(10000),var(40) && var(10)=var(11)
trigger1 = (p2dist x=[-20,20]) && (p2dist y>=-50)
value =10041

;------------------system

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10040
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------
;inter door
[Statedef 10041]
physics=N
velset=0,0
anim=10040
movetype=A

[State 0, Turn]
type = Turn
trigger1 = facing=-1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = 140-backedgedist
ignorehitpause = 1


[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = !time
var(0)=0

[State 0, HitDef]
type = HitDef
trigger1 = time<=143
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = -1
numhits=0

[State 0, TargetState]
type = TargetState
trigger1 =time<=143
value =ifelse(var(52)=1,10045,10046)

[State 0, Explod]
type = explod
trigger1 = !time
anim = 10041
ID = 10041
pos = 0,0
postype = back
bindtime = -1
scale=3,3
sprpriority = 300
ownpal=1

[State 0, Explod]
type = explod
trigger1 = !time
anim = 10300+var(51)-2*(var(51)=25)
ID = 10300
pos = 0,0
postype = back
bindtime = -1
scale=1-0.1*(var(51)=23||var(51)=25),1+0.1*(var(51)=23||var(51)=25)
sprpriority = 301
ownpal=1




[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = var(51)=24
ID =10300
scale = 0.25,0.25

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(51)=24
id = 20911

[State 0, Explod]
type = explod
trigger1 = var(51)=24 && time>=22
anim = 20911
ID = 20911
pos=-1*(time-22),-0.75*(time-22)
postype = back
bindtime = -1
scale=0.25+0.002*(time-22),0.25+0.002*(time-22)
sprpriority = 302
ownpal=1

[State 0, Explod]
type = explod
trigger1 = var(51)=24 && time=128
anim = 20912
ID = 20912
pos=0,0
postype = back
bindtime = -1
scale=3,3
sprpriority = 303
ownpal=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(51)=24 && time=1
value = S0,92
channel=8


[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(51)=25 && time=1
value = S0,91*(var(51)=25)
channel=8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(51)=25 && time=100
value = S0,90*(var(51)=25)
channel=9







[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(51)=0 && time=25
trigger2 = (var(51)=1||var(51)=2||var(51)=13) && time=20
trigger3 = var(51)=3 && time=30
trigger4 = var(51)=4 && (time=46||time=67||time=87||time=107||time=126)
trigger5 = var(51)=6 && time=25
trigger6 = var(51)=7 && time=25
trigger7 = (var(51)=8||var(51)=12) && time=25
trigger8 = (var(51)=9||var(51)=10) && time=25
trigger9 = var(51)=11 && time=15
trigger10 = var(51)=20 && (time=46||time=76||time=106||time=136)
trigger11 = var(51)=22 && time=35
trigger12 = var(51)=23 && time=1
value = S0,21*(var(51)=0)+24*(var(51)=1||var(51)=2||var(51)=13)+75*(var(51)=3)+77*(var(51)=4)+78*(var(51)=6)+80*(var(51)=7)+82*(var(51)=8||var(51)=12)+84*(var(51)=9||var(51)=10)+86*(var(51)=11||var(51)=22)+88*(var(51)=20)+91*(var(51)=23)
channel=8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(51)=0 && time=120
trigger2 = (var(51)=1||var(51)=2||var(51)=13) && time=135
trigger3 = var(51)=3 && time=135
trigger4 = var(51)=5 && (time=46||time=67||time=87||time=107||time=126)
trigger5 = var(51)=6 && time=125
trigger6 = var(51)=7 && time=130
trigger7 = (var(51)=8||var(51)=12) && time=125
trigger8 = (var(51)=9||var(51)=10) && time=130
trigger9 = var(51)=19 && (time=35||time=130)
trigger10 = var(51)=21 && (time=46||time=76||time=106||time=136)
trigger11 = var(51)=18 && time=30
trigger12 = var(51)=23 && time=100 && !helper(10000),var(42)
value = S0,23*(var(51)=0)+25*(var(51)=1||var(51)=2||var(51)=13)+76*(var(51)=3)+77*(var(51)=5)+79*(var(51)=6)+81*(var(51)=7)+83*(var(51)=8||var(51)=12)+85*(var(51)=9||var(51)=10)+87*(var(51)=19)+88*(var(51)=21)+89*(var(51)=18)+90*(var(51)=23)
channel=9






[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time>=150
var(0)=var(54)

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time>=150
fvar(0)=var(53)

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time>=150
trigger2 = helper(10000),stateno!=10010

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>=150
trigger2 = helper(10000),stateno!=10010


;----secret room

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = var(51)=23
trigger1 = !time && helper(10031),var(10)
var(42)=5501

;next room pos
[State 0, VarSet]
type = VarSet
triggerall = var(51)=23
trigger1 = !time && helper(10000),var(42)
var(53)=550*(helper(10000),var(4)=0)+400*(helper(10000),var(4)=1)+500*(helper(10000),var(4)=2)

;next room id
[State 0, VarSet]
type = VarSet
triggerall = var(51)=23
trigger1 = !time && helper(10000),var(42)
var(54)=7*(helper(10000),var(4)=0)+18*(helper(10000),var(4)=1)+27*(helper(10000),var(4)=2)

;--------------------------------------------------------------------------------
;custum facing=1
[statedef 10045]
type = S
movetype = H
physics = N
SprPriority=0
velset=0,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = -1*(facing=-1)

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = 140-backedgedist
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time>=4
x = 0

[State 0, SelfState]
type = SelfState
trigger1 =time>=4
value =0
ctrl =1

;--------------------------------------------------------------------------------
;custum facing=-1
[statedef 10046]
type = S
movetype = H
physics = N
SprPriority=0
velset=0,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = -1*(facing=1)

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = 140-backedgedist
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time>=4
x = 0

[State 0, SelfState]
type = SelfState
trigger1 =time>=4
value =0
ctrl =1


;--------------------------------------------------------------------------------
;windows
[Statedef 10050]
physics=N
movetype = I
SprPriority=-110



;anim
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=1
var(10)=ifelse(var(11)<=4,var(11),4) + 20105*(ishelper(10050))+20110*(ishelper(10051)||ishelper(10056)||ishelper(10057))+20115*(ishelper(10052)||ishelper(10053)||ishelper(10054)||ishelper(10055))
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[2,5]
var(10)=ifelse(var(11)<=4,var(11),4) + 20200*(helper(10000),var(0)=2) + 20300*(helper(10000),var(0)=3) + 20400*(helper(10000),var(0)=[4,5])
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[6,7]
var(10)=ifelse(var(11)<=4,var(11),4) + 20115*(helper(10000),var(0)=[6,7])
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[9,10]
var(10)=ifelse(var(11)<=4,var(11),4) + (20900*(ishelper(10050)||ishelper(10051)||ishelper(10052))+20905*(ishelper(10053)))*(helper(10000),var(0)=9)+20900*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[12,14]
var(10)=ifelse(var(11)<=4,var(11),4) + 20200*(helper(10000),var(0)=12)+20900*(helper(10000),var(0)=13)+20200*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[15,18]
var(10)=ifelse(var(11)<=4,var(11),4) + 20900*(helper(10000),var(0)=15) + 20200*(helper(10000),var(0)=17) + 20900*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[20,21]
var(10)=ifelse(var(11)<=4,var(11),4) + 20905*(helper(10000),var(0)=20) + (20900*(ishelper(10050))+20900*(ishelper(10051))+20115*(ishelper(10052))+20900*(ishelper(10053)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[22,24]
var(10)=ifelse(var(11)<=4,var(11),4) + 20115*(helper(10000),var(0)=22) + (20905*(ishelper(10050))+20200*(ishelper(10051)))*(helper(10000),var(0)=24)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[25,26]
var(10)=ifelse(var(11)<=4,var(11),4) + 20905*(helper(10000),var(0)=25) + 20900*(helper(10000),var(0)=26)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[27,28]
var(10)=ifelse(var(11)<=4,var(11),4) + 20200*(helper(10000),var(0)=27)


;pos
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=1
fvar(0)=491*(ishelper(10050))+1455*(ishelper(10051))+2282*(ishelper(10052))+3004*(ishelper(10053))+4281*(ishelper(10054))+4760*(ishelper(10055))+5493*(ishelper(10056))+6422*(ishelper(10057))
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[2,3]
fvar(0)=(723*(ishelper(10050))+2716*(ishelper(10051)))*(helper(10000),var(0)=2) + (498*(ishelper(10050))+2202*(ishelper(10051))+3898*(ishelper(10052))+5291*(ishelper(10053)))*(helper(10000),var(0)=3)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[4,5]
fvar(0)=(379*(ishelper(10050))+745*(ishelper(10051))+1633*(ishelper(10052))+2631*(ishelper(10053)))*(helper(10000),var(0)=4)+(1053*(ishelper(10050))+1607*(ishelper(10051)))*(helper(10000),var(0)=5)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[6,7]
fvar(0)=(538*(ishelper(10050))+1688*(ishelper(10051)))*(helper(10000),var(0)=6)+(435*(ishelper(10050))+871*(ishelper(10051)))*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[9,10]
fvar(0)=(348*(ishelper(10050))+942*(ishelper(10051))+1465*(ishelper(10052))+2259*(ishelper(10053)))*(helper(10000),var(0)=9)+(1027*(ishelper(10050))+1884*(ishelper(10051))+2420*(ishelper(10052)))*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[12,14]
fvar(0)=(376*(ishelper(10050))+1817*(ishelper(10051)))*(helper(10000),var(0)=12)+(605*(ishelper(10050))+1839*(ishelper(10051)))*(helper(10000),var(0)=13)+(772*(ishelper(10050))+3026*(ishelper(10051)))*(helper(10000),var(0)=14)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[15,18]
fvar(0)=447*(helper(10000),var(0)=15)+(406*(ishelper(10050))+1007*(ishelper(10051))+2058*(ishelper(10052)))*(helper(10000),var(0)=17)+(278*(ishelper(10050))+618*(ishelper(10051)))*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[20,21]
fvar(0)=(387*(ishelper(10050))+1426*(ishelper(10051))+2703*(ishelper(10052)))*(helper(10000),var(0)=20) + (462*(ishelper(10050))+978*(ishelper(10051))+1573*(ishelper(10052))+2180*(ishelper(10053)))*(helper(10000),var(0)=21)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[22,24]
fvar(0)=(580*(ishelper(10050))+1816*(ishelper(10051)))*(helper(10000),var(0)=22) + (467*(ishelper(10050))+1940*(ishelper(10051)))*(helper(10000),var(0)=24)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[25,26]
fvar(0)=(415*(ishelper(10050))+3271*(ishelper(10051)))*(helper(10000),var(0)=25)+(390*(ishelper(10050))+1588*(ishelper(10051))+2548*(ishelper(10052)))*(helper(10000),var(0)=26)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[27,28]
fvar(0)=(530*(ishelper(10050))+803*(ishelper(10051)))*(helper(10000),var(0)=27)


;walls
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=1
trigger1 = ishelper(10051)||ishelper(10056)||ishelper(10057)
var(12)=1

;wood
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=9||helper(10000),var(0)=10||helper(10000),var(0)=13||helper(10000),var(0)=15||helper(10000),var(0)=18||helper(10000),var(0)=20
trigger2 = (helper(10000),var(0)=21 && (ishelper(10050)||ishelper(10051)||ishelper(10053)))||(helper(10000),var(0)=24 && ishelper(10050))||helper(10000),var(0)=25
trigger3 = helper(10000),var(0)=26
var(12)=2

;small
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=1 && (ishelper(10052)||ishelper(10053)||ishelper(10054)||ishelper(10055))
trigger2 = helper(10000),var(0)=7
trigger3 = helper(10000),var(0)=9 && (ishelper(10050)||ishelper(10051)||ishelper(10052))
trigger4 = helper(10000),var(0)=10
trigger5 = helper(10000),var(0)=13
trigger6 = helper(10000),var(0)=15
trigger7 = helper(10000),var(0)=18
trigger8 = helper(10000),var(0)=21
trigger9 = helper(10000),var(0)=26
var(14)=1


;pos y
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=5||helper(10000),var(0)=7
fvar(1)=-17*(helper(10000),var(0)=5)+9*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=9||helper(10000),var(0)=10
fvar(1)=-10*(helper(10000),var(0)=9)*(ishelper(10050)||ishelper(10051)||ishelper(10052))+7*(helper(10000),var(0)=10)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=12||helper(10000),var(0)=14||helper(10000),var(0)=15||helper(10000),var(0)=17
fvar(1)=(-1*(ishelper(10050))+4*(ishelper(10051)))*(helper(10000),var(0)=12)+(1*(ishelper(10050))-1*(ishelper(10051)))*(helper(10000),var(0)=14)-10*(helper(10000),var(0)=15)-2*(helper(10000),var(0)=17)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=21||helper(10000),var(0)=22||helper(10000),var(0)=24||helper(10000),var(0)=25||helper(10000),var(0)=27
fvar(1)=9*(ishelper(10052))*(helper(10000),var(0)=21)+15*(helper(10000),var(0)=22)-13*(ishelper(10051))*(helper(10000),var(0)=24)+15*(helper(10000),var(0)=25)-4*(helper(10000),var(0)=27)

;--------------

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -110+40*(var(12)!=0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(50) && time=1 && var(11)<11
trigger2 = helper(10000),var(20+1*(ishelper(10051))+2*(ishelper(10052))+3*(ishelper(10053))+4*(ishelper(10054))+5*(ishelper(10055))+6*(ishelper(10056))+7*(ishelper(10057))+8*(ishelper(10058)))>=10
value = S1,ifelse(var(11)<4,(random%2)+2*(var(12)=1)+6*(var(12)=2),ifelse(var(50) && time=1,4,6+(random%2)))

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(16)=20 || helper(10000),var(0)=0
var(13)=0

[State 0, VarAdd]
type = VarAdd
trigger1 = var(50) && time=1 && var(11)<11 && var(11)>=4
var(13)=1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = var(50) && time=1 && var(11)<11 && var(11)>=4 && var(13)<10
var(3)=10

[State 0, Explod]
type = explod 
triggerall = var(12)=2
trigger1 = var(50) && time=1 && var(11)<4
trigger2 = helper(10000),var(20+1*(ishelper(10051))+2*(ishelper(10052))+3*(ishelper(10053))+4*(ishelper(10054))+5*(ishelper(10055))+6*(ishelper(10056))+7*(ishelper(10057))+8*(ishelper(10058)))>=10
anim = 10016
ID = 10017
pos = 0,-95
postype = p1
bindtime=-1
sprpriority = -60
pausemovetime=999
supermovetime=999

[State 0, VarAdd]
type = VarAdd
trigger1 = var(50) && time=1 && var(11)<11
trigger2 = helper(10000),var(20+1*(ishelper(10051))+2*(ishelper(10052))+3*(ishelper(10053))+4*(ishelper(10054))+5*(ishelper(10055))+6*(ishelper(10056))+7*(ishelper(10057))+8*(ishelper(10058)))>=10
var(11)=ifelse(var(50) && time=1,1,ifelse(var(11)<4,1,ifelse(var(11)>4,-1,0)))

[State 0, ParentVar]
type = ParentVaradd
trigger1 = helper(10000),var(20+1*(ishelper(10051))+2*(ishelper(10052))+3*(ishelper(10053))+4*(ishelper(10054))+5*(ishelper(10055))+6*(ishelper(10056))+7*(ishelper(10057))+8*(ishelper(10058)))>=10
var(20+1*(ishelper(10051))+2*(ishelper(10052))+3*(ishelper(10053))+4*(ishelper(10054))+5*(ishelper(10055))+6*(ishelper(10056))+7*(ishelper(10057))+8*(ishelper(10058)))=-20


;carpeter
[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = helper(10000),var(58)>0
trigger1 = var(11)<11
var(3)=10
[State 0, VarAdd]
type = VarAdd
trigger1 = helper(10000),var(58)>0
trigger1 = var(11)<11
var(11)=1


[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(11)>=11
trigger2 = var(11)>=5 && time<=50
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, Explod]
type = explod 
trigger1 = !numexplod(10010) && (var(11)>=5)
anim = 10013+(random%3)-3*(var(14)!=0)
ID = 10010
pos = 0,-90-(random%41)
postype = p1
bindtime=-1
sprpriority = -66
pausemovetime=999
supermovetime=999

[State 0, Explod]
type = explod 
trigger1 = !numexplod(10011) && (var(11)>=6)
anim = 10013+(random%3)-3*(var(14)!=0)
ID = 10011
pos = 0,-90-(random%41)
postype = p1
bindtime=-1
sprpriority = -65
pausemovetime=999
supermovetime=999

[State 0, Explod]
type = explod 
trigger1 = !numexplod(10012) && (var(11)>=7)
anim = 10013+(random%3)-3*(var(14)!=0)
ID = 10012
pos = 0,-90-(random%41)
postype = p1
bindtime=-1
sprpriority = -64
pausemovetime=999
supermovetime=999

[State 0, Explod]
type = explod 
trigger1 = !numexplod(10013) && (var(11)>=8)
anim = 10013+(random%3)-3*(var(14)!=0)
ID = 10013
pos = 0,-90-(random%41)
postype = p1
bindtime=-1
sprpriority = -63
pausemovetime=999
supermovetime=999

[State 0, Explod]
type = explod 
trigger1 = !numexplod(10014) && (var(11)>=9)
anim = 10013+(random%3)-3*(var(14)!=0)
ID = 10014
pos = 0,-90-(random%41)
postype = p1
bindtime=-1
sprpriority = -62
pausemovetime=999
supermovetime=999

[State 0, Explod]
type = explod 
trigger1 = !numexplod(10015) && (var(11)>=10)
anim = 10013+(random%3)-3*(var(14)!=0)
ID = 10015
pos = 0,-90-(random%41)
postype = p1
bindtime=-1
sprpriority = -61
pausemovetime=999
supermovetime=999

[State 0, Explod]
type = explod 
trigger1 = !numexplod(10016) && (var(11)>=11)
anim = 10013+(random%3)-3*(var(14)!=0)
ID = 10016
pos = 0,-90-(random%41)
postype = p1
bindtime=-1
sprpriority = -60
pausemovetime=999
supermovetime=999



[State 0, Explod]
type = explod 
trigger1 = numexplod(10010) && !(var(11)>=5)
trigger2 = numexplod(10011) && !(var(11)>=6)
trigger3 = numexplod(10012) && !(var(11)>=7)
trigger4 = numexplod(10013) && !(var(11)>=8)
trigger5 = numexplod(10014) && !(var(11)>=9)
trigger6 = numexplod(10015) && !(var(11)>=10)
trigger7 = numexplod(10016) && !(var(11)>=11)
anim = 10016
ID = 10017
pos = 0,-95
postype = p1
bindtime=-1
sprpriority = -60
pausemovetime=999
supermovetime=999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !(var(11)>=5)
id = 10010

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !(var(11)>=6)
id = 10011

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !(var(11)>=7)
id = 10012

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !(var(11)>=8)
id = 10013

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !(var(11)>=9)
id = 10014

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !(var(11)>=10)
id = 10015

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !(var(11)>=11)
id = 10016

;------------------system

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10050
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;perks
[Statedef 10060]
physics=N
movetype = I
SprPriority=-70

;pos
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[1,4]
fvar(0)=(6218*(ishelper(10060))+4439*(ishelper(10061)))*(helper(10000),var(0)=1)+1998*(helper(10000),var(0)=2)+4458*(helper(10000),var(0)=3)+2388*(helper(10000),var(0)=4)

;pos
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[9,17]
fvar(0)=466*(helper(10000),var(0)=9)+1775*(helper(10000),var(0)=10)+2219*(helper(10000),var(0)=11)+316*(helper(10000),var(0)=16)+1272*(helper(10000),var(0)=17)

;pos
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[20,29]
fvar(0)=2470*(helper(10000),var(0)=20)+1682*(helper(10000),var(0)=21)+591*(helper(10000),var(0)=24)+2690*(helper(10000),var(0)=25)+596*(helper(10000),var(0)=26)


;-------------------

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(10)=20130

[State 0, NotHitBy]
type = NotHitBy
trigger1 = (ishelper(10060) && helper(10000),var(30))||(ishelper(10061) && helper(10000),var(31))||(ishelper(10062) && helper(10000),var(32))||(ishelper(10063) && helper(10000),var(33))||(ishelper(10064) && helper(10000),var(34))
trigger2 = (ishelper(10060) && helper(10000),var(35))||(ishelper(10061) && helper(10000),var(36))||(ishelper(10062) && helper(10000),var(37))||(ishelper(10063) && helper(10000),var(38))||(ishelper(10064) && helper(10000),var(39))
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, pVarSet]
type = parentVarSet
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && !ishelper(10060) && !ishelper(10061) && helper(10000),var(40)=0
var(11)=3

[State 0, pVarSet]
type = parentVarSet
trigger1 = helper(10000),var(10)=0
trigger1 = ishelper(10060) || ishelper(10061) || helper(10000),var(40)!=0
trigger1 = var(50) && time=1 && helper(10000),var(2)<3000*ishelper(10060)+2000*ishelper(10061)+2000*ishelper(10062)+3000*ishelper(10063)+2000*ishelper(10064)
var(10)=3000*ishelper(10060)+2000*ishelper(10061)+2000*ishelper(10062)+3000*ishelper(10063)+2000*ishelper(10064)

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10060) || ishelper(10061) || helper(10000),var(40)!=0
trigger1 = var(50) && time=1 && helper(10000),var(2)>=3000*ishelper(10060)+2000*ishelper(10061)+2000*ishelper(10062)+3000*ishelper(10063)+2000*ishelper(10064)
var(15)=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=5 && var(15)
value = S3,1*ishelper(10061)+2*ishelper(10062)+3*ishelper(10063)+4*ishelper(10064)
channel=10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=145 && var(15)
value = S3,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=185 && var(15)
value = S3,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=225 && var(15)
value = S3,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=265 && var(15)
value = S3,6


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=300 && var(15)
value = S3,7



[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time=1 && var(15)
var(30+ishelper(10061)+2*ishelper(10062)+3*ishelper(10063)+4*ishelper(10064))=1

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time=1 && var(15)
var(35+ishelper(10061)+2*ishelper(10062)+3*ishelper(10063)+4*ishelper(10064))=1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time=1 && var(15)
var(3)=-(3000*ishelper(10060)+2000*ishelper(10061)+2000*ishelper(10062)+3000*ishelper(10063)+2000*ishelper(10064))

[State 0, VarSet]
type = VarSet
trigger1 = time>=310 && var(15)
var(15)=0

[State 0, StopSnd]
type = StopSnd
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0 
channel = 10

;------------------system

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10060
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;levers
[Statedef 10070]
physics=N
movetype = I
SprPriority=-70

;power
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10070)
fvar(0)=1159*(helper(10000),var(0)=5)+607*(helper(10000),var(0)=25)
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10070)
fvar(1)=-50*(helper(10000),var(0)=5)-47*(helper(10000),var(0)=25)


;generator
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10073)
trigger1 = helper(10000),var(0)=[9,19]
fvar(0)=2026*(helper(10000),var(0)=9)+3067*(helper(10000),var(0)=10)+1136*(helper(10000),var(0)=12)+1203*(helper(10000),var(0)=14)+841*(helper(10000),var(0)=16)+627*(helper(10000),var(0)=17)
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10073)
trigger1 = helper(10000),var(0)=[9,19]
fvar(1)=-65*(helper(10000),var(0)=9)-65*(helper(10000),var(0)=10)-66*(helper(10000),var(0)=12)-65*(helper(10000),var(0)=14)-70*(helper(10000),var(0)=16)-64*(helper(10000),var(0)=17)



;tele
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10071)
trigger1 = helper(10000),var(0)=[1,19]
fvar(0)=4621*(helper(10000),var(0)=1)+2638*(helper(10000),var(0)=3)+953*(helper(10000),var(0)=5)+825*(helper(10000),var(0)=11)+1623*(helper(10000),var(0)=13)+1607*(helper(10000),var(0)=17)
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10071)
trigger1 = helper(10000),var(0)=[1,19]
fvar(1)=-92*(helper(10000),var(0)=1)-95*(helper(10000),var(0)=3)-99*(helper(10000),var(0)=5)-43*(helper(10000),var(0)=11)-76*(helper(10000),var(0)=13)-81*(helper(10000),var(0)=17)
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10071)
trigger1 = helper(10000),var(0)=[20,29]
fvar(0)=1439*(helper(10000),var(0)=21)+987*(helper(10000),var(0)=23)+2419*(helper(10000),var(0)=26)
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10071)
trigger1 = helper(10000),var(0)=[20,29]
fvar(1)=-91*(helper(10000),var(0)=21)-71*(helper(10000),var(0)=23)-76*(helper(10000),var(0)=26)






;trap
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10072)
trigger1 = helper(10000),var(0)=[1,7]
fvar(0)=1648*(helper(10000),var(0)=1)+833*(helper(10000),var(0)=2)+3020*(helper(10000),var(0)=3)+632*(helper(10000),var(0)=4)+561*(helper(10000),var(0)=5)+1565*(helper(10000),var(0)=6)+997*(helper(10000),var(0)=7)
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10072)
trigger1 = helper(10000),var(0)=[1,7]
fvar(1)=-92*(helper(10000),var(0)=1)-83*(helper(10000),var(0)=2)-106*(helper(10000),var(0)=3)-84*(helper(10000),var(0)=4)-88*(helper(10000),var(0)=5)-85*(helper(10000),var(0)=6)-84*(helper(10000),var(0)=7)

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10072)
trigger1 = helper(10000),var(0)=[9,16]
fvar(0)=595*(helper(10000),var(0)=9)+508*(helper(10000),var(0)=10)+963*(helper(10000),var(0)=11)+2024*(helper(10000),var(0)=12)+762*(helper(10000),var(0)=13)+2184*(helper(10000),var(0)=14)+405*(helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10072)
trigger1 = helper(10000),var(0)=[9,16]
fvar(1)=-73*(helper(10000),var(0)=9)-80*(helper(10000),var(0)=10)-50*(helper(10000),var(0)=11)-73*(helper(10000),var(0)=12)-81*(helper(10000),var(0)=13)-99*(helper(10000),var(0)=14)-126*(helper(10000),var(0)=16)

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10072)
trigger1 = helper(10000),var(0)=[17,18]
fvar(0)=1774*(helper(10000),var(0)=17)+695*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10072)
trigger1 = helper(10000),var(0)=[17,18]
fvar(1)=-79*(helper(10000),var(0)=17)-41*(helper(10000),var(0)=18)

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10072)
trigger1 = helper(10000),var(0)=[20,27]
fvar(0)=871*(helper(10000),var(0)=21)+1337*(helper(10000),var(0)=22)+393*(helper(10000),var(0)=23)+1343*(helper(10000),var(0)=24)+1150*(helper(10000),var(0)=25)+1109*(helper(10000),var(0)=26)+898*(helper(10000),var(0)=27)
[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10072)
trigger1 = helper(10000),var(0)=[20,27]
fvar(1)=-97*(helper(10000),var(0)=21)-109*(helper(10000),var(0)=22)-72*(helper(10000),var(0)=23)-127*(helper(10000),var(0)=24)-109*(helper(10000),var(0)=25)-77*(helper(10000),var(0)=26)-81*(helper(10000),var(0)=27)


;-------------------

[State 0, PlaySnd]
type = PlaySnd
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && helper(10000),var(40)=0 && ishelper(10072) && helper(10000),var(0)=3
value = S6,(random%2)
channel=7

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(12)=500*ishelper(10070)+750*ishelper(10072)+500*ishelper(10073)

[State 0, VarSet]
type = VarSet
trigger1 = !ishelper(10073)
var(10)=20500+1*(helper(10000),var(40)!=0 && ishelper(10070))+2*(var(15) && ishelper(10071))+3*(var(15) && ishelper(10072))

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10073)
var(10)=20500+1*(helper(10030),var(20+(helper(10000),var(0)=10)+2*(helper(10000),var(0)=12)+3*(helper(10000),var(0)=16)+4*(helper(10000),var(0)=17)+5*(helper(10000),var(0)=14))!=0 && ishelper(10073))


[State 0, pVarSet]
type = parentVarSet
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && helper(10000),var(40)=0 && !ishelper(10070) && !ishelper(10073)
var(11)=3

[State 0, pVarSet]
type = parentVarSet
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && helper(10000),var(2)<var(12) && (helper(10000),var(40)!=0 || ishelper(10070) || ishelper(10073))
var(10)=var(12)

[State 0, VarSet]
type = VarSet
trigger1 = var(50) && time=1 && helper(10000),var(2)>=var(12) && (helper(10000),var(40)!=0 || ishelper(10070) || ishelper(10073))
var(15)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(15)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time=1 && var(15) && ishelper(10073)
var(41)=15

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time=1 && var(15) && ishelper(10070)
var(41)=15

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = time=1 && var(15) && ishelper(10070)
var(40)=1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time=1 && var(15)
var(3)=-var(12)

[State 0, VarSet]
type = VarSet
trigger1 = (ishelper(10070)||ishelper(10071)||ishelper(10073)) && var(15) && time>=500*ishelper(10070)+1501*ishelper(10071)+500*ishelper(10073)
trigger2 = helper(10000),var(40)=0 && !ishelper(10073)
var(15)=0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=1 && var(15)
value = S1,10

;--generator

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(10073)
trigger1 = (time%70)=1 && time<=350 && var(15)
value = S1,11

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(10073)
trigger1 = time=10 && var(15)
value = S1,12

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper(10073)
id = 20505

[State 0, Explod]
type = explod
triggerall = ishelper(10073)
trigger1 = helper(10030),var(20)
anim = 20505
ID = 20505
pos = 0,0
postype =p1
bindtime=-1
scale=1,1
sprpriority = -65
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
triggerall = ishelper(10073)
trigger1 = helper(10030),var(21)
anim = 20505
ID = 20505
pos = 17,0
postype =p1
bindtime=-1
scale=1,1
sprpriority = -65
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
triggerall = ishelper(10073)
trigger1 = helper(10030),var(22)
anim = 20505
ID = 20505
pos = 0,14
postype =p1
bindtime=-1
scale=1,1
sprpriority = -65
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
triggerall = ishelper(10073)
trigger1 = helper(10030),var(23)
anim = 20505
ID = 20505
pos = 17,14
postype =p1
bindtime=-1
scale=1,1
sprpriority = -65
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
triggerall = ishelper(10073)
trigger1 = helper(10030),var(24)
anim = 20505
ID = 20505
pos = 0,28
postype =p1
bindtime=-1
scale=1,1
sprpriority = -65
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
triggerall = ishelper(10073)
trigger1 = helper(10030),var(25)
anim = 20505
ID = 20505
pos = 17,28
postype =p1
bindtime=-1
scale=1,1
sprpriority = -65
supermovetime=9999
pausemovetime=9999
ownpal=1

;--power

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(10070)
trigger1 = (time%70)=1 && time<=350 && var(15)
value = S1,11

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(10070)
trigger1 = time=10 && var(15)
value = S1,12

;--teleport

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = ishelper(10071)
trigger1 = time=1 && var(15)
var(41)=-1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(10071)
trigger1 = (time=5||time=1500) && var(15)
value = S4,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(10071)
trigger1 = time=20 && var(15)
value = S4,2+1*(helper(10000),var(0)=3||helper(10000),var(0)=17||helper(10000),var(0)=26)+2*(helper(10000),var(0)=5||helper(10000),var(0)=13||helper(10000),var(0)=21)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(10071)
trigger1 = time=1500 && var(15)
value = S4,12


;------traps

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = ishelper(10072)
trigger1 = var(16)
trigger1 = helper(10000),var(41)>0
var(41)=-1

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(10072)
trigger1 = var(16)
var(16)=0

[State 0, Helper]
type = Helper
trigger1 = ishelper(10072)
trigger1 = time=1 && var(15)
helpertype = normal
name = "o"
ID = 10080
stateno = 10080
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1


;------------------system

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10070
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;traps
[Statedef 10080]
physics=N
movetype = A
SprPriority=-50


[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[1,7]
fvar(0)=1108*(helper(10000),var(0)=7)+1424*(helper(10000),var(0)=6)+585*(helper(10000),var(0)=5)+1200*(helper(10000),var(0)=4)+3135*(helper(10000),var(0)=3)+1029*(helper(10000),var(0)=2)+1117*(helper(10000),var(0)=1)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[1,7]
fvar(1)=-69*(helper(10000),var(0)=7)-84*(helper(10000),var(0)=6)-44*(helper(10000),var(0)=5)-89*(helper(10000),var(0)=2)

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[1,7]
var(12)=1*(helper(10000),var(0)=5)+2*(helper(10000),var(0)=4)+3*(helper(10000),var(0)=3)+4*(helper(10000),var(0)=2)+5*(helper(10000),var(0)=1)+6*(helper(10000),var(0)=6)+7*(helper(10000),var(0)=7)







[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,19]
fvar(0)=734*(helper(10000),var(0)=9)+842*(helper(10000),var(0)=10)+2240*(helper(10000),var(0)=12)+2235*(helper(10000),var(0)=14)+542*(helper(10000),var(0)=16)+1802*(helper(10000),var(0)=17)+800*(helper(10000),var(0)=18)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,19]
fvar(1)=-85*(helper(10000),var(0)=9)-86*(helper(10000),var(0)=10)-87*(helper(10000),var(0)=16)-37*(helper(10000),var(0)=17)-65*(helper(10000),var(0)=18)

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[9,19]
var(12)=6*(helper(10000),var(0)=9)+4*(helper(10000),var(0)=10||helper(10000),var(0)=16)+8*(helper(10000),var(0)=11)+2*(helper(10000),var(0)=12)+8*(helper(10000),var(0)=13)+3*(helper(10000),var(0)=14)+1*(helper(10000),var(0)=17)+7*(helper(10000),var(0)=18)




[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,29]
fvar(0)=827*(helper(10000),var(0)=21)+1458*(helper(10000),var(0)=22)+527*(helper(10000),var(0)=23)+1611*(helper(10000),var(0)=24)+1349*(helper(10000),var(0)=25)+1360*(helper(10000),var(0)=26)+1033*(helper(10000),var(0)=27)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[20,29]
fvar(1)=-61*(helper(10000),var(0)=21)-82*(helper(10000),var(0)=23)-23*(helper(10000),var(0)=24)-84*(helper(10000),var(0)=25)-65*(helper(10000),var(0)=27)

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[20,29]
var(12)=1*(helper(10000),var(0)=21)+3*(helper(10000),var(0)=22)+6*(helper(10000),var(0)=23)+5*(helper(10000),var(0)=24)+4*(helper(10000),var(0)=25)+2*(helper(10000),var(0)=26)+7*(helper(10000),var(0)=27)








[State 0, Turn]
type = Turn
trigger1 = facing=1
trigger1 =  helper(10000),var(0)=6||helper(10000),var(0)=21||helper(10000),var(0)=22



;---------boss fire

[State 0, VarSet]
type = VarSet
trigger1 = !parent,ishelper(10072)
var(12)=1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = !parent,ishelper(10072)
movetype = I

[State 0, Turn]
type = Turn
trigger1 = !parent,ishelper(10072)
trigger1 = facing!=parent,facing

[State 0, VarSet]
type = VarSet
trigger1 = !parent,ishelper(10072)
fvar(0)=parent,fvar(0)

[State 0, VarSet]
type = VarSet
trigger1 = !parent,ishelper(10072)
fvar(1)=parent,fvar(1)-46*1.6

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = !parent,ishelper(10072)
trigger1 = time>=135
trigger2 = parent,var(5)<=0

[State 0, DestroySelf]
type = DestroySelf
triggerall = !parent,ishelper(10072)
trigger1 = time>=135
trigger2 = parent,var(5)<=0


;-----------------machine gun

[State 0, VarSet]
type = VarSet
trigger1 = var(12)=7
var(10)=10415*(time=[20,800])

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=7
trigger1 = var(10)=10415 && (animelem=2||animelem=4)
value = S5,7
channel = 6

[State 0, Helper]
type = Helper
triggerall = var(12)=7
trigger1 = var(10)=10415 && (animelem=2||animelem=4)
helpertype = normal
name = "o"
ID = 10082
stateno = 10082
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
triggerall = var(12)=7
trigger1 = var(10)=10415 && (animelem=2||animelem=4)
anim = 10415
ID = 10415
pos = 3,-5
postype =p1
bindtime=-1
scale=1,1
sprpriority = -55
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
triggerall = var(12)=7
trigger1 = var(10)=10415 && (animelem=2||animelem=4)
anim = 10415
ID = 10415
pos = 3,5
postype =p1
bindtime=-1
scale=1,1
sprpriority = -55
supermovetime=9999
pausemovetime=9999
ownpal=1


[State 0, Explod]
type = explod
triggerall = var(12)=7
trigger1 = var(10)=10415 && (animelem=2||animelem=4)
anim = 10417+(random%3)
ID = 10417
pos = -55,-3
postype =p1
bindtime=-1
scale=1,1
sprpriority = -30
supermovetime=9999
pausemovetime=9999
ownpal=1


[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=7
trigger1 = time=1
value = S5,11

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=7
trigger1 = time=800
value = S5,12



;-----------------bazoka

[State 0, VarSet]
type = VarSet
trigger1 = var(12)=6
var(10)=10425

[State 0, HitDef]
type = HitDef
trigger1 = var(12)=6
damage=100,0
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = -1
numhits=0
affectteam=F

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=6
trigger1 = time=2
value = S5,2

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=6
trigger1 = time=2
value = S5,3

[State 0, EnvShake]
type = EnvShake
triggerall = var(12)=6
trigger1 = time=2
time = 20
freq = 100
ampl = 8

[State 0, Explod]
type = explod 
triggerall = var(12)=6
trigger1 = time=2
anim = 10412
ID = 10412
pos = 50,100
postype = p1
bindtime=-1
scale=2,1.5
facing=-1
sprpriority = 45
pausemovetime=999
supermovetime=999
ownpal=1


;-----------------laser

[State 0, VarSet]
type = VarSet
trigger1 = var(12)=5
var(10)=10420

[State 0, HitDef]
type = HitDef
triggerall = var(12)=5
trigger1 = animelem=2
damage=10,0
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = s1,22
numhits=0
affectteam=F

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=5
trigger1 = (time%50)=1
value = S1,23
channel=10

[State 0, StopSnd]
type = StopSnd
triggerall = var(12)=5
trigger1 = time>=800
trigger2 = helper(10000),var(0)=0
channel = 10


;-----------------m4

[State 0, VarSet]
type = VarSet
trigger1 = var(12)=4
var(10)=10415*((time%45)<25)*(time<=400)

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=4
trigger1 = var(10)=10415 && animelem=2
value = S5,5
channel = 6

[State 0, Helper]
type = Helper
triggerall = var(12)=4
trigger1 = var(10)=10415 && animelem=2
helpertype = normal
name = "o"
ID = 10082
stateno = 10082
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
triggerall = var(12)=4
trigger1 = var(10)=10415 && animelem=2
anim = 10417+(random%3)
ID = 10417
pos = -85,-3
postype =p1
bindtime=-1
scale=1,1
sprpriority = -30
supermovetime=9999
pausemovetime=9999
ownpal=1


;------------------toy

[State 0, VarSet]
type = VarSet
triggerall = var(12)=3
trigger1 = !time
var(10)=10410

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=3
trigger1 = !time||time=250
value = S6,3+(random%8)

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=3
trigger1 = time=150
value = S6,18+(random%4)

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=3
trigger1 = time=500
value = S6,11+(random%7)

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=3
trigger1 = (time%100)=1 && time<=550
value = S6,2


[State 0, VarAdd]
type = VarAdd
triggerall = var(12)=3
trigger1 = var(10)=10410 && time>=20
fvar(0)=0.7*facing

[State 0, VarSet]
type = VarSet
triggerall = var(12)=3
trigger1 = time=600
var(10)=10411

[State 0, HitDef]
type = HitDef
triggerall = var(12)=3
trigger1 = (time=[600,625]) &&(time%3)=1
damage=20,0
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = -1
numhits=0
affectteam=F

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=3
trigger1 = time=603
value = S5,2

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=3
trigger1 = time=603
value = S5,3

[State 0, EnvShake]
type = EnvShake
triggerall = var(12)=3
trigger1 = time=603
time = 12
freq = 100
ampl = -6

[State 0, Explod]
type = explod 
triggerall = var(12)=3
trigger1 = time=600
anim = 10411
ID = 10411
pos = 0,0
postype = p1
bindtime=-1
scale=2,1.5
facing=-1
sprpriority = 50
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
triggerall = var(12)=3
trigger1 = time=600
anim = 10412
ID = 10412
pos = -50,30
postype = p1
bindtime=-1
scale=2,1.5
facing=-1
sprpriority = 45
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
triggerall = var(12)=3
trigger1 = time=600
anim = 10412
ID = 10412
pos = 50,30
postype = p1
bindtime=-1
scale=2,1.5
facing=-1
sprpriority = 45
pausemovetime=999
supermovetime=999
ownpal=1



;-------------------freeze

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=2
trigger1 = (time%40)=1
value = S1,20
channel=10

[State 0, StopSnd]
type = StopSnd
triggerall = var(12)=2
trigger1 = time>=1600
trigger2 = helper(10000),var(0)=0
channel = 10


[State 0, VarSet]
type = VarSet
triggerall = var(12)=2
trigger1 = !time
var(10)=10405

[State 0, Explod]
type = explod 
triggerall = var(12)=2
trigger1 = !numexplod(10405)
anim = 10405
ID = 10405
pos = -50,0
postype = p1
bindtime=-1
scale=1,1
facing=-1
sprpriority = -50
pausemovetime=999
supermovetime=999
ownpal=1


;-------------------flame

[State 0, VarSet]
type = VarSet
triggerall = var(12)=1
trigger1 = !time
var(10)=10400

[State 0, VarSet]
type = VarSet
triggerall = var(12)=1
trigger1 = var(10)=10400 && !animtime && anim=var(10)
var(10)=0

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=1
trigger1 = var(10)=10400 && time=1
value = S5,0

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(12)=1
trigger1 = var(10)=10400 && time=1
value = S5,1

[State 0, HitDef]
type = HitDef
triggerall = var(12)=1
trigger1 = var(10)=10400 && (time%10)=1
damage=20,0
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = -1
numhits=0
affectteam=F



;------------------system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -50+90*(var(12)=3||var(12)=5||var(12)=6)+54*(parent,ishelper(10072)=0)

[State 0, PlaySnd]
type = PlaySnd
triggerall = parent,ishelper(10072)
trigger1 = time>=300+1300*(var(12)=2)+500*(var(12)=3)+170*(var(12)=4)+500*(var(12)=5)+570*(var(12)=7)+200*(var(12)=8)
value = S1,10

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = parent,ishelper(10072)
trigger1 = time>=300+1300*(var(12)=2)+500*(var(12)=3)+170*(var(12)=4)+500*(var(12)=5)+570*(var(12)=7)+200*(var(12)=8)
var(16)=1

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = parent,ishelper(10072)
trigger1 = time>=300+1300*(var(12)=2)+500*(var(12)=3)+170*(var(12)=4)+500*(var(12)=5)+570*(var(12)=7)+200*(var(12)=8)
var(15)=0

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = parent,ishelper(10072)
trigger1 = time>=300+1300*(var(12)=2)+500*(var(12)=3)+170*(var(12)=4)+500*(var(12)=5)+570*(var(12)=7)+200*(var(12)=8)

[State 0, DestroySelf]
type = DestroySelf
triggerall = parent,ishelper(10072)
trigger1 = time>=300+1300*(var(12)=2)+500*(var(12)=3)+170*(var(12)=4)+500*(var(12)=5)+570*(var(12)=7)+200*(var(12)=8)

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10080
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;bullet
[Statedef 10082]
physics=N
movetype = A
SprPriority=-50


[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=parent,fvar(0)
[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=parent,fvar(1)


[State 0, VarSet]
type = VarSet
trigger1 = 1
var(10)=10416

[State 0, VarAdd]
type = VarAdd
trigger1 = time>=1
fvar(0)=40*facing

[State 0, HitDef]
type = HitDef
trigger1 = !time
damage=30,0
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = s5,8+(random%3)
numhits=0
affectteam=F


;------------------system

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time>=50
trigger2 = movecontact

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>=50
trigger2 = movecontact

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10082
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;laser
[Statedef 10084]
physics=N
movetype = A
SprPriority=50


[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=parent,fvar(0)+47*1.6*facing
[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=parent,fvar(1)-56*1.6


[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = s5,14

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=10413

[State 0, VarAdd]
type = VarAdd
trigger1 = time>=1 && var(10)=10413
fvar(0)=20*facing

[State 0, VarSet]
type = VarSet
trigger1 = p2dist x=[-15,15]
trigger1 = p2dist y>-5
var(10)=10414

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10)=10414 && anim=var(10) && animelemtime(1)=2
value = s5,8+(random%3)

[State 0, EnvShake]
type = EnvShake
trigger1 = var(10)=10414 && anim=var(10) && animelemtime(1)=2
time = 5
freq = 60
ampl = -4

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = var(10)=10414 && anim=var(10) && animelemtime(1)=2
var(9)=-4


;------------------system

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time>=200 && var(10)=10413
trigger2 = var(10)=10414 && anim=var(10) && !animtime

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>=200 && var(10)=10413
trigger2 = var(10)=10414 && anim=var(10) && !animtime

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10084
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;mine
[Statedef 10090]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=3
fvar(0)=1864*(ishelper(10090))+2435*(ishelper(10091))+3569*(ishelper(10092))+4338*(ishelper(10093))
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=3
fvar(1)=-49*(ishelper(10090))-49*(ishelper(10091))-49*(ishelper(10092))-49*(ishelper(10093))

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=11
fvar(0)=580*(ishelper(10090))+1300*(ishelper(10091))

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=13
fvar(0)=2360*(ishelper(10092))+2816*(ishelper(10093))

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=23
fvar(0)=836*(ishelper(10090))+1457*(ishelper(10091))
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=23
fvar(1)=-34*(ishelper(10090))-34*(ishelper(10091))


;explod
[State 0, VarSet]
type = VarSet
triggerall = ishelper(10090)||ishelper(10091)||ishelper(10092)||ishelper(10093)
trigger1 = helper(10000),var(0)=11||helper(10000),var(0)=13
var(13)=1


;-------------------

[State 0, VarSet]
type = VarSet
trigger1 = !time && !var(13)
var(12)=1000

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(10)=20500+4*(var(15)!=0)

[State 0, ChangeState]
type = ChangeState
trigger1 = ishelper(10090) && helper(10000),var(45)=2
trigger2 = ishelper(10091) && helper(10000),var(46)=2
trigger3 = ishelper(10092) && helper(10000),var(47)=2
trigger4 = ishelper(10093) && helper(10000),var(48)=2
value =10093

[State 0, pVarSet]
type = parentVarSet
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && helper(10000),var(2)<var(12)
var(10)=var(12)

[State 0, VarSet]
type = VarSet
trigger1 = var(50) && time=1 && helper(10000),var(2)>=var(12)
trigger2 = var(13)=1
var(15)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(15)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time=1 && var(15)
var(3)=-var(12)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=4 && var(15) && !var(13)
value = S0,62

[State 0, VarSet]
type = VarSet
trigger1 = var(15)!=0
fvar(1)=0

[State 0, ChangeState]
type = ChangeState
trigger1 = ishelper(10090) && helper(10000),var(45)=1
trigger2 = ishelper(10091) && helper(10000),var(46)=1
trigger3 = ishelper(10092) && helper(10000),var(47)=1
trigger4 = ishelper(10093) && helper(10000),var(48)=1
trigger5 = (p2dist x=[-10,10])&&(p2dist y>-5) && var(13)=1
value =10092


;------------------system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -70

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10090
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;mine explod
[Statedef 10092]
physics=N
movetype = A
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = ishelper(10094)||ishelper(10095)||ishelper(10096)
fvar(0)=parent,fvar(0)

[State 0, VarSet]
type = VarSet
trigger1 = time=0
var(10)=10411

[State 0, 0]
type = parentvarset
trigger1 = !time && (helper(10000),var(45)=[0,1])
trigger1 = ishelper(10090)
var(45)=2*(var(13)=1)

[State 0, 0]
type = parentvarset
trigger1 = !time && (helper(10000),var(46)=[0,1])
trigger1 = ishelper(10091)
var(46)=2*(var(13)=1)

[State 0, 0]
type = parentvarset
trigger1 = !time && (helper(10000),var(47)=[0,1])
trigger1 = ishelper(10092)
var(47)=2*(var(13)=1)

[State 0, 0]
type = parentvarset
trigger1 = !time && (helper(10000),var(48)=[0,1])
trigger1 = ishelper(10093)
var(48)=2*(var(13)=1)

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(15)=0


[State 0, HitDef]
type = HitDef
triggerall = var(10)=10411
trigger1 = (time<=25) &&(time%3)=1
damage=18,0
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = -1
numhits=0
affectteam=F

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(10)=10411
trigger1 = time=3
value = S5,2

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(10)=10411
trigger1 = time=3
value = S5,3

[State 0, EnvShake]
type = EnvShake
triggerall = var(10)=10411
trigger1 = time=3
time = 12
freq = 100
ampl = -6

[State 0, Explod]
type = explod 
triggerall = var(10)=10411
trigger1 = time=0
anim = 10411
ID = 10411
pos = 0,0
postype = p1
bindtime=-1
scale=2,1.5
facing=-1
sprpriority = 50
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
triggerall = var(10)=10411
trigger1 = time=0
trigger1 = ishelper(10090)||ishelper(10091)||ishelper(10092)||ishelper(10093)
anim = 10412
ID = 10412
pos = -50,30
postype = p1
bindtime=-1
scale=2,1.5
facing=-1
sprpriority = 45
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
triggerall = var(10)=10411
trigger1 = time=0
trigger1 = ishelper(10090)||ishelper(10091)||ishelper(10092)||ishelper(10093)
anim = 10412
ID = 10412
pos = 50,30
postype = p1
bindtime=-1
scale=2,1.5
facing=-1
sprpriority = 45
pausemovetime=999
supermovetime=999
ownpal=1




[State 0, ChangeState]
type = ChangeState
trigger1 = time>=200 && (ishelper(10090)||ishelper(10091)||ishelper(10092)||ishelper(10093))
value =10090

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>=50
trigger1 = ishelper(10094)||ishelper(10095)||ishelper(10096)

;------------------system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 40

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10092
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;mine explod
[Statedef 10093]
physics=N
movetype = A
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = time=0
var(10)=0

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(15)=0

;------------------system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 40

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10092
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0



;--------------------------------------------------------------------------------
;bonus
[Statedef 10100]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(0)=798*(helper(10000),var(0)=1)+774*(helper(10000),var(0)=6)+4014*(helper(10000),var(0)=3) + 770*(helper(10000),var(0)=22)+740*(helper(10000),var(0)=24)+765*(helper(10000),var(0)=26)
[State 0, VarSet]
type = VarSet
trigger1 = 1
fvar(1)=-21*(helper(10000),var(0)=1)-21*(helper(10000),var(0)=6)-29*(helper(10000),var(0)=3) + -25*(helper(10000),var(0)=22)-77*(helper(10000),var(0)=24)-20*(helper(10000),var(0)=26)


;-----------------

[State 0, VarSet]
type = VarSet
trigger1 = (helper(10000),var(0)=[1,7])
var(10)=20140+1*((helper(10030),var(50)!=0 && ishelper(10100))||(helper(10030),var(51)!=0 && ishelper(10101))||(helper(10030),var(52)!=0 && ishelper(10102)))


[State 0, VarSet]
type = VarSet
trigger1 = (helper(10000),var(0)=[20,29])
var(10)=(20142+1*(var(17)=1))*!((helper(10030),var(50)!=0 && ishelper(10100))||(helper(10030),var(51)!=0 && ishelper(10101))||(helper(10030),var(52)!=0 && ishelper(10102)))




[State 0, Varadd]
type = Varadd
trigger1 = var(16)<=4
trigger1 = (p2dist x=[-320,320])||var(16)>0
var(16)=1

[State 0, VarSet]
type = VarSet
trigger1 = var(16)=3 && random<=300
trigger1 = var(10)!=20141 && var(10)!=0
var(17)=1

[State 0, VarSet]
type = VarSet
trigger1 = (p2dist x!=[-320,320])
var(16)=0

[State 0, VarSet]
type = VarSet
trigger1 = (p2dist x!=[-320,320])
trigger2 = var(10)=20141 || var(10)=0
var(17)=0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(17) && (time%250)=1 && (helper(10000),var(0)=[1,7])
value = S1,14
channel = 2



;-------------------

[State 0, VarSet]
type = VarSet
trigger1 = var(50) && time=1
var(15)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = ishelper(10100) && helper(10030),var(50)
trigger2 = ishelper(10101) && helper(10030),var(51)
trigger3 = ishelper(10102) && helper(10030),var(52)
trigger4 = !var(17)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time=4 && var(15)
var(3)=1000+4000*(helper(10030),var(50)!=0&&helper(10030),var(51)!=0&&helper(10030),var(52)!=0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=4 && var(15)
value = S1,9
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=4 && var(15) && (helper(10000),var(0)=[20,29])
value = S1,32
channel = 2

;------------------system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -70

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10100
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;water
[Statedef 10110]
physics=N
movetype = I
SprPriority=-40

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[10,13]
fvar(0)=(624*(ishelper(10110))+3637*(ishelper(10111)))*(helper(10000),var(0)=10)+(396*(ishelper(10110))+1671*(ishelper(10111)))*(helper(10000),var(0)=11)+(348*(ishelper(10110))+1663*(ishelper(10111))+2926*(ishelper(10112)))*(helper(10000),var(0)=13)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[10,13]
fvar(1)=(0*(ishelper(10110))-5*(ishelper(10111)))*(helper(10000),var(0)=10)+(-6*(ishelper(10110))-5*(ishelper(10111)))*(helper(10000),var(0)=11)+(-3*(ishelper(10110))-3*(ishelper(10111))-2*(ishelper(10112)))*(helper(10000),var(0)=13)


;-----------------

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(10)=21000

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = (p2dist x=[-60,60]) && p2dist y>=-5
fvar(0)=-ifelse(enemy(0),vel x<5,enemy(0),vel x,5)*(enemy(0),facing)*(1+0.7*(helper(10000),var(32)!=0))*0.4


;------------------system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -40

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10110
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0



;--------------------------------------------------------------------------------
;powerups
[Statedef 10120]
physics=N
movetype = I
SprPriority=50

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=helper(10000),var(50+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124))

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = 1
var(50+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124))=0

;-----------------

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=10450+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)

[State 0, Explod]
type = explod
trigger1 = var(10)=10450+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)
trigger1 = !numexplod(10455)
anim = 10455
ID = 10455
pos = 0,0
postype = p1
bindtime=-1
removetime=-1
scale=1,1
facing=1
sprpriority = 45
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(10)!=10450+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)
id = 10455

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10)=10450+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)
trigger1 = (time%120)=1
value = S17,6
channel=2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10)=10450+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)
trigger1 = (p2dist x=[-15,15]) && (p2dist y>-40) 
value = S17,5
channel=2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = var(10)=10450+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)
trigger1 = (p2dist x=[-15,15]) && (p2dist y>-40) 
var(55+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124))=2000*ishelper(10120)+120*ishelper(10121)+2000*ishelper(10122)+120*ishelper(10123)+2000*ishelper(10124)


[State 0, VarSet]
type = VarSet
trigger1 = var(10)=10450+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)
trigger1 = (p2dist x=[-15,15]) && (p2dist y>-40) 
var(10)=10456+2*(ishelper(10121))

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10)!=10450+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)
trigger1 = animelemtime(1)=50 && anim=var(10)
value = S17,ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)

[State 0, Explod]
type = explod
trigger1 = var(10)!=10450+ishelper(10121)+2*ishelper(10122)+3*ishelper(10123)+4*ishelper(10124)
trigger1 = animelemtime(1)=1 && anim=var(10)
anim = 10457
ID = 10457
pos = 0,0
postype = back
bindtime=-1
scale=1.06,1.1
facing=1
sprpriority = 300
pausemovetime=999
supermovetime=999
ownpal=1



[State 0, StopSnd]
type = StopSnd
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0
trigger3 = !animtime && anim=var(10)
channel = 2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !animtime && anim=var(10)

[State 0, DestroySelf]
type = DestroySelf
trigger1 = !animtime && anim=var(10)



;------------------system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 50

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10120
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;box
[Statedef 10130]
physics=N
movetype = I
SprPriority=-60

[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[9,17]
fvar(0)=1712*(helper(10000),var(0)=9)+2813*(helper(10000),var(0)=10)+891*(helper(10000),var(0)=12)+976*(helper(10000),var(0)=14)+590*(helper(10000),var(0)=16)+864*(helper(10000),var(0)=17)
[State 0, VarSet]
type = VarSet
trigger1 = helper(10000),var(0)=[9,17]
fvar(1)=-35*(helper(10000),var(0)=9)-21*(helper(10000),var(0)=10)-22*(helper(10000),var(0)=12)-22*(helper(10000),var(0)=14)-26*(helper(10000),var(0)=16)-25*(helper(10000),var(0)=17)


;-----------------

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(10)=20910*(var(15)=1)

[State 0, VarSet]
type = VarSet
trigger1 = numhelper(10073) && helper(10073),var(15)=1 && helper(10073),time=5
var(15)=1

[State 0, Explod]
type = explod
trigger1 = var(15)
trigger1 = !numexplod(10463)
anim = 10463
ID = 10463
pos = 0,10
postype = p1
bindtime=-1
removetime=-1
scale=2,1
facing=1
sprpriority = -65
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !var(15)
id = 10463


[State 0, VarSet]
type = VarSet
trigger1 = var(50) && time=1
var(15)=0

[State 0, VarSet]
type = VarSet
trigger1 = var(50) && time=1
var(16)=(random%5)


[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(50) && time=1
value = S17,5
channel=2

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = var(50) && time=1
var(55+var(16))=2000*(var(16)=0)+120*(var(16)=1)+2000*(var(16)=2)+120*(var(16)=3)+2000*(var(16)=4)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(50) && time=18
value = S17,var(16)

[State 0, Explod]
type = explod
trigger1 = var(50) && time=1
anim = 10457
ID = 10457
pos = 0,0
postype = back
bindtime=-1
scale=1.06,1.1
facing=1
sprpriority = 300
pausemovetime=999
supermovetime=999
ownpal=1

;------------------system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -60

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10130
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;bot
[Statedef 10140]
physics=N
movetype = I
SprPriority=-240

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,18]
fvar(0)=2480*(helper(10000),var(0)=9)+2470*(helper(10000),var(0)=11)+3700*(helper(10000),var(0)=13)+2000*(helper(10000),var(0)=15)+2300*(helper(10000),var(0)=17)+100*(helper(10000),var(0)=10||helper(10000),var(0)=12||helper(10000),var(0)=14||helper(10000),var(0)=16)
[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=[9,18]
fvar(1)=-72*(helper(10000),var(0)=9)-120*(helper(10000),var(0)=11)-150*(helper(10000),var(0)=13)-150*(helper(10000),var(0)=15)-60*(helper(10000),var(0)=17)-110*(helper(10000),var(0)=10)-70*(helper(10000),var(0)=12)-90*(helper(10000),var(0)=14)-30*(helper(10000),var(0)=16)

[State 0, Turn]
type = Turn
trigger1 = facing=1
trigger1 = helper(10000),var(0)=9||helper(10000),var(0)=11||helper(10000),var(0)=13||helper(10000),var(0)=15||helper(10000),var(0)=17


[State 0, VarSet]
type = VarSet
triggerall = time>=300
trigger1 = (helper(10000),var(0)=9||helper(10000),var(0)=11||helper(10000),var(0)=13||helper(10000),var(0)=15||helper(10000),var(0)=17) && fvar(0)<0
trigger2 = helper(10000),var(0)=10 && fvar(0)>4200
trigger3 = helper(10000),var(0)=12 && fvar(0)>2900
trigger4 = helper(10000),var(0)=14 && fvar(0)>3500
trigger5 = helper(10000),var(0)=16 && fvar(0)>1700
var(10)=0

;-----------------

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = helper(10000),var(0)=9 && helper(10000),var(15)=0
fvar(0)=1650


[State 0, VarSet]
type = VarSet
trigger1 = time<100 && (random<=6||(helper(10000),var(0)=9 && helper(10000),var(15)=0)||helper(10000),var(0)=18)
var(10)=10464

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 2-0.5*(helper(10000),var(0)=[12,14]),2-0.5*(helper(10000),var(0)=[12,14])

[State 0, VarAdd]
type = VarAdd
trigger1 = var(10)=10464 && helper(10000),var(0)!=18
fvar(0)=facing*5*!((animelemtime(3)>=0&&animelemtime(4)<0)||(animelemtime(7)>=0&&animelemtime(8)<0))

[State 0, EnvShake]
type = EnvShake
trigger1 = var(10)=10464 && anim=var(10) && (animelem=3|| animelem=7) && ((p2dist x=[-600,600])||helper(10000),var(0)=18)
time = 15
freq = 80
ampl = -6+4*(helper(10000),var(0)=18)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10)=10464 && anim=var(10) && (animelemtime(3)=70|| animelemtime(7)=70) && ((p2dist x=[-600,600])||helper(10000),var(0)=18)
value = S1,26

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(10)=10464 && anim=var(10) && (animelem=3|| animelem=7) && ((p2dist x=[-600,600])||helper(10000),var(0)=18)
value = S1,27

;------------------system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -240

[State 0, Turn]
type = Turn
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 10140
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
[Statedef 10150]
physics=N
velset=0,0
anim=10040
movetype=A

[State 0, Turn]
type = Turn
trigger1 = facing=-1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = 140-backedgedist
ignorehitpause = 1


[State 0, HitDef]
type = HitDef
trigger1 = 1
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = -1
numhits=0
p2stateno=10151
affectteam=F

[State 0, 0]
type = changeanim
trigger1 = numtarget || (win||winko||lose||loseko)
value=0

[State 0, 0]
type = changeanim
trigger1 = !numtarget && !(win||winko||lose||loseko)
value=10040


[State 0, Life]
type = targetLifeadd
trigger1 = helper(10000),var(13)=65 && (helper(10000),var(15)=40 && helper(10000),var(16)=2)
trigger1 = enemy(0),command="x" || enemy(0),command="y" || enemy(0),command="z" || enemy(0),command="a" || enemy(0),command="b" || enemy(0),command="c" || enemy(0),command="z"
value = -1000000



;--------------------------------------------------------------------------------
;custum
[statedef 10151]
type = S
movetype = H
physics = N
SprPriority=0
velset=0,0

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = !time
value = 10456

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Turn]
type = Turn
trigger1 = facing!=partner,facing

[State 0, PosAdd]
type = PosAdd
trigger1 = roundstate>=2
x = -600-backedgedist
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 =win||winko
value =0
ctrl =1

[State 0, LifeSet]
type = LifeSet
trigger1 = lose||loseko||partner,life<=0
value = 0

[State 0, SelfState]
type = SelfState
trigger1 =lose||loseko||partner,life<=0
value =5150


;--------------------------------------------------------------------------------
;enemy intro
[Statedef 11000]
physics=N
movetype=I

;fvar(0)=pos x
;fvar(1)=pos y
;fvar(2)=findway
;fvar(4)=hitend
;var(0)=type
;var(1)=stage
;var(2)=stagedoor
;var(3)=window
;var(4)=window
;var(5)=life
;var(9)=gunvar
;var(10)=anim
;var(12-13)=freez
;var(14)=fire
;var(15)=headshot
;var(16)=legshot
;var(18)=into type
;var(19)=boss var
;var(20)=sound flag

;-----------initialize

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = (helper(10000),var(0)=[4,5])||((helper(10000),var(0)=[20,29])&&helper(10000),var(40))
trigger1 = random<=50+30*(helper(10050),var(11)=4)+30*(helper(10051),var(11)=4)+30*(helper(10052),var(11)=4)+30*(helper(10053),var(11)=4)+30*(helper(10054),var(11)=4)+30*(helper(10055),var(11)=4)+30*(helper(10056),var(11)=4)+30*(helper(10057),var(11)=4)+30*(helper(10058),var(11)=4)
var(18)=1

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = (helper(10000),var(0)=[10,11]) || helper(10000),var(0)=13
trigger1 = random<=100+30*(helper(10050),var(11)=4)+30*(helper(10051),var(11)=4)+30*(helper(10052),var(11)=4)+30*(helper(10053),var(11)=4)+30*(helper(10054),var(11)=4)+30*(helper(10055),var(11)=4)+30*(helper(10056),var(11)=4)+30*(helper(10057),var(11)=4)+30*(helper(10058),var(11)=4)
var(18)=3

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = (helper(10000),var(0)=10 && helper(10000),fvar(0)<2000) || helper(10000),var(0)=11 || helper(10000),var(0)=15 || helper(10000),var(0)=16 || helper(10000),var(0)=23
trigger1 = random<=100+30*(helper(10050),var(11)=4)+30*(helper(10051),var(11)=4)+30*(helper(10052),var(11)=4)+30*(helper(10053),var(11)=4)+30*(helper(10054),var(11)=4)+30*(helper(10055),var(11)=4)+30*(helper(10056),var(11)=4)+30*(helper(10057),var(11)=4)+30*(helper(10058),var(11)=4)
var(18)=2

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = numhelper(10073) && helper(10073),var(15) && (helper(10073),time=11||helper(10073),time=14||helper(10073),time=21||helper(10073),time=24)
var(18)=4


[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger1 = ishelper(11100)
var(18)=helper(10000),var(18)

;----

[State 0, VarSet]
type = VarSet
trigger1 = !time && (var(18)=0||var(18)=2||var(18)=3)
trigger1 = helper(10000),var(0)=[1,7]
var(0)=(200+50*(random%2)+100*(random%2))*(helper(10000),var(0)=1||helper(10000),var(0)=[6,7])+(200+50*(random%2))*(helper(10000),var(0)=2)+(200+50*(random%2)+200*(random%2))*(helper(10000),var(0)=3)+(400+50*(random%2))*(helper(10000),var(0)=[4,5])

[State 0, VarSet]
type = VarSet
trigger1 = !time && (var(18)=0||var(18)=2||var(18)=3)
trigger1 = helper(10000),var(0)=[9,19]
var(0)=(200+50*(random%2)+300*(random%2))

[State 0, VarSet]
type = VarSet
trigger1 = !time && (var(18)=0||var(18)=2||var(18)=3)
trigger1 = helper(10000),var(0)=[20,29]
var(0)=(200+50*(random%2)-100*(random%2))*(helper(10000),var(0)=20||(helper(10000),var(0)=[25,27]))+(ifelse(random<=650,100,1200)+50*(random%2))*(helper(10000),var(0)=[21,22])+(200+50*(random%2)+400*(random%2))*(helper(10000),var(0)=[23,24])


[State 0, VarSet]
type = VarSet
trigger1 = !time && var(18)=1
var(0)=1500

[State 0, VarSet]
type = VarSet
trigger1 = !time && var(18)>=2000
var(0)=var(18)

;---

[State 0, VarSet]
type = VarSet
trigger1 = !time && var(0)<2000
var(5)=50+14*helper(10000),var(15)

[State 0, VarSet]
type = VarSet
trigger1 = !time && var(0)>=2000
var(5)=500+100*(var(0)=2000)+700*(var(0)=2100)+1000*(var(0)=2200)-150*(var(0)=2300)

;---

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(1)=helper(10000),var(0)

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(3)=-1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = !time && !var(18)
trigger1 = !numhelper(10050) && !numhelper(10051) && !numhelper(10052) && !numhelper(10053) && !numhelper(10054) && !numhelper(10055) && !numhelper(10056) && !numhelper(10057) && !numhelper(10058)



;------------secret room

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = helper(10000),var(42)>0 && !time
var(1)=3*(helper(10000),var(0)=7)+13*(helper(10000),var(0)=18)+20*(helper(10000),var(0)=27)

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = helper(10000),var(42)>0 && !time
fvar(0)=3200*(helper(10000),var(0)=7)+2000*(helper(10000),var(0)=18)+1400*(helper(10000),var(0)=27)

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = var(0)<2000
trigger1 = helper(10000),var(42)>0 && !time
var(17)=-1

[State 0, ChangeState]
type = ChangeState
triggerall = var(0)<2000
trigger1 = helper(10000),var(42)>0 && !time
value =11010


;------------generator

[State 0, VarSet]
type = VarSet
triggerall = var(18)=4
trigger1 = !time
fvar(0)=(130+helper(10073),fvar(0))*(helper(10073),time=11)+(-130+helper(10073),fvar(0))*(helper(10073),time=14)+(180+helper(10073),fvar(0))*(helper(10073),time=21)+(-180+helper(10073),fvar(0))*(helper(10073),time=24)

[State 0, VarSet]
type = VarSet
triggerall = var(18)=4
trigger1 = !time
var(0)=600+50*(random%2)

[State 0, VarSet]
type = VarSet
triggerall = var(18)=4
trigger1 = !time
var(10)=2

[State 0, parentVar]
type = parentVaradd
triggerall = var(18)=4
trigger1 = !time
var(17)=-1

[State 0, Explod]
type = explod 
triggerall = var(18)=4
trigger1 = !time
anim = 10446
ID = 10446
pos = 0,0
postype = p1
bindtime=-1
scale=1,1
sprpriority = -50
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, ChangeState]
type = ChangeState
triggerall = var(18)=4
trigger1 = time>=84
trigger2 = var(1)!=helper(10000),var(0)
value =11010


;------------jump down

[State 0, VarSet]
type = VarSet
triggerall = var(18)=2
trigger1 = !time
trigger1 = (helper(10000),var(0)=[9,19])||helper(10000),var(0)=23
fvar(0)=(860+930*(random%2))*(helper(10000),var(0)=10)+(1350+1020*(random%2))*(helper(10000),var(0)=11)+1825*(helper(10000),var(0)=15)+(690+790*(random%2))*(helper(10000),var(0)=16)+(580+1190*(random%2))*(helper(10000),var(0)=23)

[State 0, VarSet]
type = VarSet
triggerall = var(18)=2
trigger1 = !time
trigger1 = (helper(10000),var(0)=[9,19])||helper(10000),var(0)=23
fvar(1)=-110*(helper(10000),var(0)=10)-140*(helper(10000),var(0)=11)-165*(helper(10000),var(0)=15)-140*(helper(10000),var(0)=16)-105*(helper(10000),var(0)=23)

;------

[State 0, Turn]
type = Turn
triggerall = var(18)=2
trigger1 = facing=1

[State 0, VarAdd]
type = VarAdd
triggerall = var(18)=2
trigger1 = var(10)=0
fvar(0)=facing*(animelemtime(2)>0)

[State 0, parentVar]
type = parentVaradd
triggerall = var(18)=2
trigger1 = !time
var(17)=-1

[State 0, VarSet]
type = VarSet
triggerall = var(18)=2
trigger1 = var(10)=0 && time>=500-(random%150)
var(10)=7

[State 0, VarAdd]
type = VarAdd
triggerall = var(18)=2
trigger1 = var(10)=7 && animelemtime(9)>=0
fvar(1)=7

[State 0, VarSet]
type = VarSet
triggerall = var(18)=2
trigger1 = fvar(1)>0
trigger2 = var(1)!=helper(10000),var(0)
fvar(1)=0

[State 0, ChangeState]
type = ChangeState
triggerall = var(18)=2
trigger1 = var(10)=7 && fvar(1)>=0 && anim=var(10)+var(0)
trigger2 = var(1)!=helper(10000),var(0)
value =11010


;----------water

[State 0, VarSet]
type = VarSet
triggerall = var(18)=3 
trigger1 = var(1)=10
trigger1 = !time
var(3)=0*(helper(10000),fvar(0)<2000)+1*(helper(10000),fvar(0)>=2000)

[State 0, VarSet]
type = VarSet
triggerall = var(18)=3 
trigger1 = var(1)=11
trigger1 = !time
var(3)=(random%2)

[State 0, VarSet]
type = VarSet
triggerall = var(18)=3 
trigger1 = var(1)=13
trigger1 = !time
var(3)=(random%3)

;----

[State 0, VarSet]
type = VarSet
triggerall = var(18)=3 
trigger1 = !time
fvar(0)= helper(10110+var(3)),fvar(0)-30+(random%61)

[State 0, VarSet]
type = VarSet
triggerall = var(18)=3 
trigger1 = !time
fvar(1)=100

[State 0, parentVar]
type = parentVaradd
triggerall = var(18)=3 
trigger1 = !time
var(17)=-1

[State 0, VarAdd]
type = VarAdd
triggerall = var(18)=3
trigger1 = var(10)=7
fvar(1)=-3

[State 0, VarSet]
type = VarSet
triggerall = var(18)=3
trigger1 = !time
var(10)=7

[State 0, VarSet]
type = VarSet
triggerall = var(18)=3
trigger1 = var(10)=7 && animelemtime(9)>=3 && anim=var(10)+var(0)
trigger2 = var(1)!=helper(10000),var(0)
fvar(1)=0

[State 0, ChangeState]
type = ChangeState
triggerall = var(18)=3
trigger1 = var(10)=7 && animelemtime(9)>=3 && anim=var(10)+var(0)
trigger2 = var(1)!=helper(10000),var(0)
value =11010



;------------bosses

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = var(18)>=2000
triggerall = (var(0)=2300) && var(1)=helper(10000),var(0)
trigger1 = var(10)=6 && animelemtime(1)=3 &&anim=var(10)+var(0)
var(19)=-1

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(18)>=2000
triggerall = (var(0)=[2200,2300]) && var(1)=helper(10000),var(0)
trigger1 = var(10)=6 && animelemtime(1)=3 &&anim=var(10)+var(0)
value = S1,30

[State 0, EnvShake]
type = EnvShake
triggerall = var(18)>=2000
triggerall = (var(0)=[2200,2300]) && var(1)=helper(10000),var(0)
trigger1 = var(10)=6 && animelemtime(1)=3 &&anim=var(10)+var(0)
time = 10
freq = 90
ampl = 7

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(18)>=2000
triggerall = (var(0)=[2200,2300]) && var(1)=helper(10000),var(0)
trigger1 = var(10)=6 && animelemtime(1)=3 &&anim=var(10)+var(0)
value = S1,31

[State 0, Explod]
type = explod 
triggerall = var(18)>=2000
triggerall = (var(0)=[2200,2300]) && var(1)=helper(10000),var(0)
trigger1 = var(10)=6 && animelemtime(1)=10 &&anim=var(10)+var(0)
anim = 10466
ID = 10466
pos = 0,0
postype = p1
bindtime=-1
scale=2,2
sprpriority = 80
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
triggerall = var(18)>=2000
triggerall = (var(0)=[2200,2300]) && var(1)=helper(10000),var(0)
trigger1 = var(10)=6 && (animelemtime(1)=2||animelemtime(1)=10) &&anim=var(10)+var(0)
anim = 10467
ID = 10467
pos = 0,0
postype = p1
bindtime=-1
scale=2,2
sprpriority = 70
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, AngleDraw]
type = AngleDraw
triggerall = var(18)>=2000
trigger1 =  var(0)=2100 && !(var(10)=6 && !animtime && anim=var(10)+var(0))
scale = 1.6,1.6

[State 0, VarSet]
type = VarSet
triggerall = var(18)>=2000
trigger1 = !time
var(1)= 3*(var(0)=2000)+ifelse(!numhelper(11100),11,ifelse(numhelper(11100)=1,11,17))*(var(0)=2100)+26*(var(0)=2200)+helper(10000),var(0)*(var(0)=2300)

[State 0, VarSet]
type = VarSet
triggerall = var(18)>=2000
trigger1 = !time
fvar(0)= 4160*(var(0)=2000)+1500*(var(0)=2100)+1200*(var(0)=2200)+(helper(10000),fvar(0)+ifelse(random<500,-100+(random%120),280+(random%120)))*(var(0)=2300)

;---

[State 0, VarSet]
type = VarSet
triggerall = var(18)>=2000
trigger1 = !time
var(10)=6

[State 0, VarSet]
type = VarSet
triggerall = var(18)>=2000
trigger1 = var(10)=6 && !animtime && anim=var(10)+var(0)
var(10)=0

[State 0, ChangeState]
type = ChangeState
triggerall = var(18)>=2000
trigger1 = var(10)=0
value =11010


;-----------wall

[State 0, VarSet]
type = VarSet
triggerall = var(18)=1
trigger1 = !time && (helper(10000),var(0)=[4,5])
fvar(0)= ifelse(random<=200,575,ifelse(random<=200,2166,ifelse(random<=200,1780,ifelse(random<=200,2530,860))))*(helper(10000),var(0)=4)+ifelse(random<=200,460,ifelse(random<=200,1340,ifelse(random<=200,2060,ifelse(random<=200,1570,330))))*(helper(10000),var(0)=5)

[State 0, VarSet]
type = VarSet
triggerall = var(18)=1
trigger1 = !time && (helper(10000),var(0)=[20,21])
fvar(0)= ifelse(random<=200,1010,ifelse(random<=200,1690,ifelse(random<=200,2560,ifelse(random<=200,2260,1200))))*(helper(10000),var(0)=20)+ifelse(random<=200,420,ifelse(random<=200,2020,ifelse(random<=200,1615,ifelse(random<=200,820,1810))))*(helper(10000),var(0)=21)

[State 0, VarSet]
type = VarSet
triggerall = var(18)=1
trigger1 = !time && (helper(10000),var(0)=[22,23])
fvar(0)= ifelse(random<=200,480,ifelse(random<=200,1680,ifelse(random<=200,870,ifelse(random<=200,1820,1180))))*(helper(10000),var(0)=22)+ifelse(random<=200,620,ifelse(random<=200,300,ifelse(random<=200,1640,ifelse(random<=200,720,1150))))*(helper(10000),var(0)=23)

[State 0, VarSet]
type = VarSet
triggerall = var(18)=1
trigger1 = !time && (helper(10000),var(0)=[24,25])
fvar(0)= ifelse(random<=200,680,ifelse(random<=200,1780,ifelse(random<=200,1160,ifelse(random<=200,1490,850))))*(helper(10000),var(0)=24)+ifelse(random<=200,540,ifelse(random<=200,3050,ifelse(random<=200,1410,ifelse(random<=200,770,2525))))*(helper(10000),var(0)=25)


[State 0, VarSet]
type = VarSet
triggerall = var(18)=1
trigger1 = !time && (helper(10000),var(0)=[26,27])
fvar(0)= ifelse(random<=200,450,ifelse(random<=200,2690,ifelse(random<=200,900,ifelse(random<=200,1750,2355))))*(helper(10000),var(0)=26)+ifelse(random<=200,420,ifelse(random<=200,1200,ifelse(random<=200,660,ifelse(random<=200,1100,490))))*(helper(10000),var(0)=27)


;---

[State 0, parentVar]
type = parentVaradd
triggerall = var(18)=1
trigger1 = !time
var(17)=-1

[State 0, VarSet]
type = VarSet
triggerall = var(18)=1
trigger1 = !time
var(10)=6

[State 0, VarSet]
type = VarSet
triggerall = var(18)=1
trigger1 = var(10)=6 && !animtime && anim=var(10)+var(0)
var(10)=7

[State 0, ChangeState]
type = ChangeState
triggerall = var(18)=1
trigger1 = var(10)=7 && !animtime && anim=var(10)+var(0)
trigger2 = var(1)!=helper(10000),var(0)
value =11010


;----------window

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(1)=1
trigger1 = var(3)=-1 && random<=6
var(3)=ifelse(helper(20100),var(10)!=20100,(random%3),(random%2))*(helper(10000),fvar(0)<1890)+(2+(random%4))*(helper(10000),fvar(0)=[1890,4828])+ifelse(helper(20102),var(10)!=20100,5+(random%3),6+(random%2))*(helper(10000),fvar(0)>4828)

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(1)=2||(var(1)=[5,7])||(var(1)=[12,14])||(var(1)=18)||(var(1)=22)||(var(1)=[24,25])||(var(1)=27)
trigger1 = var(3)=-1 && random<=6
var(3)=(random%2)

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(1)=3
trigger1 = var(3)=-1 && random<=6
var(3)=ifelse(helper(20305),var(10)!=20305,(random%3),(random%2))*(helper(10000),fvar(0)<2695)+ifelse(helper(20305),var(10)!=20305,1+(random%3),2+(random%2))*(helper(10000),fvar(0)>=2695)

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(1)=4||var(1)=9
trigger1 = var(3)=-1 && random<=6
var(3)=(random%4)

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(1)=10
trigger1 = var(3)=-1 && random<=6
var(3)=(random%2)*(helper(10000),fvar(0)<2000)+2*(helper(10000),fvar(0)>=2000)

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(1)=15
trigger1 = var(3)=-1 && random<=6
var(3)=0

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(1)=17||var(1)=20||var(1)=26
trigger1 = var(3)=-1 && random<=6
var(3)=(random%3)

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(1)=21
trigger1 = var(3)=-1 && random<=6
var(3)=(random%2)*(helper(10000),fvar(0)<1080)+(2+(random%2))*(helper(10000),fvar(0)>=1080)



;----

[State 0, DestroySelf]
type = DestroySelf
triggerall = !var(18) 
trigger1 = var(3)!=-1 && var(10)=0 && (helper(10000),var(20+var(3))>=1+(helper(10000),var(15)>=4)+(helper(10000),var(15)>=10)+(helper(10000),var(15)>=20)+(helper(10000),var(15)>=30) || helper(10000),var(17)<=0)
trigger2 = var(3)=-1 && var(1)!=helper(10000),var(0)

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(3)!=-1 && var(10)=0
fvar(0)= helper(10050+var(3)),fvar(0)-170+(random%41)

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(3)!=-1 && var(10)=0
fvar(1)=-20

[State 0, parentVar]
type = parentVaradd
triggerall = !var(18) 
trigger1 = var(3)!=-1
trigger1 = var(10)=0
var(17)=-1

[State 0, parentVar]
type = parentVaradd
triggerall = !var(18) 
trigger1 = var(3)!=-1
trigger1 = var(10)=0
var(20+var(3))=1

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(3)!=-1
trigger1 = var(10)=0
var(10)=1

[State 0, parentVaradd]
type = parentVaradd
triggerall = !var(18) 
trigger1 = var(10)=6 && var(4)>=75+180
var(20+var(3))=20

[State 0, VarAdd]
type = VarAdd
triggerall = !var(18) 
trigger1 = var(10)!=0
var(4)=1-(180+1)*(var(4)>=75+180)

[State 0, VarAdd]
type = VarAdd
triggerall = !var(18) 
trigger1 = var(10)=1
fvar(0)=facing*2

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(10)=1 && var(4)>=75
var(10)=6

[State 0, PlaySnd]
type = PlaySnd
triggerall = !var(18) 
trigger1 = var(10)=6 && animelem=3
value = S1,5

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(10)=6 && helper(10050+var(3)),var(11)=4
var(10)=7


[State 0, parentVar]
type = parentVaradd
triggerall = !var(18) 
triggerall = var(3)!=-1 && helper(10000),var(20+var(3))>0
trigger1 = var(10)=7 && animelemtime(9)>=3 && anim=var(10)+var(0)
var(20+var(3))=-1

[State 0, VarSet]
type = VarSet
triggerall = !var(18) 
trigger1 = var(1)!=helper(10000),var(0)
trigger2 = var(10)=7 && animelemtime(9)>=3 && anim=var(10)+var(0)
fvar(1)=0

[State 0, ChangeState]
type = ChangeState
triggerall = !var(18) 
trigger1 = var(1)!=helper(10000),var(0)
trigger2 = var(10)=7 && animelemtime(9)>=3 && anim=var(10)+var(0)
value =11010

;---------------sounds

[State 0, StopSnd]
type = StopSnd
trigger1 = var(1)!=helper(10000),var(0)
channel = 4

[State 0, VarSet]
type = VarSet
triggerall = var(0)<1600
trigger1 = helper(10000),var(15)>=2
trigger1 = var(20)=0 && (var(10)!=0||var(18)=2) && random<=1+1*(helper(10000),var(15)>=5)
var(20)=1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(20)>0
var(20)=1-(900+1)*(var(20)>=900)

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(20)=2||((var(20)=302||var(20)=602) && var(0)<1200)
value = S15,(random%9)*(var(0)<1200)+(22+(random%3))*(var(0)>=1200 && var(0)<1500)+(85+(random%5))*(var(0)=[1500,1550])
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
triggerall = var(0)<1600
trigger1 = var(20)=0 && (var(10)!=0||var(18)=2) && random=1
value = S15,(50+(random%27))*(var(0)<1200)+(21+(random%14))*(var(0)>=1200 && var(0)<1500)+(80+(random%5))*(var(0)=[1500,1550])
channel = 4



[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
triggerall = var(0)=2000
trigger1 = var(10)=6 && animelem=2 && anim=var(10)+var(0)
value = S4,14


;----system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -150+100*((var(10)=7 && anim=var(0)+var(10) && animelemtime(5)>=0)||(var(18)!=0&&var(18)!=2&&var(18)!=4))-500*(var(1)!=helper(10000),var(0))

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 11015
time = -1

[State 0, StopSnd]
type = StopSnd
trigger1 = helper(10000),stateno!=10010
channel = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = var(1)!=helper(10000),var(0)
trigger3 = var(1)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = var(1)=0



;--------------------------------------------------------------------------------
;enemy
[Statedef 11010]
physics=N
movetype = I

;---------find the way

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=1
fvar(2)=(620*(helper(10000),var(0)=2||(((helper(10000),var(0)=[3,5])||helper(10000),var(0)=7)&&fvar(0)<3400)) + 5840*(helper(10000),var(0)=6||(((helper(10000),var(0)=[3,5])||helper(10000),var(0)=7)&&fvar(0)>=3400)))*(var(1)=1)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=2||var(1)=5
fvar(2)=(300*(helper(10000),var(0)=3||(helper(10000),var(0)=[6,7])) + 1850*(helper(10000),var(0)=1) + 3320*(helper(10000),var(0)=[4,5]))*(var(1)=2) + (390*(fvar(0)<1200)+2000*(fvar(0)>=1200))*(var(1)=5)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=3
fvar(2)=(300*(helper(10000),var(0)=6) + 1480*((helper(10000),var(0)=[1,2])&&fvar(0)<3030) + 3340*(helper(10000),var(0)=7) + 4590*((helper(10000),var(0)=[1,2])&&fvar(0)>=3030) + 5480*(helper(10000),var(0)=[4,5]))*(var(1)=3)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=4||var(1)=6||var(1)=7
fvar(2)=(500*(helper(10000),var(0)=5&&fvar(0)<1500) + 1440*(helper(10000),var(0)!=5) + 2505*(helper(10000),var(0)=5&&fvar(0)>=1500))*(var(1)=4) + (350*(helper(10000),var(0)=1)+1150*(helper(10000),var(0)!=1))*(var(1)=6)+1360*(var(1)=7)






[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=9
fvar(2)=(1822*((helper(10000),var(0)=[11,12])||helper(10000),var(0)=14) + 2410*(helper(10000),var(0)=10||helper(10000),var(0)=13||(helper(10000),var(0)=[15,18])))*(var(1)=9)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=10
fvar(2)=(270*(helper(10000),var(0)=9||(helper(10000),var(0)=[11,12])) + 905*(helper(10000),var(0)=[14,17]) + 3740*(helper(10000),var(0)=13||helper(10000),var(0)=18))*(var(1)=10)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=11
fvar(2)=(270*((helper(10000),var(0)=[9,10])||helper(10000),var(0)=13||(helper(10000),var(0)=[15,16])||helper(10000),var(0)=18) + 2012*(helper(10000),var(0)=12||helper(10000),var(0)=14||helper(10000),var(0)=17))*(var(1)=11)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=12||var(1)=16||var(1)=18
fvar(2)=(530*(helper(10000),var(0)=[13,18]) + 2520*(helper(10000),var(0)=[9,11]))*(var(1)=12) + 1430*(var(1)=16) + 960*(var(1)=18)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=13
fvar(2)=(280*((helper(10000),var(0)=[9,11])||(helper(10000),var(0)=[15,16])) + 2100*(helper(10000),var(0)=18) + 3410*(helper(10000),var(0)=12||helper(10000),var(0)=14||helper(10000),var(0)=17))*(var(1)=13)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=14
fvar(2)=(430*(helper(10000),var(0)=13||helper(10000),var(0)=18) + 2055*(helper(10000),var(0)=10||(helper(10000),var(0)=[15,17])) + 3270*(helper(10000),var(0)=9||(helper(10000),var(0)=[11,12])))*(var(1)=14)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=15
fvar(2)=(305*(helper(10000),var(0)=12||helper(10000),var(0)=14||helper(10000),var(0)=17) + 1555*(helper(10000),var(0)=16) + 1800*((helper(10000),var(0)=[9,11])||helper(10000),var(0)=13||helper(10000),var(0)=18))*(var(1)=15)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=17
fvar(2)=(265*((helper(10000),var(0)=[11,14])||helper(10000),var(0)=18) + 2180*((helper(10000),var(0)=[9,10])||(helper(10000),var(0)=[15,16])))*(var(1)=17)




[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=20
fvar(2)=(700*(helper(10000),var(0)=[23,24]) + 1530*(helper(10000),var(0)=27) + 2140*(helper(10000),var(0)=[25,26]) + 2835*(helper(10000),var(0)=[21,22]))*(var(1)=20)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=21
fvar(2)=(340*(helper(10000),var(0)=20||helper(10000),var(0)=23||(helper(10000),var(0)=[26,27])) + 2590*(helper(10000),var(0)=22||(helper(10000),var(0)=[24,25])))*(var(1)=21)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=22||var(1)=27
fvar(2)=(390*((helper(10000),var(0)=[20,21])||helper(10000),var(0)=27) + 1550*(helper(10000),var(0)=[23,26]))*(var(1)=22) + 1270*(var(1)=27)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=23
fvar(2)=(250*((helper(10000),var(0)=[20,21])||(helper(10000),var(0)=[26,27])) + 1835*((helper(10000),var(0)=[24,25])||helper(10000),var(0)=22))*(var(1)=23)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=24
fvar(2)=(980*(helper(10000),var(0)=20||helper(10000),var(0)=23||helper(10000),var(0)=27) + 2080*((helper(10000),var(0)=[21,22])||(helper(10000),var(0)=[25,26])))*(var(1)=24)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=25
fvar(2)=(250*(helper(10000),var(0)=[21,22]) + 900*(helper(10000),var(0)=20||(helper(10000),var(0)=[26,27])) + 3480*(helper(10000),var(0)=[23,24]))*(var(1)=25)

[State 0, VarSet]
type = VarSet
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = var(1)=26
fvar(2)=(280*((helper(10000),var(0)=[20,21])||helper(10000),var(0)=23||helper(10000),var(0)=27) + 2820*(helper(10000),var(0)=22||(helper(10000),var(0)=[24,25])))*(var(1)=26)




;---------teleport

[State 0, VarSet]
type = VarSet
trigger1 = numhelper(10071) && var(1)=helper(10000),var(0) && helper(10071),var(15) && !(var(0)=2000)
trigger1 = var(1)=1||var(1)=3||var(1)=5 || var(1)=11||var(1)=13||var(1)=17 || var(1)=21||var(1)=23||var(1)=26
fvar(2)=3590*(var(1)=1)+4160*(var(1)=3)+1475*(var(1)=5) + 1464*(var(1)=11)+1970*(var(1)=13)+1154*(var(1)=17) + 740*(var(1)=21)+1274*(var(1)=23)+1895*(var(1)=26)

;---

[State 0, PlaySnd]
type = PlaySnd
trigger1 = (fvar(0)-fvar(2)=[-10,10]) && numhelper(10071) && var(1)=helper(10000),var(0) && helper(10071),var(15) && !(var(0)=2000)
trigger2 = var(1)=helper(10000),var(0) && var(0)=2000 && var(10)=6 && animelem=2 && anim=var(10)+var(0)
value = S4,14

[State 0, Explod]
type = explod 
triggerall = fvar(0)-fvar(2)=[-10,10]
trigger1 = numhelper(10071) && var(1)=helper(10000),var(0) && helper(10071),var(15) && !(var(0)=2000)
anim = 10028
ID = 10028
pos = 0,-50
postype = p1
bindtime=-1
scale=1,1
sprpriority = 50
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Turn]
type = Turn
triggerall = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger1 = ((fvar(0)<fvar(2))&&facing=-1)||((fvar(0)>fvar(2))&&facing=1)

[State 0, ChangeState]
type = ChangeState
triggerall = fvar(0)-fvar(2)=[-10,10]
trigger1 = var(1)!=helper(10000),var(0) && helper(10000),var(0) && !(var(0)=2000 && var(10)=1)
trigger2 = numhelper(10071) && var(1)=helper(10000),var(0) && helper(10071),var(15) && !(var(0)=2000)
value =11020

;--------attack moves

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
triggerall = !(helper(10000),var(59)>0)
triggerall = !(var(1)=helper(10000),var(0) && numhelper(10080) && helper(10080),var(12)=3 && helper(10080),time<=600)
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)<=4 && (p2dist x=[20,70+10*(enemy(0),vel x)*ifelse(facing!=enemy(0),facing,1,-1)])
var(10)=10

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
triggerall = !(helper(10000),var(59)>0)
triggerall = !(var(1)=helper(10000),var(0) && numhelper(10080) && helper(10080),var(12)=3 && helper(10080),time<=600)
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=21 && (p2dist x=[20,50+10*(enemy(0),vel x)*ifelse(facing!=enemy(0),facing,1,-1)])
var(10)=22



;-------hit

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(0)<2000
triggerall = var(1)=helper(10000),var(0)
trigger1 = ((var(10)=10 && animelem=4)||(var(10)=22 && animelem=3)) && anim=var(10)+var(0) && helper(10000),fvar(6)=0
trigger1 = (p2dist x=[10,80]) &&(p2dist y>=-60+40*(var(10)=22||(var(0)=[1500,1550])))
value = S7,(random%2)

[State 0, EnvShake]
type = EnvShake
triggerall = var(0)<2000
triggerall = var(1)=helper(10000),var(0)
trigger1 = ((var(10)=10 && animelem=4)||(var(10)=22 && animelem=3)) && anim=var(10)+var(0) && helper(10000),fvar(6)=0
trigger1 = (p2dist x=[10,80]) &&(p2dist y>=-60+40*(var(10)=22||(var(0)=[1500,1550])))
time = 7
freq = 70
ampl = 15

[State 0, Explod]
type = explod
triggerall = var(0)<2000 
triggerall = var(1)=helper(10000),var(0)
trigger1 = ((var(10)=10 && animelem=4)||(var(10)=22 && animelem=3)) && anim=var(10)+var(0) && helper(10000),fvar(6)=0
trigger1 = (p2dist x=[10,80]) &&(p2dist y>=-60+40*(var(10)=22||(var(0)=[1500,1550])))
anim = 10434
ID = 10431
pos = -10+(random%20),-70+45*(var(10)=22||(var(0)=[1500,1550]))
postype = p2
bindtime=-1
scale=0.8,0.8
sprpriority = 250
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, 0]
type = ParentVarset
triggerall = var(0)<2000
triggerall = var(1)=helper(10000),var(0)
trigger1 = ((var(10)=10 && animelem=4)||(var(10)=22 && animelem=3)) && anim=var(10)+var(0) && helper(10000),fvar(6)=0
trigger1 = (p2dist x=[10,80]) &&(p2dist y>=-60+40*(var(10)=22||(var(0)=[1500,1550])))
fvar(6)=-18+8*(var(10)=22)


;------normal moves

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
triggerall = (helper(10000),fvar(4)<=0)
triggerall = !(helper(10000),var(59)>0)
triggerall = !(var(1)=helper(10000),var(0) && numhelper(10080) && helper(10080),var(12)=3 && helper(10080),time<=600)
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)<=4 && p2dist x<-50
var(10)=5

[State 0, Turn]
type = Turn
triggerall = var(0)<2000
triggerall = (helper(10000),fvar(4)<=0)
triggerall = !(helper(10000),var(59)>0)
triggerall = !(var(1)=helper(10000),var(0) && numhelper(10080) && helper(10080),var(12)=3 && helper(10080),time<=600)
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=5 && !animtime && anim=var(10)+var(0)
trigger2 = var(10)=21 && p2dist x<-50

[State 0, Turn]
type = Turn
triggerall = var(0)<2000
triggerall = (helper(10000),fvar(4)>0)
triggerall = !(var(1)=helper(10000),var(0) && numhelper(10080) && helper(10080),var(12)=3 && helper(10080),time<=600)
triggerall = var(1)=helper(10000),var(0)
trigger1 = p2dist x>0



[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = !time && (var(10)!=[0,4])
trigger2 = var(10)=5 && !animtime && anim=var(10)+var(0)
trigger3 = var(10)=10 && !animtime && anim=var(10)+var(0)
trigger4 = var(10)=22 && !animtime && anim=var(10)+var(0)
var(10)=ifelse(var(10)<20,  (random<=ifelse(helper(10000),var(15)<25,30*helper(10000),var(15),750))+(random<=ifelse(helper(10000),var(15)<25,30*helper(10000),var(15),750))+(random<=ifelse(helper(10000),var(15)<25,30*helper(10000),var(15),750))    ,21)

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = var(10)=0 && var(1)!=helper(10000),var(0)
var(10)=1


[State 0, VarAdd]
type = VarAdd
triggerall = var(0)<2000
trigger1 = var(10)<=4 && helper(10000),var(0)
fvar(0)=facing*((1*(var(10)=0)+1.5*(var(10)=1)+2*(var(10)=2)+3*(var(10)=3) -1 + 0.1*(random%21)) * !(var(10)=0 && animelemtime(2)<=0))*(1-0.85*(helper(10000),fvar(4)>0||helper(10000),var(59)>0))

[State 0, VarAdd]
type = VarAdd
triggerall = var(0)<2000
trigger1 = var(10)=21 && helper(10000),var(0)
fvar(0)=facing*(2*(animelemtime(3)>=0))*(1-0.85*(helper(10000),fvar(4)>0||helper(10000),var(59)>0))



;------------bosses

;------dogs

[State 0, Var]
type = Varset
triggerall = var(0)=2300
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(10)=0) && (p2dist x=[10,160]) && anim=var(10)+var(0) && animelem=6
var(10)=10

[State 0, VarSet]
type = Varset
triggerall = var(0)=2300
trigger1 = var(10)=10 && anim=var(10)+var(0) && !animtime
var(10)=0

[State 0, Turn]
type = Turn
triggerall = var(0)=2300
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(10)=0) && p2dist x<-160 && random<=15 && helper(10000),fvar(4)<=0
trigger2 = p2dist x>0 && helper(10000),fvar(4)>0

[State 0, VarAdd]
type = VarAdd
triggerall = var(0)=2300
trigger1 = (var(10)=0||var(10)=10) && helper(10000),var(0)
fvar(0)=facing*4*(1-0.85*(helper(10000),fvar(4)>0))



[State 0, PlaySnd]
type = PlaySnd
triggerall = var(0)=2300
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(10)=10 && animelem=4) && anim=var(10)+var(0) && helper(10000),fvar(6)=0
trigger1 = (p2dist x=[-40,90]) && p2dist y>=-70
value = S7,(random%2)

[State 0, EnvShake]
type = EnvShake
triggerall = var(0)=2300
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(10)=10 && animelem=4) && anim=var(10)+var(0) && helper(10000),fvar(6)=0
trigger1 = (p2dist x=[-40,90]) && p2dist y>=-70
time = 7
freq = 70
ampl = 15

[State 0, Explod]
type = explod
triggerall = var(0)=2300
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(10)=10 && animelem=4) && anim=var(10)+var(0) && helper(10000),fvar(6)=0
trigger1 = (p2dist x=[-40,90]) && p2dist y>=-70
anim = 10434
ID = 10431
pos = -10+(random%20),-60
postype = p2
bindtime=-1
scale=0.8,0.8
sprpriority = 250
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, 0]
type = ParentVarset
triggerall = var(0)=2300
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(10)=10 && animelem=4) && anim=var(10)+var(0) && helper(10000),fvar(6)=0
trigger1 = (p2dist x=[-40,90]) && p2dist y>=-70
fvar(6)=-18




;------george romero

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(0)=2200
id = 10465

[State 0, Explod]
type = explod
trigger1 = var(1)=helper(10000),var(0)
trigger1 = var(0)=2200
trigger1 = ((var(10)=[0,1])||var(10)=5) &&anim=var(10)+var(0)
anim = 10465
ID = 10465
pos = 5*(var(10)=0)-57*(var(10)=1)-34*(var(10)=5&&animelemtime(2)<0)-81*(var(10)=5&&animelemtime(2)>=0),-8*(var(10)=0)-105*(var(10)=1)-112*(var(10)=5&&animelemtime(2)<0)-132*(var(10)=5&&animelemtime(2)>=0)
postype = p1
bindtime=-1
scale=2,2
sprpriority = 40
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Var]
type = Varadd
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(10)=[0,1]) && (p2dist x=[10,60])
var(10)=10

[State 0, VarSet]
type = Varadd
triggerall = var(0)=2200
trigger1 = var(10)=10 && anim=var(10)+var(0) && !animtime && !var(9)
trigger2 = var(10)=11 && anim=var(10)+var(0) && (!animtime || ((animelem=8||animelem=14) && !(p2dist x=[10,130])))
var(10)=-10

[State 0, VarAdd]
type = VarAdd
triggerall = var(0)=2200
trigger1 = (var(10)=[0,1]) && helper(10000),var(0)
fvar(0)=facing*(1*(var(10)=0)+5*(var(10)=1)+1*(var(1)!=helper(10000),var(0)))*!(var(10)=0 && animelemtime(2)<=0 && var(1)=helper(10000),var(0))*(1-0.85*(helper(10000),fvar(4)>0))

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2200
trigger1 = !time && prevstateno=11015 && (var(10)=0||var(10)=10)
trigger2 = var(10)=10 && anim=var(10)+var(0) && !animtime && var(9)
var(10)=5

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2200
trigger1 = var(10)=5
var(9)=0

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2200
trigger1 = var(10)=5 && anim=var(10)+var(0) && !animtime
var(10)=1

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2200
trigger1 = var(1)!=helper(10000),var(0) && var(10)=1
var(10)=0

[State 0, Turn]
type = Turn
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(10)=[0,1]) && p2dist x<-50 && helper(10000),fvar(4)<=0
trigger2 = var(10)=11 && p2dist x<0 && helper(10000),fvar(4)<=0
trigger3 = p2dist x>0 && helper(10000),fvar(4)>0


[State 0, Explod]
type = explod 
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
triggerall = var(10)=5
trigger1 = (time%40)=1
anim = 10412
ID = 10412
pos = 0,120
postype = p1
bindtime=-1
scale=2.5,2.5
facing=-1
sprpriority = 45
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, EnvShake]
type = EnvShake
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
triggerall = var(10)=5 && animelemtime(5)>=0 && anim=var(10)+var(0)
trigger1 = (time%3)=1
time = 4
freq = 70
ampl = 15

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=5 && animelemtime(5)>=0 && anim=var(10)+var(0)
fvar(0)=-ifelse(enemy(0),vel x<5,enemy(0),vel x,5)*(enemy(0),facing)*(1+0.7*(helper(10000),var(32)!=0))*0.9

[State 0, Explod]
type = explod
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=5 && animelemtime(5)>=0 && anim=var(10)+var(0)
anim = 10468
ID = 10465
pos = 0,0
postype =back
bindtime=-1
removetime=-1
scale=1,1
sprpriority = 1000+1
supermovetime=9999
pausemovetime=9999
ownpal=1



[State 0, VarSet]
type = VarSet
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(10)=10 && animelem=5) && anim=var(10)+var(0)
trigger1 = (p2dist x=[10,130]) &&(p2dist y>=-75)
var(9)=1

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = ((var(10)=10 && animelem=5)||(var(10)=11 && (animelem=5||animelem=9||animelem=17))) && anim=var(10)+var(0)
trigger1 = (p2dist x=[10,130]) &&(p2dist y>=-75)
fvar(5)=-11

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = ((var(10)=10 && animelem=5)||(var(10)=11 && (animelem=5||animelem=9||animelem=17))) && anim=var(10)+var(0)
trigger1 = (p2dist x=[10,130]) &&(p2dist y>=-75)
value = S1,29

[State 0, EnvShake]
type = EnvShake
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = ((var(10)=10 && animelem=5)||(var(10)=11 && (animelem=5||animelem=9||animelem=17))) && anim=var(10)+var(0)
trigger1 = (p2dist x=[10,130]) &&(p2dist y>=-75)
time = 7
freq = 70
ampl = 15

[State 0, Explod]
type = explod
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = ((var(10)=10 && animelem=5)||(var(10)=11 && (animelem=5||animelem=9||animelem=17))) && anim=var(10)+var(0)
trigger1 = (p2dist x=[10,130]) &&(p2dist y>=-75)
anim = 10421
ID = 10421
pos = 0,-60
postype = p2
bindtime=-1
scale=1.5,1.5
sprpriority = 50
pausemovetime=999
supermovetime=999
ownpal=1


[State 0, Explod]
type = explod
triggerall = var(0)=2200
triggerall = var(1)=helper(10000),var(0)
trigger1 = ((var(10)=[0,1]) && animelemtime(1)=2) && anim=var(10)+var(0)
anim = 10421
ID = 10422
pos = 20*(var(10)=0)-29*(var(10)=1),-15*(var(10)=0)-105*(var(10)=1)
postype = p1
bindtime=-1
scale=1,0.8
sprpriority = 30
pausemovetime=999
supermovetime=999
ownpal=1


;------panzersoldier

[State 0, AngleDraw]
type = AngleDraw
trigger1 =  var(0)=2100
scale = 1.6,1.6

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2100
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=0 && (p2dist x=[10,130])
var(10)=10

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2100
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=0 && (p2dist x>130) && random<=6
var(10)=11

[State 0, Helper]
type = Helper
triggerall = var(0)=2100
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=10 && anim=var(10)+var(0) && animelem=2
helpertype = normal
name = "o"
ID = 10080
stateno = 10080
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Helper]
type = Helper
triggerall = var(0)=2100
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=11 && anim=var(10)+var(0) && (animelem=3||animelem=4||animelem=5||animelem=6||animelem=7)
helpertype = normal
name = "o"
ID = 10084
stateno = 10084
pos = 0,0
postype = p1
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2100
trigger1 = (var(10)=[10,12]) && anim=var(10)+var(0) && !animtime
var(10)=0

[State 0, VarAdd]
type = VarAdd
triggerall = var(0)=2100
trigger1 = var(10)=0 && helper(10000),var(0)
fvar(0)=facing*4*(1-0.85*(helper(10000),fvar(4)>0))

[State 0, Turn]
type = Turn
triggerall = var(0)=2100
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=0 && p2dist x<-50 && helper(10000),fvar(4)<=0
trigger2 = p2dist x>0 && helper(10000),fvar(4)>0

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = var(0)=2100
trigger1 = var(9)!=0
fvar(5)=var(9)

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2100
trigger1 = var(9)!=0
var(9)=0

;------pentagon thief

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2000
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=0 && (p2dist x=[10,60]) && p2dist y>=-60 && time>=2
var(10)=10

[State 0, AllPalFX]
type = AllPalFX
triggerall = var(0)=2000
trigger1 = var(10)=10 && anim=var(10)+var(0) && animelemtime(1)>=70 && animelemtime(2)<20
time = 1
add = -15*(animelemtime(1)-70),-15*(animelemtime(1)-70),-15*(animelemtime(1)-70)

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2000
trigger1 = var(10)=10 && anim=var(10)+var(0) && animelem=2
fvar(0)=1750

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2000
trigger1 = var(10)=10 && anim=var(10)+var(0) && animelem=2
var(1)=5

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = var(0)=2000
trigger1 = var(10)=10 && anim=var(10)+var(0) && animelemtime(2)>=-5
var(0)=5*(animelemtime(2)>=0)

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = var(0)=2000
trigger1 = var(10)=10 && anim=var(10)+var(0) && animelemtime(2)>=0
fvar(0)=1700

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2000
trigger1 = var(10)=10 && anim=var(10)+var(0) && animelem=2
var(19)=helper(10000),var(2)

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = var(0)=2000
trigger1 = var(10)=10 && anim=var(10)+var(0) && animelem=2
var(2)=0

[State 0, 0]
type = parentVarAdd
triggerall = var(0)=2000
trigger1 = var(10)=10
fvar(0)=-ifelse(enemy(0),vel x<5,enemy(0),vel x,5)*(enemy(0),facing)*(1+0.7*(helper(10000),var(32)!=0))

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2000
trigger1 = var(10)=10 && anim=var(10)+var(0) && !animtime
var(10)=1

[State 0, Turn]
type = Turn
triggerall = var(0)=2000
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=0 && p2dist x<-50
trigger2 = var(10)=10 && anim=var(10)+var(0) && animelem=3 && facing=1
trigger3 = var(10)=1 && (((fvar(0)<fvar(2))&&facing=-1)||((fvar(0)>fvar(2))&&facing=1))

[State 0, VarAdd]
type = VarAdd
triggerall = var(0)=2000 && helper(10000),var(0)
trigger1 = !(var(10)=10 && anim=var(10)+var(0) && animelemtime(3)<0)
fvar(0)=facing*3.2

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2000
trigger1 = var(10)=1
fvar(2)=1360*(var(1)=7)+350*(var(1)=6)+390*(var(1)=5)+1440*(var(1)=4)+300*(var(1)=3)+3320*(var(1)=2)+3590*(var(1)=1)

[State 0, VarSet]
type = VarSet
triggerall = var(0)=2000
trigger1 = (fvar(0)-fvar(2)=[-10,10]) && var(1)=1
trigger1 = var(10)=1
var(10)=6

[State 0, Explod]
type = explod
trigger1 = var(1)=helper(10000),var(0)
trigger1 = var(0)=2000
anim = 10440+(random%6)
ID = 10440
pos = -25+(random%65),-45-(random%45)
postype = p1
bindtime=-1
scale=1,1
sprpriority = 50
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, ChangeState]
type = ChangeState
triggerall = var(0)=2000
trigger1 = (fvar(0)-fvar(2)=[-10,10])
trigger1 = var(10)=1
value =11020

[State 0, DestroySelf]
type = DestroySelf
triggerall = var(0)=2000
trigger1 = var(10)=6 && anim=var(10)+var(0) && !animtime


;------mine

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = var(1)=helper(10000),var(0) && numhelper(10090) && helper(10090),var(15) && (helper(10090),facing*(fvar(0)-helper(10090),fvar(0))=[-10,10])
var(45)=1

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = var(1)=helper(10000),var(0) && numhelper(10091) && helper(10091),var(15) && (helper(10091),facing*(fvar(0)-helper(10091),fvar(0))=[-10,10])
var(46)=1

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = var(1)=helper(10000),var(0) && numhelper(10092) && helper(10092),var(15) && (helper(10092),facing*(fvar(0)-helper(10092),fvar(0))=[-10,10])
var(47)=1

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = var(1)=helper(10000),var(0) && numhelper(10093) && helper(10093),var(15) && (helper(10093),facing*(fvar(0)-helper(10093),fvar(0))=[-10,10])
var(48)=1

;-----toy

[State 0, Turn]
type = Turn
triggerall = var(0)<2000
triggerall = var(1)=helper(10000),var(0) && numhelper(10080) && helper(10080),var(12)=3 && helper(10080),time<=600
trigger1 = var(1)=helper(10000),var(0)
trigger1 = facing*(fvar(0)-helper(10080),fvar(0))>10+(random%450)+(random%450)

;-----freez

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = var(1)=helper(10000),var(0)
trigger1 = numhelper(10080) && helper(10080),var(12)=2
trigger1 = helper(10080),facing*(fvar(0)-helper(10080),fvar(0))=[-130,100]
var(13)=0

[State 0, ChangeState]
type = ChangeState
triggerall = var(0)<2000
trigger1 = var(1)=helper(10000),var(0)
trigger1 = numhelper(10080) && helper(10080),var(12)=2 && random<=80
trigger1 = helper(10080),facing*(fvar(0)-helper(10080),fvar(0))=[-130,100]
value =11016


;-----fire

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = var(1)=helper(10000),var(0)
trigger1 = numhelper(10080) && helper(10080),var(12)=1 && helper(10080),time<=130
trigger1 = helper(10080),facing*(fvar(0)-helper(10080),fvar(0))=[-30,260]
var(14)=1

[State 0, VarAdd]
type = VarAdd
trigger1 = (time%15)=1
trigger1 = var(14) && var(5)>0
var(5)=-1

[State 0, PalFX]
type = PalFX
trigger1 = var(14)
time = 1
add = 20-120*(var(5)<=0),20-120*(var(5)<=0),-200-120*(var(5)<=0)

[State 0, Explod]
type = explod 
trigger1 = var(1)=helper(10000),var(0)
trigger1 = (var(14)||var(0)=2300) && var(5)>0
trigger1 = !numexplod(10401)
anim = 10401
ID = 10401
pos = 0,-50+30*(var(0)=[1500,1550])
postype = p1
bindtime=-1
removetime=-1
scale=0.7,0.7
sprpriority = 5
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(14) && var(5)<=0
trigger2 = !var(14) && var(0)!=2300
id = 10401


;-----nukebomb

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = var(0)<2000
trigger1 = var(1)=helper(10000),var(0)
trigger1 =helper(10000),var(56)>0
var(3)=floor(0.5*var(5))

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = var(1)=helper(10000),var(0)
trigger1 =helper(10000),var(56)>0
var(5)=0

;----round end

[State 0, VarAdd]
type = VarAdd
triggerall = var(0)<2000
trigger1 = (numhelper(11000)<=5 || var(10)>=20) && (time%100)=1
var(5)=-1

[State 0, ChangeState]
type = ChangeState
trigger1 = var(5)<=0
value =11015


;---------------sounds

[State 0, StopSnd]
type = StopSnd
trigger1 = var(20)>0 && (var(10)!=[1,3]) && var(10)!=5
trigger2 = var(1)!=helper(10000),var(0)
channel = 4

[State 0, VarSet]
type = VarSet
trigger1 = var(20)>0 && (var(10)!=[1,3]) && var(10)!=5
var(20)=0

[State 0, VarSet]
type = VarSet
triggerall = var(0)<1600
trigger1 = var(20)=0 && ((var(10)=[2,3])||(var(10)=1&&random=1))
var(20)=1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(20)>0
var(20)=1-(900+1)*(var(20)>=900)

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(20)=2||((var(20)=302||var(20)=602) && var(0)<1200)
value = S15,(random%9)*(var(0)<1200)+(22+(random%3))*(var(0)>=1200 && var(0)<1500)+(85+(random%5))*(var(0)=[1500,1550])
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)<1600 && (var(10)=10||var(10)=22) && anim=var(10)+var(0) && animelemtime(1)=2
value = S15,(30+(random%14))*(var(0)<1200)+29*(var(0)>=1200 && var(0)<1500)+(85+(random%5))*(var(0)=[1500,1550])
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)<1600 && (var(10)=0||(var(10)=1&&!var(20))) && anim=var(10)+var(0) && animelemtime(1)=2 && random<=200
value = S15,(50+(random%27))*(var(0)<1200)+(21+(random%4))*(var(0)>=1200 && var(0)<1500)+(80+(random%5))*(var(0)=[1500,1550])
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)<1200 && var(10)=21 && anim=var(10)+var(0) && animelemtime(1)=2 && random<=300
value = S15,90+(random%6)
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)<1600 && (var(10)=0||var(10)=1||var(10)=21) && anim=var(10)+var(0) && animelemtime(1)=2 && numhelper(11000)<=5
value = S15,78


[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2000 && (((var(10)=0||var(10)=1)&&animelemtime(1)=2&&random<=200)||(var(10)=10 && animelemtime(2)=20)) && anim=var(10)+var(0)
value = S15,100
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2000 && (var(10)=10) && anim=var(10)+var(0) && animelemtime(1)=2
value = S1,24

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2100 && (var(10)=0) && anim=var(10)+var(0) && (animelemtime(1)=2||animelem=7)
value = S1,28

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2200 && (var(10)=[10,11]) && anim=var(10)+var(0) && (animelemtime(1)=2)
value = S15,101
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2200 && (var(10)=0) && anim=var(10)+var(0) && (animelemtime(1)=2) && random<=200
value = S15,110+(random%5)
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2200 && (var(10)=5) && anim=var(10)+var(0) && (animelem=2)
trigger2 = var(0)=2200 && (var(10)=1) && anim=var(10)+var(0) && (time%150=100)
value = S15,105+(random%3)
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2300 && (((var(10)=0 && animelem=3)||(var(10)=10 && animelem=6))||((var(10)=0 && animelem=5)||(var(10)=10 && animelem=8))) && anim=var(10)+var(0)
value = S15,118+1*((var(10)=0 && animelem=5)||(var(10)=10 && animelem=8))

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2300 && (var(10)=0) && anim=var(10)+var(0) && (animelem=2) && random<=200
value = S15,120+(random%7)
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2300 && (var(10)=10) && anim=var(10)+var(0) && (animelem=2) && random<=500
value = S15,130+(random%4)
channel = 4


;----system

[State 0, PlayerPush]
type = PlayerPush
trigger1 = var(10)<20 && var(5)>0 && var(1)=helper(10000),var(0) && var(0)!=2300
value = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3-500*(var(1)!=helper(10000),var(0))

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(1)!=helper(10000),var(0)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 11015
time = -1

[State 0, StopSnd]
type = StopSnd
trigger1 = helper(10000),stateno!=10010
channel = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = var(1)!=helper(10000),var(0)
trigger3 = var(1)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = var(1)=0

;--------------------------------------------------------------------------------
;hit
[Statedef 11015]
physics=N
movetype=I

;-----

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = var(0)<2000
trigger1 =helper(10000),var(55)>0 && !time
trigger2 = var(1)=helper(10000),var(0) && helper(10000),var(56)>0
var(3)=floor(0.5*var(5))

;instakill
[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 =helper(10000),var(55)>0 && !time
var(5)=0

;nukebomb
[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = var(1)=helper(10000),var(0)
trigger1 =helper(10000),var(56)>0
var(5)=0

;-----

[State 0, 0]
type = varadd
trigger1 = !time
var(5)= -ifelse(gethitvar(damage)<100,gethitvar(damage),100)*(1+1*(var(10)>=20))*(1+1*(helper(10000),var(33)!=0))
ignorehitpause=1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = !time
var(3)=floor(0.5*ifelse(gethitvar(damage)<100,gethitvar(damage),100))*(1+1*(helper(10000),var(57)>0))

[State 0, ChangeState]
type = ChangeState
trigger1 = var(0)>=2000 && !time && var(5)>0
value =11010

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(4)=abs(ifelse(gethitvar(damage)<100,gethitvar(damage),100)*0.07)+2+(random%20)

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=ifelse(var(10)<20,15+(var(5)<=0),25+(var(5)<=0))

[State 0, VarSet]
type = VarSet
trigger1 = (var(10)=[15,16]) && var(15)>=10
var(10)=17

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = var(10)=17 && var(5)!=0
var(3)=floor(0.5*(50+var(5)))

[State 0, VarSet]
type = VarSet
trigger1 = var(10)=17 && var(5)!=0
var(5)=0

[State 0, VarSet]
type = VarSet
trigger1 = var(10)=15 && var(16)>=10
var(10)=20

[State 0, ChangeState]
type = ChangeState
trigger1 = (var(10)=15||var(10)=25) && time>=2 && animelemtime(1)>=fvar(4)
trigger2 = var(10)=20 && !animtime && anim=var(10)+var(0)
value =11010

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = ((var(10)=[16,17])||var(10)=26) && !animtime && anim=var(10)+var(0) && time>=5
var(49)=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = ((var(10)=[16,17])||var(10)=26) && !animtime && anim=var(10)+var(0) && time>=5

[State 0, DestroySelf]
type = DestroySelf
trigger1 = ((var(10)=[16,17])||var(10)=26) && !animtime && anim=var(10)+var(0) && time>=5

;------bosses

[State 0, AngleDraw]
type = AngleDraw
trigger1 =  var(0)=2100
scale = 1.6,1.6

[State 0, ParentVar]
type = ParentVaradd
triggerall = var(0)=2000
trigger1 = var(10)=16 && anim=var(10)+var(0) && animelem=2
var(2)=var(19)


;---------

[State 0, Helper]
type = Helper
triggerall = var(0)<2000
trigger1 = var(10)=15 && !time
helpertype = normal
name = "headshot"
ID =11050
stateno = 11050
pos = 0,0
postype = p1

[State 0, Helper]
type = Helper
triggerall = var(0)<2000
trigger1 = var(10)=15 && !time
helpertype = normal
name = "legshot"
ID =11052
stateno = 11052
pos = 0,0
postype = p1

;----------powerups

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(5)<=0 && time=5 && random<=120-ifelse(helper(10000),var(15)<20,4*helper(10000),var(15),80)
var(50+(random%5))=fvar(0)

;---------shot

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=20 && anim=var(10)+var(0) && animelemtime(1)=2
trigger2 = var(0)<1500 && var(10)=17 && anim=var(10)+var(0) && animelemtime(1)=2
value = S5,8+(random%3)

[State 0, Explod]
type = explod
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(10)=20 && anim=var(10)+var(0) && animelemtime(1)=2
anim = 10437
ID = 10437
pos = 0,-20
postype = p1
bindtime=-1
scale=0.7,0.8
facing=1
sprpriority = 20
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)<1500 && var(10)=17 && anim=var(10)+var(0) && animelemtime(1)=2
anim = 10437
ID = 10437
pos = 0,-80
postype = p1
bindtime=-1
scale=0.7,0.8
facing=1
sprpriority = 20
pausemovetime=999
supermovetime=999
ownpal=1


;---------explod

[State 0, Helper]
type = Helper
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(0)=[1500,1550]) && var(10)=17 && animelem=5 && anim=var(10)+var(0)
trigger2 = helper(10000),fvar(4)>0 && time=3 && var(0)<2000
trigger3 = (var(0)=2100) && var(10)=16 && animelem=5 && anim=var(10)+var(0)
trigger4 = var(0)=2300 && (var(10)=16) && anim=var(10)+var(0) && animelemtime(1)=2 && random<=400
helpertype = normal
name = "bomb"
ID =10094+ifelse(numhelper(10094)&&!numhelper(10095),1,ifelse(numhelper(10094)&&numhelper(10095)&&!numhelper(10096),2,0))
stateno = 10092
pos = 0,0
postype = p1

[State 0, ParentVar]
type = ParentVaradd
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(0)=[1500,1550]) && var(10)=17 && animelemtime(5)>=10 && anim=var(10)+var(0) && (p2dist x=[-90,90])
fvar(8)=1.5

[State 0, Explod]
type = explod
triggerall = var(1)=helper(10000),var(0)
trigger1 = (var(0)=[1500,1550]) && var(10)=17 && anim=var(10)+var(0)
trigger1 = animelemtime(5)=1||animelemtime(5)=20||animelemtime(5)=40||animelemtime(5)=65||animelemtime(5)=90||animelemtime(5)=115||animelemtime(5)=140||animelemtime(5)=165||animelemtime(5)=190
anim = 10436
ID = 10436
pos = -70+(random%140),30-(random%50)
postype = p1
bindtime=-1
scale=2,2
facing=-1
sprpriority = 45
pausemovetime=999
supermovetime=999
ownpal=1


;-----explod

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
triggerall = var(1)=helper(10000),var(0)
triggerall = var(10)=15
trigger1 = numhelper(10080) && helper(10080),var(12)=3 && (helper(10080),time=[600,625]) && (helper(10080),facing*(fvar(0)-helper(10080),fvar(0))=[-70,70])
trigger2 = numhelper(10090) && helper(10090),stateno=10092 && (helper(10090),time<=25) && (helper(10090),facing*(fvar(0)-helper(10090),fvar(0))=[-70,70])
trigger3 = numhelper(10091) && helper(10091),stateno=10092 && (helper(10091),time<=25) && (helper(10091),facing*(fvar(0)-helper(10091),fvar(0))=[-70,70])
trigger4 = numhelper(10092) && helper(10092),stateno=10092 && (helper(10092),time<=25) && (helper(10092),facing*(fvar(0)-helper(10092),fvar(0))=[-70,70])
trigger5 = numhelper(10093) && helper(10093),stateno=10092 && (helper(10093),time<=25) && (helper(10093),facing*(fvar(0)-helper(10093),fvar(0))=[-70,70])
trigger6 = numhelper(10094) && helper(10094),stateno=10092 && (helper(10094),time<=25) && (helper(10094),facing*(fvar(0)-helper(10094),fvar(0))=[-70,70])
trigger7 = numhelper(10095) && helper(10095),stateno=10092 && (helper(10095),time<=25) && (helper(10095),facing*(fvar(0)-helper(10095),fvar(0))=[-70,70])
trigger8 = numhelper(10096) && helper(10096),stateno=10092 && (helper(10096),time<=25) && (helper(10096),facing*(fvar(0)-helper(10096),fvar(0))=[-70,70])
var(16)=10


;-----freez

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = var(1)=helper(10000),var(0)
trigger1 = numhelper(10080) && helper(10080),var(12)=2
trigger1 = helper(10080),facing*(fvar(0)-helper(10080),fvar(0))=[-130,100]
var(13)=0

[State 0, ChangeState]
type = ChangeState
triggerall = var(0)<2000
trigger1 = var(1)=helper(10000),var(0)
trigger1 = numhelper(10080) && helper(10080),var(12)=2 && random<=80
trigger1 = helper(10080),facing*(fvar(0)-helper(10080),fvar(0))=[-130,100]
value =11016


;-----fire

[State 0, VarSet]
type = VarSet
triggerall = var(0)<2000
trigger1 = var(1)=helper(10000),var(0)
trigger1 = numhelper(10080) && helper(10080),var(12)=1 && helper(10080),time<=130
trigger1 = helper(10080),facing*(fvar(0)-helper(10080),fvar(0))=[-30,260]
var(14)=1

[State 0, VarAdd]
type = VarAdd
trigger1 = (time%15)=1
trigger1 = var(14) && var(5)>0
var(5)=-1

[State 0, PalFX]
type = PalFX
trigger1 = var(14)
time = 1
add = 20-120*(var(5)<=0),20-120*(var(5)<=0),-200-120*(var(5)<=0)

[State 0, Explod]
type = explod 
trigger1 = var(1)=helper(10000),var(0)
trigger1 = var(14) && var(5)>0
trigger1 = !numexplod(10401)
anim = 10401
ID = 10401
pos = 0,-50+30*(var(0)=[1500,1550])
postype = p1
bindtime=-1
removetime=-1
scale=0.7,0.7
sprpriority = 5
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(14) && var(5)<=0
trigger2 = !var(14)
id = 10401


;---------------sounds

[State 0, StopSnd]
type = StopSnd
trigger1 = var(1)!=helper(10000),var(0)
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)<1600 && (var(10)=16||var(10)=26) && anim=var(10)+var(0) && animelemtime(1)=2
value = S15,(var(0)<1200)*(10+(random%11))+(23+(random%2))*(var(0)>=1200 && var(0)<1500)+(80+(random%5))*(var(0)=[1500,1550])
channel = 4

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(0)=2300 && (var(10)=16) && anim=var(10)+var(0) && animelem=2
value = S15,135+(random%2)
channel = 4


;----system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -1-500*(var(1)!=helper(10000),var(0))

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(1)!=helper(10000),var(0)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 11015
time = -1

[State 0, StopSnd]
type = StopSnd
trigger1 = helper(10000),stateno!=10010
channel = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = var(1)!=helper(10000),var(0)
trigger3 = var(1)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = var(1)=0


;--------------------------------------------------------------------------------
;enemy freez
[Statedef 11016]
physics=N
movetype=I


;-----

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 =helper(10000),var(55)>0 && !time
trigger2 = var(1)=helper(10000),var(0) && helper(10000),var(56)>0
var(3)=floor(0.5*var(5))

;instakill
[State 0, VarSet]
type = VarSet
trigger1 =helper(10000),var(55)>0 && !time
var(5)=0

;nukebomb
[State 0, VarSet]
type = VarSet
trigger1 = var(1)=helper(10000),var(0)
trigger1 =helper(10000),var(56)>0
var(5)=0

;-----


[State 0, VarAdd]
type = VarAdd
trigger1 = 1
var(13)=1

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = !time && var(13)=1
trigger2 = var(13)>=1200
value = S1,18

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(14)=0

[State 0, 0]
type = varadd
trigger1 = !time
var(5)= -ifelse(gethitvar(damage)<100,gethitvar(damage),100)*(1+1*(var(10)>=20))*(1+1*(helper(10000),var(33)!=0))
ignorehitpause=1

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = !time
var(3)=floor(0.5*ifelse(gethitvar(damage)<100,gethitvar(damage),100))

[State 0, VarSet]
type = VarSet
trigger1 = var(5)>0
var(12)=10406+((var(0)=[1500,1550])||var(10)>=20)

[State 0, VarSet]
type = VarSet
trigger1 = var(5)<=0
var(12)=10408

[State 0, VarAdd]
type = VarAdd
trigger1 = (time%20)=1 && var(5)>0
var(5)=-1

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(1)=helper(10000),var(0)
trigger1 = var(12)=10408 && animelem=2
value = S1,19

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time>=5 && var(12)=10408 && !animtime && anim=var(12)
var(49)=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time>=5 && var(12)=10408 && !animtime && anim=var(12)

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>=5 && var(12)=10408 && !animtime && anim=var(12)

[State 0, ChangeState]
type = ChangeState
trigger1 = var(13)>=1200
value =11010

;----system

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -1-500*(var(1)!=helper(10000),var(0))

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(1)!=helper(10000),var(0)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(12)
value = var(12)

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 11016
time = -1

[State 0, StopSnd]
type = StopSnd
trigger1 = 1
channel = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = var(1)!=helper(10000),var(0)
trigger3 = var(1)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = var(1)=0



;--------------------------------------------------------------------
;enemy door
[Statedef 11020]
physics=N
velset=0,0
anim=0

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(2)=var(1)

;------


[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[1,3]
fvar(0)=(1850*(fvar(2)=620)+1475*(fvar(2)=3590)+350*(fvar(2)=5840))*(var(2)=1) + (1490*(fvar(2)=300)+620*(fvar(2)=1850)+4600*(fvar(2)=3320))*(var(2)=2) + (1150*(fvar(2)=300)+290*(fvar(2)=1480)+1360*(fvar(2)=3340)+3590*(fvar(2)=4160)+3320*(fvar(2)=4590)+1440*(fvar(2)=5480))*(var(2)=3)
[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[1,3]
var(1)=(2*(fvar(2)=620)+5*(fvar(2)=3590)+6*(fvar(2)=5840))*(var(2)=1) + (3*(fvar(2)=300)+1*(fvar(2)=1850)+3*(fvar(2)=3320))*(var(2)=2) + (6*(fvar(2)=300)+2*(fvar(2)=1480)+7*(fvar(2)=3340)+1*(fvar(2)=4160)+2*(fvar(2)=4590)+4*(fvar(2)=5480))*(var(2)=3)

[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[4,7]
fvar(0)=(2000*(fvar(2)=500)+5470*(fvar(2)=1440)+390*(fvar(2)=2505))*(var(2)=4) + (2505*(fvar(2)=390)+4160*(fvar(2)=1475)+500*(fvar(2)=2000))*(var(2)=5) + (5840*(fvar(2)=350)+330*(fvar(2)=1150))*(var(2)=6) + 3340*(var(2)=7)
[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[4,7]
var(1)=(5*(fvar(2)=500)+3*(fvar(2)=1440)+5*(fvar(2)=2505))*(var(2)=4) + (4*(fvar(2)=390)+3*(fvar(2)=1475)+4*(fvar(2)=2000))*(var(2)=5) + (1*(fvar(2)=350)+3*(fvar(2)=1150))*(var(2)=6) + 3*(var(2)=7)




[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[9,11]
fvar(0)=(270*(fvar(2)=1822)+270*(fvar(2)=2410))*(var(2)=9)+(2420*(fvar(2)=270)+1795*(fvar(2)=905)+280*(fvar(2)=3740))*(var(2)=10)+(1824*(fvar(2)=270)+1154*(fvar(2)=1464)+2520*(fvar(2)=2012))*(var(2)=11)
[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[9,11]
var(1)=(11*(fvar(2)=1822)+10*(fvar(2)=2410))*(var(2)=9)+(9*(fvar(2)=270)+15*(fvar(2)=905)+13*(fvar(2)=3740))*(var(2)=10)+(9*(fvar(2)=270)+17*(fvar(2)=1464)+12*(fvar(2)=2012))*(var(2)=11)

[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[12,14]
fvar(0)=(3270*(fvar(2)=530)+2016*(fvar(2)=2520))*(var(2)=12)+(3737*(fvar(2)=280)+1464*(fvar(2)=1970)+960*(fvar(2)=2100)+430*(fvar(2)=3410))*(var(2)=13)+(3410*(fvar(2)=430)+260*(fvar(2)=2055)+530*(fvar(2)=3270))*(var(2)=14)
[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[12,14]
var(1)=(14*(fvar(2)=530)+11*(fvar(2)=2520))*(var(2)=12)+(10*(fvar(2)=280)+11*(fvar(2)=1970)+18*(fvar(2)=2100)+14*(fvar(2)=3410))*(var(2)=13)+(13*(fvar(2)=430)+17*(fvar(2)=2055)+12*(fvar(2)=3270))*(var(2)=14)

[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[15,18]
fvar(0)=(2178*(fvar(2)=305)+1447*(fvar(2)=1555)+905*(fvar(2)=1800))*(var(2)=15)+1555*(var(2)=16)+(2055*(fvar(2)=265)+1970*(fvar(2)=1154)+300*(fvar(2)=2180))*(var(2)=17)+2100*(var(2)=18)
[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[15,18]
var(1)=(17*(fvar(2)=305)+16*(fvar(2)=1555)+10*(fvar(2)=1800))*(var(2)=15)+15*(var(2)=16)+(14*(fvar(2)=265)+13*(fvar(2)=1154)+15*(fvar(2)=2180))*(var(2)=17)+13*(var(2)=18)




[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[20,22]
fvar(0)=(245*(fvar(2)=700)+1270*(fvar(2)=1530)+280*(fvar(2)=2140)+335*(fvar(2)=2835))*(var(2)=20) + (2835*(fvar(2)=340)+1274*(fvar(2)=740)+385*(fvar(2)=2590))*(var(2)=21)+(2585*(fvar(2)=390)+250*(fvar(2)=1550))*(var(2)=22)
[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[20,22]
var(1)=(23*(fvar(2)=700)+27*(fvar(2)=1530)+26*(fvar(2)=2140)+21*(fvar(2)=2835))*(var(2)=20) + (20*(fvar(2)=340)+23*(fvar(2)=740)+22*(fvar(2)=2590))*(var(2)=21) + (21*(fvar(2)=390)+25*(fvar(2)=1550))*(var(2)=22)

[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[23,25]
fvar(0)=(700*(fvar(2)=250)+1895*(fvar(2)=1274)+990*(fvar(2)=1835))*(var(2)=23) + (1835*(fvar(2)=980)+3480*(fvar(2)=2080))*(var(2)=24) + (1550*(fvar(2)=250)+2820*(fvar(2)=900)+2080*(fvar(2)=3480))*(var(2)=25)
[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[23,25]
var(1)=(20*(fvar(2)=250)+26*(fvar(2)=1274)+24*(fvar(2)=1835))*(var(2)=23) + (23*(fvar(2)=980)+25*(fvar(2)=2080))*(var(2)=24) + (22*(fvar(2)=250)+26*(fvar(2)=900)+24*(fvar(2)=3480))*(var(2)=25)

[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[26,27]
fvar(0)=(2140*(fvar(2)=280)+740*(fvar(2)=1895)+903*(fvar(2)=2820))*(var(2)=26) + 1530*(var(2)=27)
[State 0, VarSet]
type = VarSet
trigger1 = time>=150
trigger1 = var(2)=[26,27]
var(1)=(20*(fvar(2)=280)+21*(fvar(2)=1895)+25*(fvar(2)=2820))*(var(2)=26) + 20*(var(2)=27)




;------

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>=150 && var(1)=0
trigger2 = time>=150 && fvar(0)=0

[State 0, ChangeState]
type = ChangeState
trigger1 = (var(1)!=7 && var(1)!=18 && var(1)!=27) || helper(10000),var(42)<3200
trigger1 = time>=150
value =11010

[State 0, StopSnd]
type = StopSnd
trigger1 = 1
channel = 4

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = var(1)!=helper(10000),var(0)

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010




;--------------------------------------------------------------------------------
;headshot
[Statedef 11050]
physics=N
movetype=I
anim=10000

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
facing = 1
pos = 10*(parent,var(0)=[1500,1550]),-102+15*(parent,var(0)=[1200,1250])+75*(parent,var(0)=[1500,1550])

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
pausetime = 0,0
sparkno = -1
hitsound = -1
p1stateno = 11051

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>=5

[Statedef 11051]
physics=N
movetype=I
anim=0

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = !time
var(15)=9+(random%2)+1*(helper(10000),var(15)=1)-4*(helper(10000),var(15)=[3,4])-5*(helper(10000),var(15)=[5,9])-6*(helper(10000),var(15)=[10,15])-7*(helper(10000),var(15)=[16,22])-8*(helper(10000),var(15)=[23,34])-9*(helper(10000),var(15)>=35)+1*(helper(10000),var(33)!=0)

[State 0, DestroySelf]
type = DestroySelf
trigger1 = 1

;--------------------------------------------------------------------------------
;legshot
[Statedef 11052]
physics=N
movetype=I
anim=10001

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
facing = 1
pos = -50*(parent,var(0)=[1500,1550]),-21+10*(parent,var(0)=[1500,1550])

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
pausetime = 0,0
sparkno = -1
hitsound = -1
p1stateno = 11053

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>=5

[Statedef 11053]
physics=N
movetype=I
anim=0

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = !time
var(16)=9+(random%2)+1*(helper(10000),var(15)=1)-4*(helper(10000),var(15)=[3,4])-5*(helper(10000),var(15)=[5,9])-6*(helper(10000),var(15)=[10,15])-7*(helper(10000),var(15)=[16,22])-8*(helper(10000),var(15)=[23,34])-9*(helper(10000),var(15)>=35)+1*(helper(10000),var(33)!=0)

[State 0, DestroySelf]
type = DestroySelf
trigger1 = 1


;--------------------------------------------------------------------------------
;room1
[Statedef 20100]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=20100*(ishelper(20100)||ishelper(20101)||ishelper(20102)||ishelper(20103))+20132*(ishelper(20132))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=2133*(ishelper(20100))+1934*(ishelper(20101))+4871*(ishelper(20102))+5071*(ishelper(20103))+1117*(ishelper(20105))+2588*(ishelper(20132))+2769*(ishelper(20133))


;------DEFCON

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(20133)
var(10)=(20132+helper(10030),var(17))*(helper(20132),var(15)!=0)

[State 0, Explod]
type = explod
trigger1 = ishelper(20133)
trigger1 = helper(20132),var(15) && !numexplod(20133)
anim = 20132+helper(10030),var(16)
ID = 20133
pos = -75,0
postype =p1
bindtime=-1
sprpriority = -70
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = ishelper(20133)
trigger1 = helper(20132),var(15) && !numexplod(20134)
anim = 20132+helper(10030),var(18)
ID = 20134
pos = 75,0
postype =p1
bindtime=-1
sprpriority = -70
supermovetime=9999
pausemovetime=9999
ownpal=1

;------DEFCON

[State 0, Turn]
type = Turn
trigger1 = facing=-1
trigger1 =ishelper(20132)

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 =ishelper(20132)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)=0
var(11)=3

[State 0, PlaySnd]
type = PlaySnd
trigger1 =ishelper(20132)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)
value = S4,1

[State 0, VarSet]
type = VarSet
trigger1 =ishelper(20132)
trigger1 = time=2 && var(50)
trigger1 = helper(10000),var(40)
var(15)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 =ishelper(20132)
trigger1 = var(15) || helper(10031),var(10)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

;---------electric

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(20105) && (time%35)=1 && helper(10000),var(40) && helper(10000),fvar(0)<1890
value = S1,21

[State 0, Explod]
type = explod
trigger1 = ishelper(20105) && (time%35)=1 && helper(10000),var(40)
anim = 10421
ID = 10421
pos = 0,-60
postype =p1
bindtime=-1
scale=1.5,2.5
sprpriority = 110
supermovetime=9999
pausemovetime=9999
ownpal=1

;------door side

[State 0, Turn]
type = Turn
trigger1 = facing=1
trigger1 = ishelper(20101)||ishelper(20102)

[State 0, pVarSet]
type = parentVarSet
triggerall = ishelper(20100)||ishelper(20101)||ishelper(20102)||ishelper(20103)
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && helper(10000),var(2)<1000
var(10)=1000

[State 0, VarSet]
type = VarSet
triggerall = ishelper(20100)||ishelper(20101)||ishelper(20102)||ishelper(20103)
trigger1 = var(50) && time=1 && helper(10000),var(2)>=1000
trigger2 = ishelper(20100) && helper(20101),var(10)=20101
trigger3 = ishelper(20101) && helper(20100),var(10)=20101
trigger4 = ishelper(20102) && helper(20103),var(10)=20101
trigger5 = ishelper(20103) && helper(20102),var(10)=20101
var(10)=20101

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = ishelper(20100) && var(10)=20101 && animelem=2
trigger2 = ishelper(20102) && var(10)=20101 && animelem=2
var(3)=-1000

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(20100) && var(10)=20101 && animelem=2
trigger2 = ishelper(20102) && var(10)=20101 && animelem=2
value = S1,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(20100) && var(10)=20101 && animelem=2
trigger2 = ishelper(20102) && var(10)=20101 && animelem=2
value = S1,9

[State 0, VarSet]
type = VarSet
triggerall = ishelper(20100)||ishelper(20101)||ishelper(20102)||ishelper(20103)
trigger1 = (ishelper(20100)||ishelper(20101)) && helper(10030),var(10)=1
trigger2 = (ishelper(20102)||ishelper(20103)) && helper(10030),var(11)=1
var(10)=20102

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;room2
[Statedef 20200]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=0

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=1472*(ishelper(20211))+2383*(ishelper(20212))+3178*(ishelper(20213))

;------DEFCON

[State 0, Turn]
type = Turn
trigger1 = facing=-1
trigger1 =ishelper(20211)||ishelper(20212)||ishelper(20213)

[State 0, NotHitBy]
type = NotHitBy
trigger1 =ishelper(20211)||ishelper(20212)||ishelper(20213)
trigger1 = helper(10031),var(10)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 =ishelper(20211)||ishelper(20212)||ishelper(20213)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)=0
var(11)=3

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(20211)||ishelper(20212)||ishelper(20213)
var(10)=20211+helper(10030),var(13)*(ishelper(20211))+helper(10030),var(14)*(ishelper(20212))+helper(10030),var(15)*(ishelper(20213))

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(20211)||ishelper(20212)||ishelper(20213)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)
value = S4,1

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;room3
[Statedef 20300]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=20305*(ishelper(20305))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=2840*(ishelper(20305))

;------block side

[State 0, Turn]
type = Turn
trigger1 = facing=-1
trigger1 =ishelper(20305)

[State 0, VarSet]
type = VarSet
triggerall = ishelper(20305)
trigger1 = helper(10030),var(12)
var(10)=0

[State 0, pVarSet]
type = parentVarSet
triggerall = ishelper(20305)
trigger1 = var(10)!=0
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && helper(10000),var(2)<1000
var(10)=1000

[State 0, VarSet]
type = VarSet
triggerall = ishelper(20305)
trigger1 = var(10)!=0
trigger1 = var(50) && time=1 && helper(10000),var(2)>=1000
var(15)=1

[State 0, NotHitBy]
type = NotHitBy
triggerall = ishelper(20305)
trigger1 = var(10)!=0  && var(15)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, PalFX]
type = PalFX
triggerall = ishelper(20305)
trigger1 = var(10)!=0
trigger1 = var(15)
time = 1
add = 3*time,3*time,3*time

[State 0, PlaySnd]
type = PlaySnd
triggerall = ishelper(20305)
trigger1 = var(10)!=0
trigger1 = var(15) && time=1
value = S1,9

[State 0, Explod]
type = explod 
triggerall = ishelper(20305)
trigger1 = var(10)!=0
trigger1 = var(15) && time=10
anim = 10022
ID = 10022
pos = 0,-8
postype = p1
bindtime=-1
scale=1.3,1.7
sprpriority = -60
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = ishelper(20305)
trigger1 = var(10)!=0
trigger1 = var(15) && time=1
var(3)=-1000


;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;room5
[Statedef 20500]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=0

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=1165*(ishelper(20505))

;---------electric

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(20505) && (time%35)=1 && helper(10000),var(40)=0 && (p2dist x=[-320,320])
value = S1,21

[State 0, Explod]
type = explod
trigger1 = ishelper(20505) && (time%35)=1 && helper(10000),var(40)=0
anim = 10421
ID = 10421
pos = 0,-50
postype =p1
bindtime=-1
scale=0.8,0.8
sprpriority = -60
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper(20505) && helper(10000),var(40)
id = 10421

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;room7
[Statedef 20700]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=0

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=552*(ishelper(20701))+1021*(ishelper(20702))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=-64*(ishelper(20701))-64*(ishelper(20702))

;------DEFCON

[State 0, Turn]
type = Turn
trigger1 = facing=-1
trigger1 =ishelper(20701)||ishelper(20702)

[State 0, NotHitBy]
type = NotHitBy
trigger1 =ishelper(20701)||ishelper(20702)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, VarSet]
type = VarSet
trigger1 =ishelper(20701)||ishelper(20702)
var(10)=20211+(helper(10000),var(42)>=3220)+(helper(10000),var(42)>=3700)+(helper(10000),var(42)>=4200)+(helper(10000),var(42)>=4700)

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;room10
[Statedef 21000]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=21001*(ishelper(21001))+21002*(ishelper(21002))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=2032*(ishelper(21001))+2238*(ishelper(21002))


;------block

[State 0, Turn]
type = Turn
trigger1 = ishelper(21001)||ishelper(21002)
trigger1 = facing=-1

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(21001)||ishelper(21002)
var(12)=1500

[State 0, SprPriority]
type = SprPriority
trigger1 = ishelper(21001)||ishelper(21002)
value = 70

[State 0, pVarSet]
type = parentVarSet
triggerall = ishelper(21001)||ishelper(21002)
trigger1 = var(10)!=0
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && helper(10000),var(2)<var(12)
var(10)=var(12)

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21001)||ishelper(21002)
trigger1 = var(10)!=0
trigger1 = var(50) && time=1 && helper(10000),var(2)>=var(12)
var(15)=1

[State 0, NotHitBy]
type = NotHitBy
triggerall = ishelper(21001)||ishelper(21002)
trigger1 = var(10)!=0  && var(15)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, PalFX]
type = PalFX
triggerall = ishelper(21001)||ishelper(21002)
trigger1 = var(10)!=0
trigger1 = var(15)
time = 1
add = 3*time,3*time,3*time

[State 0, PlaySnd]
type = PlaySnd
triggerall = ishelper(21001)||ishelper(21002)
trigger1 = var(10)!=0
trigger1 = var(15) && time=1
value = S1,9

[State 0, PlaySnd]
type = PlaySnd
triggerall = ishelper(21001)||ishelper(21002)
trigger1 = var(10)!=0
trigger1 = var(15) && time=1
value = S1,17

[State 0, Explod]
type = explod 
triggerall = ishelper(21001)||ishelper(21002)
trigger1 = var(10)!=0 
trigger1 = var(15) && time=10
anim = 10022
ID = 10022
pos = 40*(ishelper(21001))-40*(ishelper(21002)),15
postype = p1
bindtime=-1
scale=1.3,1.7
sprpriority = 80
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = ishelper(21001)||ishelper(21002)
trigger1 = var(10)!=0
trigger1 = var(15) && time=1
var(3)=-var(12)

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21001)||ishelper(21002)
trigger1 = var(10)!=0 
trigger1 = helper(10030),var(10)
var(10)=0

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;room11
[Statedef 21100]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=21100*(ishelper(21101))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=1070*(ishelper(21101))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=-10*(ishelper(21101))


;------trap

[State 0, SprPriority]
type = SprPriority
trigger1 = ishelper(21101)
value = -40

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21101)
trigger1 = !numhelper(10080)
var(10)=21100

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21101)
trigger1 = var(10)=21100
fvar(0)=1070

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21101)
trigger1 = numhelper(10080) && helper(10080),var(12)=8 && helper(10080),time=10
var(10)=21101

[State 0, PlaySnd]
type = PlaySnd
triggerall = ishelper(21101)
trigger1 = numhelper(10080) && helper(10080),var(12)=8 && (helper(10080),time=10||helper(10080),time=100||helper(10080),time=200||helper(10080),time=300)
value = S1,25

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = ishelper(21101)
trigger1 = var(10)=21101
movetype = A

[State 0, HitDef]
type = HitDef
triggerall = ishelper(21101)
trigger1 = var(10)=21101 && animelem=2
damage=70,0
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = -1
numhits=0
affectteam=F

[State 0, VarAdd]
type = VarAdd
triggerall = ishelper(21101)
trigger1 = var(10)=21101
fvar(0)=2*facing

[State 0, Explod]
type = explod 
triggerall = ishelper(21101)
trigger1 = var(10)!=0
trigger1 = !numexplod(10401)
anim = 10401
ID = 10401
pos = 0,-65
postype = p1
bindtime=-1
removetime=-1
facing=-1
scale=0.9,0.9
sprpriority = -45
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = ishelper(21101)
trigger1 = var(10)=0
id = 10401

[State 0, Helper]
type = Helper
triggerall = ishelper(21101)
trigger1 = numhelper(10080) && helper(10080),var(12)=8 && helper(10080),time=400
helpertype = normal
name = "bomb"
ID =10094+ifelse(numhelper(10094)&&!numhelper(10095),1,ifelse(numhelper(10094)&&numhelper(10095)&&!numhelper(10096),2,0))
stateno = 10092
pos = 0,0
postype = p1

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21101)
trigger1 = numhelper(10080) && helper(10080),var(12)=8 && helper(10080),time=400
var(10)=0

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;room13
[Statedef 21300]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=21100*(ishelper(21301))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=860*(ishelper(21301))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=-10*(ishelper(21301))


;------trap

[State 0, SprPriority]
type = SprPriority
trigger1 = ishelper(21301)
value = -40

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21301)
trigger1 = !numhelper(10080)
var(10)=21100

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21301)
trigger1 = var(10)=21100
fvar(0)=860

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21301)
trigger1 = numhelper(10080) && helper(10080),var(12)=8 && helper(10080),time=10
var(10)=21101

[State 0, PlaySnd]
type = PlaySnd
triggerall = ishelper(21301)
trigger1 = numhelper(10080) && helper(10080),var(12)=8 && (helper(10080),time=10||helper(10080),time=100||helper(10080),time=200||helper(10080),time=300)
value = S1,25

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = ishelper(21301)
trigger1 = var(10)=21101
movetype = A

[State 0, HitDef]
type = HitDef
triggerall = ishelper(21301)
trigger1 = var(10)=21101 && animelem=2
damage=70,0
attr = SCA,NA
hitflag = MAFD
sparkno = -1
hitsound = -1
numhits=0
affectteam=F

[State 0, VarAdd]
type = VarAdd
triggerall = ishelper(21301)
trigger1 = var(10)=21101
fvar(0)=2*facing

[State 0, Explod]
type = explod 
triggerall = ishelper(21301)
trigger1 = var(10)!=0
trigger1 = !numexplod(10401)
anim = 10401
ID = 10401
pos = 0,-65
postype = p1
bindtime=-1
removetime=-1
facing=-1
scale=0.9,0.9
sprpriority = -45
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = ishelper(21301)
trigger1 = var(10)=0
id = 10401

[State 0, Helper]
type = Helper
triggerall = ishelper(21301)
trigger1 = numhelper(10080) && helper(10080),var(12)=8 && helper(10080),time=400
helpertype = normal
name = "bomb"
ID =10094+ifelse(numhelper(10094)&&!numhelper(10095),1,ifelse(numhelper(10094)&&numhelper(10095)&&!numhelper(10096),2,0))
stateno = 10092
pos = 0,0
postype = p1

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21301)
trigger1 = numhelper(10080) && helper(10080),var(12)=8 && helper(10080),time=400
var(10)=0

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;room14
[Statedef 21400]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=21400*(ishelper(21401))+20500*(ishelper(21402)||ishelper(21403)||ishelper(21404))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=1834*(ishelper(21401))+622*(ishelper(21402))+1512*(ishelper(21403))+2562*(ishelper(21404))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=-111*(ishelper(21402))-68*(ishelper(21403))-101*(ishelper(21404))


;----button

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(21402)||ishelper(21403)||ishelper(21404)
var(10)=20500+6*(var(15)!=0)

[State 0, SprPriority]
type = SprPriority
trigger1 = ishelper(21402)||ishelper(21403)||ishelper(21404)
value = -70

[State 0, Turn]
type = Turn
trigger1 = ishelper(21402)||ishelper(21403)||ishelper(21404)
trigger1 = facing=-1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = ishelper(21402)||ishelper(21403)||ishelper(21404)
trigger1 = helper(10031),var(10)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = ishelper(21402)||ishelper(21403)||ishelper(21404)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)=0
var(11)=3

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(21402)||ishelper(21403)||ishelper(21404)
trigger1 = helper(10000),var(40)
trigger1 = time=1 && var(50)
var(15)=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(21402)||ishelper(21403)||ishelper(21404)
trigger1 = helper(10000),var(40)
trigger1 = time=1 && var(50)
value = S4,1

[State 0, VarSet]
type = VarSet
triggerall = ishelper(21402)||ishelper(21403)||ishelper(21404)
trigger1 = time>=40
trigger2 = helper(10000),var(40)=0
var(15)=0



;------gear

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(21401)
var(10)=21400+1*(helper(10000),var(40)!=0)



[State 0, Explod]
type = explod 
triggerall = ishelper(21401)
trigger1 = helper(10000),var(40)=0 && !numexplod(21400)
anim = 21400
ID = 21400
pos = 0,-49
postype = p1
bindtime=-1
removetime=-1
sprpriority = -70
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = ishelper(21401)
trigger1 = helper(10000),var(40)!=0
id = 21400

[State 0, Explod]
type = explod 
triggerall = ishelper(21401)
trigger1 = helper(10000),var(40)!=0 && !numexplod(21401)
anim = 21401
ID = 21401
pos = 0,-49
postype = p1
bindtime=-1
removetime=-1
sprpriority = -70
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = ishelper(21401)
trigger1 = helper(10000),var(40)=0
id = 21401

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = ishelper(21401)
id = 10730

[State 0, Explod]
type = explod 
triggerall = ishelper(21401)
trigger1 = helper(10000),var(40)!=0
anim = 10731+helper(10030),var(13)
ID = 10730
pos = -13,-132
postype = p1
bindtime=-1
removetime=-1
sprpriority = -70
scale=0.7,0.7
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
triggerall = ishelper(21401)
trigger1 = helper(10000),var(40)!=0
anim = 10731+helper(10030),var(14)
ID = 10730
pos = -13,-84
postype = p1
bindtime=-1
removetime=-1
sprpriority = -50
scale=0.7,0.7
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
triggerall = ishelper(21401)
trigger1 = helper(10000),var(40)!=0
anim = 10731+helper(10030),var(15)
ID = 10730
pos = -13,-36
postype = p1
bindtime=-1
removetime=-1
sprpriority = -70
scale=0.7,0.7
pausemovetime=999
supermovetime=999
ownpal=1


;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;room15
[Statedef 21500]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=20132*(ishelper(21501))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=975*(ishelper(21501))+1102*(ishelper(21502))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=33*(ishelper(21501))+2*(ishelper(21502))


;------tv

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(21502)
var(10)=(20132+helper(10030),var(17))*(helper(21501),var(15)!=0)

[State 0, Explod]
type = explod
trigger1 = ishelper(21502)
trigger1 = helper(21501),var(15) && !numexplod(20133)
anim = 20132+helper(10030),var(16)
ID = 20133
pos = 0,-62
postype =p1
bindtime=-1
sprpriority = -70
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = ishelper(21502)
trigger1 = helper(21501),var(15) && !numexplod(20134)
anim = 20132+helper(10030),var(18)
ID = 20134
pos = 0,62
postype =p1
bindtime=-1
sprpriority = -70
supermovetime=9999
pausemovetime=9999
ownpal=1

;------tv

[State 0, Turn]
type = Turn
trigger1 = facing=-1
trigger1 =ishelper(21501)

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 =ishelper(21501)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)=0
var(11)=3

[State 0, PlaySnd]
type = PlaySnd
trigger1 =ishelper(21501)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)
value = S4,1

[State 0, VarSet]
type = VarSet
trigger1 =ishelper(21501)
trigger1 = time=2 && var(50)
trigger1 = helper(10000),var(40)
var(15)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 =ishelper(21501)
trigger1 = var(15) || helper(10031),var(10)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT


;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;room21
[Statedef 22100]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=20100*(ishelper(22101)||ishelper(22102))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=1119*(ishelper(22101))+1341*(ishelper(22102))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=-2*(ishelper(22101))-2*(ishelper(22102))


;------door side

[State 0, Turn]
type = Turn
trigger1 = (facing=1 && ishelper(22101)) || (facing=-1 && ishelper(22102))

[State 0, pVarSet]
type = parentVarSet
triggerall = ishelper(22101)||ishelper(22102)
trigger1 = helper(10000),var(10)=0
trigger1 = var(50) && time=1 && helper(10000),var(2)<1500
var(10)=1500

[State 0, VarSet]
type = VarSet
triggerall = ishelper(22101)||ishelper(22102)
trigger1 = var(50) && time=1 && helper(10000),var(2)>=1500
trigger2 = ishelper(22101) && helper(22102),var(10)=20101
trigger3 = ishelper(22102) && helper(22101),var(10)=20101
var(10)=20101

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = ishelper(22101) && var(10)=20101 && animelem=2
var(3)=-1500

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(22101) && var(10)=20101 && animelem=2
trigger2 = ishelper(22102) && var(10)=20101 && animelem=2
value = S1,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(22101) && var(10)=20101 && animelem=2
trigger2 = ishelper(22102) && var(10)=20101 && animelem=2
value = S1,9

[State 0, VarSet]
type = VarSet
trigger1 = (ishelper(22101)||ishelper(22102)) && helper(10030),var(10)=1
var(10)=20102


;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;room24
[Statedef 22400]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=0

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=1580*(ishelper(22405))


;---------electric

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(22405) && (time%35)=1 && helper(10000),var(40) && helper(10000),fvar(0)<1890
value = S1,21

[State 0, Explod]
type = explod
trigger1 = ishelper(22405) && (time%35)=1 && helper(10000),var(40)
anim = 10421
ID = 10421
pos = 0,-70
postype =p1
bindtime=-1
scale=1.5,2.5
sprpriority = 110
supermovetime=9999
pausemovetime=9999
ownpal=1

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

;--------------------------------------------------------------------------------
;room25
[Statedef 22500]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=20500*(ishelper(22502)||ishelper(22503)||ishelper(22504))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=1895*(ishelper(22501))+2913*(ishelper(22502))+3028*(ishelper(22503))+3140*(ishelper(22504))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=-96*(ishelper(22502))-96*(ishelper(22503))-96*(ishelper(22504))


;----button

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(22502)||ishelper(22503)||ishelper(22504)
var(10)=20500+6*(var(15)!=0)

[State 0, SprPriority]
type = SprPriority
trigger1 = ishelper(22502)||ishelper(22503)||ishelper(22504)
value = -70

[State 0, Turn]
type = Turn
trigger1 = ishelper(22502)||ishelper(22503)||ishelper(22504)
trigger1 = facing=-1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = ishelper(22502)||ishelper(22503)||ishelper(22504)
trigger1 = helper(10031),var(10)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = ishelper(22502)||ishelper(22503)||ishelper(22504)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)=0
var(11)=3

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(22502)||ishelper(22503)||ishelper(22504)
trigger1 = helper(10000),var(40)
trigger1 = time=1 && var(50)
var(15)=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = ishelper(22502)||ishelper(22503)||ishelper(22504)
trigger1 = helper(10000),var(40)
trigger1 = time=1 && var(50)
value = S4,1

[State 0, VarSet]
type = VarSet
triggerall = ishelper(22502)||ishelper(22503)||ishelper(22504)
trigger1 = time>=40
trigger2 = helper(10000),var(40)=0
var(15)=0



;------tv

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = ishelper(22501)
trigger1 = helper(22502),time<=3 && helper(22502),var(50)
trigger2 = helper(22503),time<=3 && helper(22503),var(50)
trigger3 = helper(22504),time<=3 && helper(22504),var(50)
id = 20133

[State 0, Explod]
type = explod 
triggerall = ishelper(22501)
trigger1 = helper(10000),var(40) && !numexplod(20133)
anim = 20133+helper(10030),var(13)
ID = 20133
pos = -184,31
postype = p1
bindtime=-1
removetime=-1
scale=2.07,1.75
sprpriority = -70
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
triggerall = ishelper(22501)
trigger1 = helper(10000),var(40) && numexplod(20133)=1
anim = 20133+helper(10030),var(14)
ID = 20133
pos = 0,31
postype = p1
bindtime=-1
removetime=-1
scale=2.07,1.75
sprpriority = -70
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, Explod]
type = explod 
triggerall = ishelper(22501)
trigger1 = helper(10000),var(40) && numexplod(20133)=2
anim = 20133+helper(10030),var(15)
ID = 20133
pos = 181,31
postype = p1
bindtime=-1
removetime=-1
scale=2.07,1.75
sprpriority = -70
pausemovetime=999
supermovetime=999
ownpal=1

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = ishelper(22501)
trigger1 = helper(10000),var(40)=0
id = 20133

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0


;--------------------------------------------------------------------------------
;room26
[Statedef 22600]
physics=N
movetype = I
SprPriority=-70

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10)=20132*(ishelper(22602))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(0)=2058*(ishelper(22602))+2239*(ishelper(22603))

[State 0, VarSet]
type = VarSet
trigger1 = !time
fvar(1)=4*(ishelper(22602))+4*(ishelper(22603))


;------TV

[State 0, VarSet]
type = VarSet
trigger1 = ishelper(22603)
var(10)=(20132+helper(10030),var(17))*(helper(22602),var(15)!=0)

[State 0, Explod]
type = explod
trigger1 = ishelper(22603)
trigger1 = helper(22602),var(15) && !numexplod(20133)
anim = 20132+helper(10030),var(16)
ID = 20133
pos = -75,0
postype =p1
bindtime=-1
sprpriority = -70
supermovetime=9999
pausemovetime=9999
ownpal=1

[State 0, Explod]
type = explod
trigger1 = ishelper(22603)
trigger1 = helper(22602),var(15) && !numexplod(20134)
anim = 20132+helper(10030),var(18)
ID = 20134
pos = 75,0
postype =p1
bindtime=-1
sprpriority = -70
supermovetime=9999
pausemovetime=9999
ownpal=1

;------DEFCON

[State 0, Turn]
type = Turn
trigger1 = facing=-1
trigger1 =ishelper(22602)

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 =ishelper(22602)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)=0
var(11)=3

[State 0, PlaySnd]
type = PlaySnd
trigger1 =ishelper(22602)
trigger1 = time=1 && var(50)
trigger1 = helper(10000),var(40)
value = S4,1

[State 0, VarSet]
type = VarSet
trigger1 =ishelper(22602)
trigger1 = time=2 && var(50)
trigger1 = helper(10000),var(40)
var(15)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 =ishelper(22602)
trigger1 = var(15) || helper(10031),var(10)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

;------------------system

[State 0, VarSet]
type = VarSet
trigger1 = time>=20
var(50)=0

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = floor(facing*(-helper(10000),fvar(0)+fvar(0))+ifelse(facing=1,-backedgedist,frontedgedist))

[State 0, PosAdd]
type = Posset
trigger1 = 1
y = fvar(1)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=var(0)+var(10)
value = var(0)+var(10)

[State 0, VarSet]
type = VarSet
trigger1 = !time && gethitvar(damage)
var(50)=1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(50) || time<=50 || numhelper(10080) || helper(10090),stateno=10092 || helper(10091),stateno=10092 ||helper(10092),stateno=10092 ||helper(10093),stateno=10092||numhelper(10094)||numhelper(10095)||numhelper(10096)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 20000+100*(helper(10000),var(0))
time = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = helper(10000),stateno!=10010
trigger2 = helper(10000),var(0)=0



;--------------------------------------
;----------------------------------------------------------------------
;-----------------------------------------------------------
;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]



[State 0, Helper]
type = Helper
trigger1 = !numhelper(10000) && !(numpartner && partner,numhelper(10000)) && (var(4)=[1,3])
helpertype = normal
name = "main"
ID = 10000
stateno = 10000
pos = 0,0
postype = p1
supermovetime = 99999999999999999999999999999999999999
pausemovetime = 99999999999999999999999999999999999999
ignorehitpause = 1
ownpal=1

[State 0, VarSet]
type = VarSet
trigger1 = (var(4)!=[1,3])
var(4)=1+(random%3)

[State 0, LifeSet]
type = LifeSet
trigger1 = helper(10000),var(13)=65 && (helper(10000),var(15)=40 && helper(10000),var(16)=2)
trigger1 = enemy(0),command="x" || enemy(0),command="y" || enemy(0),command="z" || enemy(0),command="a" || enemy(0),command="b" || enemy(0),command="c" || enemy(0),command="z"
value = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = (life=0||loseko||lose) && stateno!=5150
value =5150

[State 0, ChangeState]
type = ChangeState
trigger1 = !(life=0||loseko||lose||winko||win) && roundstate>=2 && stateno!=1
value =1

[State 0, ChangeState]
type = ChangeState
trigger1 = (winko||win) && (stateno!=[180,181])
value =180

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, VarSet]
type = VarSet
trigger1 = enemy(0),vel x<0 && enemy(0),statetype!=A
var(1)=1

[State 0, Turn]
type = Turn
trigger1 = p2dist x<0

[State 0, PosAdd]
type = PosAdd
trigger1 = roundstate>=2
x = ifelse(var(1)=1,600,(-600-backedgedist))
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
var(1)=0

;---------------------------------------END!----------------------------------------
