;//////////////////////////////////////////////////////////////////////////////
;村雨麗華の必殺奥義のＣＮＳ。
;//////////////////////////////////////////////////////////////////////////////
;-----------------------------------------------------------------------------------------------------------------------------------------
; 飛天脚
;-----------------------------------------------------------------------------------------------------------------------------------------
[Statedef 1305];231]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 0
ctrl = 0
velset = 0,0
anim = 231
sprpriority = 2

;------------------------- パワーゲージ
[State 0, 0]
type = PowerAdd
trigger1 = Time = 0
Persistent = 0
IgnoreHitPause = 1
value = 30
;-------------------------

;---------------------------------- キャンセル時の処理
[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 411

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 412

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 211

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 212

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 241

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 225

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 226
;----------------------------------

[State -2, EX_-1]
type = VarAdd
trigger1 = time = 0
trigger1 = Var(10) >=5
v = 10
value = -2

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time = 0
value = SCA
time=10

[State 230, 1];ボイス
type = PlaySnd
triggerall = var(13) = [0,50]
trigger1 = AnimElem = 1
value = s500,8

[State 230, 1];ボイス
type = PlaySnd
triggerall = var(13) = [51,100]
trigger1 = AnimElem = 1
value = s500,9

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State -3,ジャンプ音]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0,2;s5,0

[State -2, エフェクト]
type = Explod
trigger1 = AnimElem = 5
Persistent = 0
scale  =0.5,1.5
;IgnoreHitPause = 1
;removeongethit = 1
anim = 177
id=177
pos = 10,5
postype = p1
sprpriority = 4
bindtime = 1
removetime =20
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8

;-----------------------------------------------------
[State 230, 2];1段目
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = ceil(20+Var(18)/2)
;--------------------
getpower = 30,5
givepower =10,0
;--------------------
guardflag = M
pausetime =8,5;15
sparkno = s704
guard.sparkno =s2
sparkxy = 0,-37
hitsound =s10,1
guardsound =s10,9
ground.type = Low
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -0.5,-2
air.velocity = -1.0,-2.0
id=1303

[State 230, 2];2段目
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = hard
damage    = ceil(20+Var(18)/2)
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
guardflag = MA
pausetime =8,5;15
sparkno = s704
guard.sparkno =s2
sparkxy = 2,-50
hitsound =s10,0
guardsound =s10,9
ground.type = Low
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -1.2,-5
air.velocity = -1.8,-3.5
id=1304

[State 230, 2];3段目
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = Medium
damage    = ceil(30+Var(18)/2)
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
guardflag = MA
pausetime =12,12
sparkno = s704
guard.sparkno =s2
sparkxy = 5,-70
hitsound =s10,3
guardsound =s10,9
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -6
air.velocity = -3.5,-6.5
envshake.time = 15
envshake.ampl = 20
envshake.freq = 70
p2stateno = 850
id=1305

;-----------------------------------------------------

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1305
time = 2
add = 255,255,255
mul = 255,255,255
ignorehitpause = 1
persistent = 0

[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1305
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "raigeki"
ID = 643
pos =0,-60
postype = p2
stateno = 643
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

;-------------------------------------------- カウンター
[State 6500, counter]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1305 || target,GetHitVar(chainid) = 1304 || target,GetHitVar(chainid) = 1303
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "counter"
ID = 6499
pos =0,0
postype = p1
stateno = 6499
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-------------------------------------------- カウンター

;------------------------------------------------- エフェクト操作
[State -2, エフェクト1]
type = Explod
trigger1 = AnimElem = 4
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 232
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=232

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 5
id = 232

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 5
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 233
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=233

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 6
id = 233

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 6
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 234
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=234

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 7
id = 234

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 7
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 236
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =4
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=236
;------------------------------------------------- エフェクト操作

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 5
x = -1.6
y = -5.5

[State 105, 5]
type = StateTypeSet
trigger1 = AnimElem = 5
statetype = A

[State 105, 5]
type = StateTypeSet
trigger1 = AnimElem = 6
physics = A

[State 105, 5]
type = ChangeState
;trigger1 = Time > 10
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106
ctrl = 1

;------------------------------------------------------------------
;回転蹴りＨＩＴ時２Ｐステート
;------------------------------------------------------------------
[Statedef 850]
type = A
movetype = H
physics = N
anim = 5050

[State 8601, 1]
type = Turn
trigger1 = time = 0
trigger1 = p2dist X < -10

;[State 3005, 1]
;type = EnvShake
;trigger1 = Time = 0
;time = 10
;ampl = 15
;freq = 50
;phase = 50

[State 827, ]
type = ChangeAnim2
trigger1 = Time = 0
value = 850

[State 827, ]
type = ChangeAnim2
trigger1 = Time = 40
value = 851

[State 2027, 5]
type = Angleset
trigger1 = Time = 0
value = 0.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 12;8
value = 13.0

[State 1027, Pos]
type = Angledraw
trigger1 = Time >= 1
trigger1 = Time <= 39;35

[State 2221, 1]
type = VelSet
trigger1 = Time = [0,12]
x = 0
y = 0

[State 2221, 1]
type = VelSet
trigger1 = Time = 12
x = -4.0
y = -5.0

[State 2221, 2]
type = VelAdd
trigger1 = Time > 12
y = .38

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time > 0
value = SCA
time=1

[State 2221, 2]
type = SelfState
triggerall = Time >= 15
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;-----------------------------------------------------------------------------------------------------------------------------------------
; 双龍飛天脚
;-----------------------------------------------------------------------------------------------------------------------------------------
[Statedef 1605]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1605
sprpriority = 2

;------------------------- パワーゲージ
[State 0, 0]
type = PowerAdd
trigger1 = Time = 0
Persistent = 0
IgnoreHitPause = 1
value = 50
;-------------------------

;---------------------------------- キャンセル時の処理
[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 411

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 412

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 211

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 212

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 241

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 225

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 226
;----------------------------------

[State -2, EX_-1]
type = VarAdd
trigger1 = time = 0
trigger1 = Var(10) >=5
v = 10
value = -2

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time = 0
value = SCA
time=5

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 50
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s500,9

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State -3,ジャンプ音]
type = PlaySnd
trigger1 = AnimElem = 7
value = 0,3;s5,0

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 7
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "backhitover"
ID = 1501
pos =-10,0
postype = p1
stateno = 1501
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;--------------------------------------------------------------
[State 230, 2];1段目
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
animtype  = hard
damage    = ceil(30+Var(18)/2)
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
guardflag = M
pausetime =5,5;15
sparkno = s704
guard.sparkno =s2
sparkxy = 2,-50
hitsound =s10,0
guardsound =s10,9
ground.type = Low
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -1.2,-5
air.velocity = -1.8,-3.5
id=1604

[State 230, 2];2段目
type = HitDef
trigger1 = AnimElem = 8
attr = S, NA
animtype  = Medium
damage    = ceil(30+Var(18)/2)
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
guardflag = MA
pausetime =5,5
sparkno = s704
guard.sparkno =s2
sparkxy = 5,-70
hitsound =s10,3
guardsound =s10,9
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -2.5,-7.5
air.velocity = -2.0,-7.0
envshake.time = 15
envshake.ampl = 20
envshake.freq = 70
fall = 1
;p2stateno = 850
id=1605
;-----------------------------------------------------

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1605 || target,GetHitVar(chainid) = 1604 
time = 2
add = 255,255,255
mul = 255,255,255
ignorehitpause = 1
persistent = 0

;-------------------------------------------- カウンター
[State 6500, counter]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1605 || target,GetHitVar(chainid) = 1604 
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "counter"
ID = 6499
pos =0,0
postype = p1
stateno = 6499
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-------------------------------------------- カウンター

;------------------------------------------------- エフェクト操作
[State -2, エフェクト1]
type = Explod
trigger1 = AnimElem = 6
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 232
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=232

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 7
id = 232

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 7
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 233
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=233

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 8
id = 233

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 8
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 234
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=234

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 9
id = 234

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 9
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 236
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =4
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=236
;------------------------------------------------- エフェクト操作

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 5
x = 2.0

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 7
x = 3.5
y = -6.0

[State 105, 5]
type = StateTypeSet
trigger1 = AnimElem = 7
statetype = A

[State 105, 5]
type = StateTypeSet
trigger1 = AnimElem = 8
physics = A

[State 105, 5]
type = ChangeState
trigger1 = AnimElem = 15
value = 1606

;---------------------------------------------------------------------------
;２撃目
[Statedef 1606]
type    = A
movetype= A
physics = S
juggle  = 3
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1606
sprpriority = 2

[State -2,エフェクト消去]
type = removeExplod
trigger1 = Time = 0
id = 641

[State -2,エフェクト消去2]
type = removeExplod
trigger1 = Time = 0
id = 642

[State 3022, 0]
type = Velset
trigger1 = time >= 5
x = 0.8

[State 2500, 2]
type = VelAdd
trigger1 = time >= 3
y = .32

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 2.5
y = -5
Persistent = 0

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s500,4
channel = 5
Persistent = 0

[State 230, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 3
Persistent = 0

[State 230, 2];1段目
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = ceil(30+Var(18)/2)
;--------------------
getpower = 30,5
givepower =10,0
;--------------------
guardflag = MA
pausetime =3,3
sparkno = s704
guard.sparkno =s2
sparkxy = 0,-37
hitsound =s10,1
guardsound =s10,9
ground.type = Low
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -0.5,-2
air.velocity = -1.0,-2.0
id=1606

[State 230, 2];2段目
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = hard
damage    = ceil(30+Var(18)/2)
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
guardflag = MA
pausetime =5,5
sparkno = s704
guard.sparkno =s2
sparkxy = 2,-50
hitsound =s10,0
guardsound =s10,9
ground.type = Low
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -1.2,-5
air.velocity = -1.8,-3.5
id=1607

[State 230, 2];3段目
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = ceil(30+Var(18)/2)
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
guardflag = MA
pausetime =15,15
sparkno = s704
guard.sparkno =s2
sparkxy = 5,-70
hitsound =s10,3
guardsound =s10,9
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -2.5,-8.5
air.velocity = -2.0,-8.0
envshake.time = 20
envshake.ampl = 15
envshake.freq = 80
p2stateno = 850
id=1608

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1606 || target,GetHitVar(chainid) = 1607 || target,GetHitVar(chainid) = 1608
time = 1
add = 255,255,255
mul = 255,255,255
ignorehitpause = 1
persistent = 0

[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1608
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "raigeki"
ID = 643
pos =0,-60
postype = p2
stateno = 643
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 6000 , Super A]
type = Pause
triggerall = movehit && NumTarget
triggerall = target,GetHitVar(chainid) = 1608
trigger1 = Time = 10
trigger2 = Time = 11
trigger3 = Time = 12
trigger4 = Time = 13
trigger5 = Time = 14
time = 1

;-------------------------------------------- カウンター
[State 6500, counter]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1606 || target,GetHitVar(chainid) = 1607 || target,GetHitVar(chainid) = 1608
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "counter"
ID = 6499
pos =0,0
postype = p1
stateno = 6499
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-------------------------------------------- カウンター

;------------------------------------------------- エフェクト操作
[State 2100, 2]
type = Helper
trigger1 = AnimElem = 4
trigger1 = numhelper(1608)= 0
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "souryu"
ID = 1608
pos =5,-5
postype = p1
stateno = 1608
pausemovetime = 0;9999
supermovetime = 0;9999
bindtime = 1
keyctrl = 0
ownpal = 1
;------------------------------------------------- エフェクト操作

[State 105, 5]
type = Changeanim
trigger1 = AnimElem = 13
value = 1607

[State 105, 5]
type = ChangeState
;trigger1 = Time > 10
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106
ctrl = 1

;-------------------------------------------------------------------------------------------------
;エフェクト （双龍飛転脚）
[Statedef 1608]
type    = A
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = 3

[State 230, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 5

;[State 2501]
;type = bindtoroot
;trigger1 = time = 0
;pos = 0, 0
;time = -1

[State 105, 1]
type = VelSet
trigger1 = time >= 2
x = 2.0

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1608
ID=1608
postype =p1
pos = 0,0
vel=0,0
sprpriority = 5
bindtime = 1
removetime = 20
;ownpal = 1
supermove = 1
ignorehitpause = 1
removeongethit = 1
pausemovetime = 999
scale =1.0,1.0

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
bindtime = 1
anim = 1608
ID = 1608
sprpriority = 5
postype = p1
pos =  0, 0
scale = 1.0 +Time*0.04 , 1.0 +Time*0.04

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
;ignorehitpause = 1
var(28) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 2
;ignorehitpause = 1
var(28) = -15

[State 8100, option]
type = PalFX
trigger1 = Time >= 1
add = Var(28)-1,Var(28)-1,Var(28)-1
time = 1
;----------------------------------------

[State 2104, 9]
type = DestroySelf
trigger1 = time = 20

;-----------------------------------------------------------------------------------------------------------------------------------------
;村雨斬波
;-----------------------------------------------------------------------------------------------------------------------------------------
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1000
poweradd = 0
sprpriority = 2

[State -2, EX_-1]
type = VarAdd
trigger1 = time = 0
trigger1 = Var(10) >=5
v = 10
value = -1

;------------------------- パワーゲージ
[State 0, 0]
type = PowerAdd
trigger1 = Time = 0
Persistent = 0
IgnoreHitPause = 1
value = 40
;-------------------------

;---------------------------------- キャンセル時の処理
[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 411

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 412

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 211

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 212

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 241

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 225

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 226
;----------------------------------
[State 230, 1];ボイス
type = PlaySnd
triggerall = var(13) = [0,50]
trigger1 = AnimElem = 3
value = s500,0
channel = 5

[State 230, 1];ボイス
type = PlaySnd
triggerall = var(13) = [51,100]
trigger1 = AnimElem = 3
value = s500,1
channel = 5

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 0,2

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 6,1

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 0,4

[State -2, 着地煙１]
type = Explod
trigger1 = AnimElem = 7
anim = 182
pos = -25,0
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 0.5,-0.5
;scale  =0.8,0.8


[State 2100, 2]
type = Helper
trigger1 = AnimElem = 8
trigger1 = numhelper(1510)= 0
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "zanba1"
ID = 1510
pos =25,0
postype = p1
stateno = 1510
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 2102, 3]
type = HitDef
trigger1 = AnimElem = 8
Persistent = 0
attr = S, NP
damage = ceil(60+Var(18)/2),10
;--------------------
getpower = 120,60
givepower = 30,0
;--------------------
animtype = Hard
guardflag = MA
hitflag = MAFP
pausetime = 8,15
sparkno = s704
guard.sparkno =s2
hitsound = s10,3
guardsound = s10,9
sparkxy = 0,-50
ground.type = High
ground.slidetime = 14
ground.hittime  = 18
ground.velocity = -2.7,-5.5
air.velocity = -2.7,-5.5
fall = 1
air.recover = 0
fall.recover = 0
yaccel = .32
palfx.time = 47
palfx.mul = 70,140,230
palfx.sinadd = 50,60,90,80
palfx.add = 50,100,130
;palfx.color = 0
envshake.time = 10
envshake.ampl = 20
envshake.freq = 30
id=1000

[State 2100, ガード]
type = Helper
triggerall = MoveGuarded && NumTarget
trigger1 = target,GetHitVar(chainid) = 1000
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "Guarded"
stateno = 3
ID = 3
pos =0,-55
postype = p2
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

;-------------------------------------------- カウンター
[State 6500, counter]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1000
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "counter"
ID = 6499
pos =0,0
postype = p1
stateno = 6499
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-------------------------------------------- カウンター


[State 1071, 4]
type = ChangeState
triggerall = Command = "x"
trigger1 = Time > 30
trigger1 = Time <= 45
value = 1100

[State 1071, 4]
type = ChangeState
triggerall = Command = "b"
trigger1 = Time > 30
trigger1 = Time <= 45
value = 1200

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;斬波・星（ザンバスター)・弱
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1100
poweradd = 0
sprpriority = 2

[State -2, EX_-1]
type = VarAdd
trigger1 = time = 0
trigger1 = Var(10) >=5
v = 10
value = -1

[State 3000, Width]
type = Width
trigger1 = AnimElem = 5, >= 0
value = 30,0


[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State -2, エフェクト]
type = Explod
trigger1 = AnimElem = 5
Persistent = 0
scale  =0.5,1.5
;IgnoreHitPause = 1
;removeongethit = 1
anim = 173
id=173
pos = 5,0
postype = p1
sprpriority = 4
bindtime = 1
removetime =20
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8

[State -2, 着地煙１]
type = Explod
trigger1 = AnimElem = 6
anim = 182
pos = 35,0
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 0.5,0
scale  =0.5,0.5

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s500,2
channel = 5

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0,3

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 40,0

[State 6000, Helper]
type = Helper
trigger1 = AnimElem = 5
postype = p1
pos = 90,0
stateno = 1560
name = "zanbastar"
id = 1560
supermove = 0
pausemovetime = 0
ownpal = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;斬波・砕（ザンブラスター)・強
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1200
poweradd = 0
sprpriority = 2

[State -2, EX_-1]
type = VarAdd
trigger1 = time = 0
trigger1 = Var(10) >=5
v = 10
value = -1

[State 3000, Width]
type = Width
trigger1 = AnimElem = 5, >= 0
value = 50,0



[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State 3005, 1]
type = EnvShake
trigger1 = AnimElem = 6
time = 10
ampl = 15
freq = 50
phase = 50

[State -2, エフェクト]
type = Explod
trigger1 = AnimElem = 5
Persistent = 0
scale  =0.5,1.5
;IgnoreHitPause = 1
;removeongethit = 1
anim = 173
id=173
pos = 5,0
postype = p1
sprpriority = 4
bindtime = 1
removetime =20
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8

[State -2, 着地煙１]
type = Explod
trigger1 = AnimElem = 6
anim = 182
pos = 35,0
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 0.5,0
scale  =1.2,0.8

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s500,3
channel = 5

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0,3

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 40,0

[State 6000, Helper]
type = Helper
trigger1 = AnimElem = 5
postype = p1
pos = 100,0
stateno = 1570
name = "zanbastar2"
id = 1570
ownpal = 1
supermove = 0
pausemovetime = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------
;ザンバーエフェクト操作
[Statedef 1510]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = -1

;------------------------------------本体
[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1510
ID=1510
postype =p1
pos = 0,0
vel=0.5,-0.5
sprpriority = 3
bindtime = 1
removetime = 30
;ownpal = 1
supermove = 1
ignorehitpause = 1
removeongethit = 1
pausemovetime = 999
scale =0.8, 0.8

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 4
anim = 1510
ID = 1510
sprpriority = 3
vel=0.5,-0.5
scale =0.5 +Time*0.05 , 0.6 +Time*0.05
;------------------------------------

;------------------------------------手前
[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1501
ID=1501
postype =p1
pos = 10,0
vel=0.5,0
sprpriority = 4
bindtime = 1
removetime = 30
;ownpal = 1
supermove = 1
ignorehitpause = 1
removeongethit = 1
pausemovetime = 999
scale =0.4, 0.4

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 4
anim = 1501
ID = 1501
sprpriority = 4
vel=0.5,0
scale =0.3 +Time*0.035 , 0.3 +Time*0.015;0.05 +Time*0.01
;------------------------------------

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow


;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 1
ignorehitpause = 1
var(30) = -10

[State 8100, option]
type = PalFX
trigger1 = Time >= 1
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------

[State 2104, 9]
type = DestroySelf
trigger1 = time = 30
;--------------------------------------------------------------------------------
;ザンバスター弾
[Statedef 1560]
movetype = A
velset =  0,0
anim = 1565
sprpriority = 5

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
value = 6,3

[State 200, 1]
type = PlaySnd
trigger1 = Time = 8
value = 6,2

[State 2221, 1]
type = VelSet
trigger1 = Time >= 8
x = 5
y = 0

[State -2,削岩]
type = Explod
trigger1 = Time = 1
anim = 305
id=305
pos = 0,5
postype = p1
sprpriority = 7
;supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 0,0
;scale  =2.0,0.8

[State -2, 着地煙１]
type = Explod
triggerall = Time >= 2
trigger1 = (GameTime%5) =1
trigger1 = NumExplod(182) <=2
anim = 182
id=182
pos = -10,0
postype = p1
sprpriority = 6
;supermove = 1
;supermovetime =8
bindtime = -1
removetime =20
ownpal = 1  
vel = -1.0,0
scale  =1.5,1.0

[State 1001, 1]
type = NotHitBy 
trigger1 = 1
value = , AA, AT
time = 1

[State 10000, 3]
type = HitOverride
trigger1 = 1
slot = 1
time = 0
attr = SCA, AA, AP
stateno = 1562

[State 10000, 4]
type = ChangeState
trigger1 = MoveHit = 1
trigger2 = MoveGuarded = 1
value = 1562

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1560
ID=1560
postype =p1
pos = 0,0
vel=0,0
sprpriority = 5
bindtime = -1
removetime = 80
ownpal = 1
;supermove = 1
;pausemovetime = 999
ignorehitpause = 1
removeongethit = 1
;scale =0.1, 0.1

[State 8100, option];縮小
type = ModifyExplod
trigger1 = Time >= 15
anim = 1560
ID = 1560
sprpriority = 5
bindtime = -1
vel=0,0
scale =1.2 -Time*0.01 , 1.2 -Time*0.01

[State 8100, option];縮小
type = ModifyExplod
trigger1 = Time >= 15
anim = 182
ID = 182
sprpriority = 6
bindtime = -1
vel=0,0
scale =1.7 -Time*0.01 , 1.2 -Time*0.01

[State 2102, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NP
damage    = 40,10
;--------------------
getpower = 60,30
givepower =15,0
;--------------------
animtype = Hard
guardflag =MA
hitflag = MAFD
pausetime = 0,12
sparkno = s704
guard.sparkno =s2
hitsound = s10,3
guardsound = s10,9
sparkxy = 0,-20
ground.type = Low
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -5
air.velocity = -2.5,-3.5
;fall = 1
;air.recover = 0
;fall.recover = 0
;yaccel = .32
palfx.time = 20
palfx.mul = 70,140,230
palfx.sinadd = 50,60,90,80
palfx.add = 50,100,130
;palfx.color = 0
envshake.time = 5
envshake.ampl = 20
envshake.freq = 30
id=1560

[State 210, 5]
type = ChangeState
trigger1 = FrontEdgeDist <= -20
value = 1561
;--------------------------------------------------------------------------------
;エフェクト消去
[Statedef 1561]
type = A
movetype = A
physics = N
velset =  0,0
anim = 9999
sprpriority = 1

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 1560

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 182

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 1

;--------------------------------------------------------------------------------
;エフェクト消去
[Statedef 1562]
type = A
movetype = A
physics = N
velset =  0,0
anim = 9999
sprpriority = 1

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 1560

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 182

[State -2, 着地煙１]
type = Explod
trigger1 = time = 0
anim = 182
id=182
pos = -10,0
postype = p1
sprpriority = 6
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = -1.0,0.3
scale  =1.5,1.5

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1562
ID=1562
postype =p1
pos = 0,0
vel=-1.0,-1
sprpriority = 6
bindtime = 1
removetime = 25
;ownpal = 1
supermove = 1
ignorehitpause = 1
removeongethit = 1
pausemovetime = 999
scale =1.0, 0.6

[State 2100, 2]
type = Helper
trigger1 = Time = 0
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "kakusan"
ID = 1585
pos =0,0
postype = p1
stateno = 1585
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 1
ignorehitpause = 1
var(30) = -10

[State 8100, option]
type = PalFX
trigger1 = Time >= 1
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 25

;--------------------------------------------------------------------------------
;ブラスターその１
[Statedef 1570]
type = A
movetype = A
physics = N
velset =  0,0
anim = 1575
sprpriority = 5

[State 200, 1]
type = PlaySnd
trigger1 = Time = 0
value = 6,3

[State 10000, 1];
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1570
ID = 1570
postype =p1
pos = 0,0
vel=0,0
sprpriority = 5
bindtime = -1
removetime = 35
;ownpal = 1
;supermove = 1
;pausemovetime = 999
ignorehitpause = 1
removeongethit = 1
scale =0.1, 0.1

[State 8100, option];拡大
type = ModifyExplod
trigger1 = Time <= 15
anim = 1570
ID = 1570
sprpriority = 5
bindtime = -1
vel=0,0
scale =0.3 +Time*0.05 , 0.3 +Time*0.05

[State 8100, option];維持
type = ModifyExplod
trigger1 = Time >= 15
trigger1 = Time <= 20
anim = 1570
ID = 1570
sprpriority = 5
bindtime = -1
vel=0,0
;scale =0.8,0.8

[State 8100, option];縮小
type = ModifyExplod
trigger1 = Time >= 20
anim = 1570
ID = 1570
sprpriority = 5
bindtime = -1
vel=0,0
scale =1.5 -Time*0.02 , 1.5 -Time*0.02


;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 18
ignorehitpause = 1
var(30) = -15

[State 8100, option]
type = PalFX
trigger1 = Time >= 18
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------



;-------------------------------------------------
[State 2102, 3]
type = HitDef
trigger1 = Time = 0
attr = S, NP
damage = 20,10
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
animtype = Hard
guardflag =MA
hitflag = MAFP
pausetime = 0,0
sparkno = s704
guard.sparkno =s2
hitsound = s10,3
guardsound = s10,9
sparkxy = 0,-40
ground.type = High
ground.slidetime = 14
ground.hittime  = 18
ground.velocity = -3.0,-5.0
air.velocity = -3.0,-4.0
fall = 1
air.recover = 0
fall.recover = 0
yaccel = .32
palfx.time = 47
palfx.mul = 70,140,230
palfx.sinadd = 50,60,90,80
palfx.add = 50,100,130
;palfx.color = 0
envshake.time = 5
envshake.ampl = 20
envshake.freq = 30
id=1570

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1570
time = 1
add = 0,0,255
mul = 0,0,255
ignorehitpause = 1
persistent = 0

[State -2, 着地煙１]
type = Explod
trigger1 = Time = 1
anim = 182
id=182
pos = -5,0
postype = p1
sprpriority = 6
;supermove = 1
;supermovetime =8
bindtime = -1
removetime =20
ownpal = 1  
vel = 0,0
scale  =2.0,0.8

[State -2,削岩]
type = Explod
trigger1 = Time = 1
anim = 305
id=305
pos = -5,0
postype = p1
sprpriority = 7
;supermove = 1
;supermovetime =8
bindtime = -1
removetime =20
ownpal = 1  
vel = 0,0
;scale  =2.0,0.8

[State 2100, 2]
type = Helper
trigger1 = Time = 15
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "kakusan"
ID = 1580
pos =0,-20
postype = p1
stateno = 1580
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


[State 6000, Helper]
type = Helper
trigger1 = Time = 10
postype = p1
pos = 30,0
stateno = 1571
name = "zanbastar3"
id = 1571
ownpal = 1

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 35

;--------------------------------------------------------------------------------
;ブラスターその２
[Statedef 1571]
type = A
movetype = A
physics = N
velset =  0,0
anim = 1575
sprpriority = 5

[State 200, 1]
type = PlaySnd
trigger1 = Time = 0
value = 6,3

[State 10000, 1];
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1570
ID = 1570
postype =p1
pos = 0,0
vel=0,0
sprpriority = 5
bindtime = -1
removetime = 35
;ownpal = 1
;supermove = 1
;pausemovetime = 999
ignorehitpause = 1
removeongethit = 1
scale =0.1, 0.1

[State 8100, option];拡大
type = ModifyExplod
trigger1 = Time <= 15
anim = 1570
ID = 1570
sprpriority = 5
bindtime = -1
vel=0,0
scale =0.3 +Time*0.05 , 0.3 +Time*0.05

[State 8100, option];維持
type = ModifyExplod
trigger1 = Time >= 15
trigger1 = Time <= 20
anim = 1570
ID = 1570
sprpriority = 5
bindtime = -1
vel=0,0
scale =1.1,1.1

[State 8100, option];縮小
type = ModifyExplod
trigger1 = Time >= 20
anim = 1570
ID = 1570
sprpriority = 5
bindtime = -1
vel=0,0
scale =1.5 -Time*0.02 , 1.5 -Time*0.02


;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 18
ignorehitpause = 1
var(30) = -15

[State 8100, option]
type = PalFX
trigger1 = Time >= 18
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------



;-------------------------------------------------

[State 2102, 3]
type = HitDef
trigger1 = Time = 0
attr = S, NP
damage = 30,10
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
animtype = Hard
guardflag =MA
hitflag = MAFP
pausetime = 0,0
sparkno = s704
guard.sparkno =s2
hitsound = s10,3
guardsound = s10,9
sparkxy = 0,-40
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6.0,-5.0
air.velocity = -3.0,-4.0
fall = 1
air.recover = 0
fall.recover = 0
yaccel = .32
palfx.time = 47
palfx.mul = 70,140,230
palfx.sinadd = 50,60,90,80
palfx.add = 50,100,130
;palfx.color = 0
envshake.time = 5
envshake.ampl = 20
envshake.freq = 30
id=1571

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1571
time = 1
add = 0,0,255
mul = 0,0,255
ignorehitpause = 1
persistent = 0

[State -2, 着地煙１]
type = Explod
trigger1 = Time = 1
anim = 182
id=182
pos = -5,0
postype = p1
sprpriority = 6
;supermove = 1
;supermovetime =8
bindtime = -1
removetime =20
ownpal = 1  
vel = 0,0
scale  =2.2,1.0;0.8

[State -2,削岩]
type = Explod
trigger1 = Time = 1
anim = 305
id=305
pos = -5,0
postype = p1
sprpriority = 7
;supermove = 1
;supermovetime =8
bindtime = -1
removetime =20
ownpal = 1  
vel = 0,0
;scale  =2.0,0.8

[State 2100, 2]
type = Helper
trigger1 = Time = 15
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "kakusan"
ID = 1580
pos =0,-20
postype = p1
stateno = 1580
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 6000, Helper]
type = Helper
trigger1 = Time = 10
postype = p1
pos = 30,0
stateno = 1572
name = "zanbastar4"
id = 1572
ownpal = 1

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 35

;--------------------------------------------------------------------------------
;ブラスターその３
[Statedef 1572]
type = A
movetype = A
physics = N
velset =  0,0
anim = 1575
sprpriority = 5

[State 200, 1]
type = PlaySnd
trigger1 = Time = 0
value = 6,3

[State 10000, 1];
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1570
ID = 1570
postype =p1
pos = 0,0
vel=0,0
sprpriority = 5
bindtime = -1
removetime = 35
;ownpal = 1
;supermove = 1
;pausemovetime = 999
ignorehitpause = 1
removeongethit = 1
scale =0.1, 0.1

[State 8100, option];拡大
type = ModifyExplod
trigger1 = Time <= 15
anim = 1570
ID = 1570
sprpriority = 5
bindtime = -1
vel=0,0
scale =0.3 +Time*0.05 , 0.3 +Time*0.05

[State 8100, option];維持
type = ModifyExplod
trigger1 = Time >= 15
trigger1 = Time <= 20
anim = 1570
ID = 1570
sprpriority = 5
bindtime = -1
vel=0,0
scale =1.2,1.2

[State 8100, option];縮小
type = ModifyExplod
trigger1 = Time >= 20
anim = 1570
ID = 1570
sprpriority = 5
bindtime = -1
vel=0,0
scale =1.5 -Time*0.02 , 1.5 -Time*0.02


;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 18
ignorehitpause = 1
var(30) = -15

[State 8100, option]
type = PalFX
trigger1 = Time >= 18
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------



;-------------------------------------------------

[State 2102, 3]
type = HitDef
trigger1 = Time = 0
attr = S, NP
damage = 40,10
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
animtype  = Up
;animtype = Hard
guardflag =MA
hitflag = MAFP
pausetime = 0,15
sparkno = s704
guard.sparkno =s2
hitsound = s10,3
guardsound = s10,9
sparkxy = 0,-40
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -6.0,-5.0
air.velocity = -2.7,-7.0
fall = 1
air.recover = 0
fall.recover = 0
yaccel = .32
palfx.time = 47
palfx.mul = 70,140,230
palfx.sinadd = 50,60,90,80
palfx.add = 50,100,130
;palfx.color = 0
envshake.time = 5
envshake.ampl = 20
envshake.freq = 30
id=1572

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1572
time = 1
add = 0,0,255
mul = 0,0,255
ignorehitpause = 1
persistent = 0

[State -2, 着地煙１]
type = Explod
trigger1 = Time = 1
anim = 182
id=182
pos = -5,0
postype = p1
sprpriority = 6
;supermove = 1
;supermovetime =8
bindtime = -1
removetime =20
ownpal = 1  
vel = 0,0
scale  =2.5,1.2;0.8

[State -2,削岩]
type = Explod
trigger1 = Time = 1
anim = 305
id=305
pos = -5,0
postype = p1
sprpriority = 7
;supermove = 1
;supermovetime =8
bindtime = -1
removetime =20
ownpal = 1  
vel = 0,0
;scale  =2.0,0.8

[State 2100, 2]
type = Helper
trigger1 = Time = 15
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "kakusan"
ID = 1580
pos =0,-20
postype = p1
stateno = 1580
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 35


;-------------------------------------------------------------------------------------------------
;拡散エフェクト ブラスター用
[Statedef 1580]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = 3

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1580
ID=1580
postype =p1
pos = 0,-20
vel=0,-3
sprpriority = 7
bindtime = 1
removetime = 25
;ownpal = 1
supermove = 1
ignorehitpause = 1
removeongethit = 1
pausemovetime = 999
scale =0.1,0.1

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
bindtime = 1
anim = 1580
ID = 1580
vel=0,-3
sprpriority = 7
postype = p1
pos =  0, 0
scale = 0.5 -Time*0.01 , 0.5 +Time*0.10

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 5
ignorehitpause = 1
var(30) = -15

[State 8100, option]
type = PalFX
trigger1 = Time >= 5
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------


[State 2104, 9]
type = DestroySelf
trigger1 = time = 25



;-------------------------------------------------------------------------------------------------
;拡散エフェクト バスター用
[Statedef 1585]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = 3

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1580
ID=1580
postype =p1
pos = 0,0
vel=0,0
sprpriority = 7
bindtime = 1
removetime = 35
;ownpal = 1
supermove = 1
ignorehitpause = 1
removeongethit = 1
pausemovetime = 999
scale =0.1,0.1

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
bindtime = 1
anim = 1580
ID = 1580
sprpriority = 7
postype = p1
pos =  0, 0
scale = 0.3 +Time*0.05 , 0.3 +Time*0.05

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 10
ignorehitpause = 1
var(30) = -10

[State 8100, option]
type = PalFX
trigger1 = Time >= 10
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------

[State 2104, 9]
type = DestroySelf
trigger1 = time = 35

;------------------------------------------------------------------------------------------------------------------------------------
;流水
;------------------------------------------------------------------------------------------------------------------------------------
[Statedef 1300]
type    = S
movetype= I
physics = S
juggle  = 0
vel = 0,0
ctrl = 0
anim = 1300
sprpriority = -1

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time >= 1
value = , NA, SA, HA, NP, SP, HP  
time=1

[State 110, 0]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 3500 ]
type = Palfx    
trigger1= Time = 5
trigger2= Time = 24
time = 7
ignorehitpause = 1
add = -12,-12,-12
;invertall = 1

[State 3500 ]
type = Palfx    
trigger1= Time = 12
time = 12
ignorehitpause = 1
add = -24,-24,-24
;invertall = 1

[State 230, 1];ボイス
type = PlaySnd
triggerall = var(13) = [0,50]
trigger1 = AnimElem = 1
value = s600,0
channel = 5

[State 230, 1];ボイス
type = PlaySnd
triggerall = var(13) = [51,100]
trigger1 = AnimElem = 1
value = s600,1
channel = 5

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 10
value = 800,0

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1071, 4];喉通し（通常）
type = ChangeState
triggerall = Command = "x"
trigger1 = time >= 13
trigger1 = time <= 24
value = 1310

[State 1071, 4];足打ち（下段）
type = ChangeState
triggerall = Command = "a"
trigger1 = time >= 13
trigger1 = time <= 24
value = 1320

[State 1071, 4];兜割り（中段）
type = ChangeState
triggerall = Command = "b"
trigger1 = time >= 13
trigger1 = time <= 24
value = 1330

[State 1071, 4];中断（キャンセル）
type = ChangeState
triggerall = Command = "y"
trigger1 = time >= 13
trigger1 = time <= 24
value = 1306;231;1305

;---------------------------------------------------------------------------
;流水中断
[Statedef 1306];231];1305]
type    = S
movetype= I
physics = S
juggle  = 0
vel = 0,0
ctrl = 0
anim = 1305
sprpriority = -1

[State 110, 0]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 3500 ]
type = Palfx    
trigger1= Time = 1
time = 3
ignorehitpause = 1
add = -24,-24,-24
;invertall = 1

[State 3500 ]
type = Palfx    
trigger1= Time = 3
time = 3
ignorehitpause = 1
add = -12,-12,-12
;invertall = 1

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 800,0

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 追い水・喉通し
[Statedef 1310]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1310
sprpriority = 2

[State 3500 ]
type = Palfx    
trigger1= Time = 0
time = 1
ignorehitpause = 1
add = -12,-12,-12
;invertall = 1

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
timeGap  = 2
frameGap = 1
length = 4
palBright   =   0,  0, 80
palContrast = 240,240,255
palAdd      =   0,  0,  0
palMul      =   1,  1,  1
trans = none;add1


[State 3000, Width]
type = Width
trigger1 = AnimElem = 5, >= 0
value = 30,0

[State -2, エフェクト]
type = Explod
trigger1 = AnimElem = 6
anim = 1311
id=1311
pos = 0,0
IgnoreHitPause = 1
removeongethit = 1
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = -1
removetime =6
ownpal = 1  
vel = 0,0
;scale  =0.8,0.8

[State -2, エフェクト]
type = Explod
trigger1 = AnimElem = 4
Persistent = 0
scale  =0.5,1.5
;IgnoreHitPause = 1
;removeongethit = 1
anim = 173
id=173
pos = 5,0
postype = p1
sprpriority = 4
bindtime = 1
removetime =20
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8

[State 230, 1]
type = PlaySnd
trigger1 = Time = 6
value = 0, 2

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 6
Persistent = 0
attr = S, SA
animtype  = hard
damage = ceil(120*Var(10)/100)+Var(18),5;damage    = 60,10
;--------------------
getpower = 60,30
givepower =15,0
;--------------------
guardflag = MA
pausetime = 5,15
sparkno =s705
guard.sparkno =s2
sparkxy = -10,-50
hitsound =s10,6
guardsound =s10,9
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -5.5
air.velocity = -2.5,-4
id=1310

;-----------------------------------------------
[State 2100, ガード]
type = Helper
triggerall = MoveGuarded && NumTarget
trigger1 = target,GetHitVar(chainid) = 1310
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "Guarded"
stateno = 3
ID = 3
pos =0,-55
postype = p2
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 2100, 2];血
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1310
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "chi"
ID = 706
pos =0,-50
postype = p2
stateno = 706
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1310
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "zanhit"
ID = 1503
pos =0,-50
postype = p2
stateno = 1503
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1310
time = 1
add = 255,0,0
mul = 255,0,0
ignorehitpause = 1
persistent = 0

;-------------------------------------------- カウンター
[State 6500, counter]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1310
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "counter"
ID = 6499
pos =0,0
postype = p1
stateno = 6499
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-------------------------------------------- カウンター

;-----------------------------------------------

;ガード分岐
[State 830, 4]
type = ChangeState
trigger1 = MoveGuarded = 1
value = 250
ctrl = 0

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1071, 4]
type = ChangeState
triggerall = Command = "y"
triggerall = movehit != 0
trigger1 = time <= 20
value = 1315

;---------------------------------------------------------------------------
; 追い水・喉通し(追い打ち)
[Statedef 1315]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1315
sprpriority = 2

[State 100 , 1]
type = VelSet
trigger1 = time >= 11
trigger1 = movehit = 0
x = 1.2

[State 801, ]
type = TargetBind
triggerall = p2bodydist X < 65
trigger1 = movehit = 0
trigger1 = time = 10
pos = 45, 0


[State -2, エフェクト]
type = Explod
trigger1 = AnimElem = 8
Persistent = 0
scale  =2.0,1.0
IgnoreHitPause = 1
removeongethit = 1
anim = 752
id=752
pos = 60,-55
postype = p1
sprpriority = 4
bindtime = -1
removetime =10
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8


[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
timeGap  = 2
frameGap = 1
length = 4
palBright   =   0,  0, 80
palContrast = 240,240,255
palAdd      =   0,  0,  0
palMul      =   1,  1,  1
trans = none;add1

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 7
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "backhitover"
ID = 1501
pos =-20,0
postype = p1
stateno = 1501
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s600,2
channel = 5

[State 230, 1];失敗ボイス
type = PlaySnd
trigger1 = AnimElem = 9
trigger1 = movehit =0
value = s600,3
channel = 5

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 240, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 6

[State -2, 着地煙２]
type = Explod
trigger1 = AnimElem = 8
anim = 182
pos = -15,0
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = -0.5,0
scale  =0.5,0.5

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 20,10
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
guardflag = MA
pausetime =10,5
sparkno = s704
guard.sparkno =s2
sparkxy = -10,-40
hitsound =s10,1
guardsound =s10,9
ground.type = Low
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -5
air.velocity = -2.5,-3.5
p2stateno = 4015
id=1315

[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1315
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "koukasen"
ID = 1502
pos =0,0
postype = p1
stateno = 1502
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1315
time = 1
add = 255,255,255
mul = 255,255,255
ignorehitpause = 1
persistent = 0

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 9
trigger1 = movehit =0
Persistent = 0
;IgnoreHitPause = 1
helpertype = normal
name = "fukidashi"
ID = 7800
pos =-20,-100
postype = p1
stateno = 7800
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 追い水・足打ち
[Statedef 1320]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 0
ctrl = 0
anim = 1320
sprpriority = 2


[State 3500 ]
type = Palfx    
trigger1= Time = 0
time = 1
ignorehitpause = 1
add = -12,-12,-12
;invertall = 1

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 6
time = 20
timeGap  = 2
frameGap = 1
length = 4
palBright   =   0,  0, 80
palContrast = 240,240,255
palAdd      =   0,  0,  0
palMul      =   1,  1,  1
trans = none;add1

[State 430, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 2

[State 802, 0]
type = VelSet
trigger1 = Time >= 6
x = 1.0
y = 0

[State -2, エフェクト]
type = Explod
trigger1 = AnimElem = 10
anim = 435
id=435
pos = 33,3;22,5
IgnoreHitPause = 1
removeongethit = 1
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = -1
removetime =7
ownpal = 1  
vel = 0,0
;scale  =0.8,0.8


[State -2, ダッシュエフェクト]
type = Explod
trigger1 = AnimElem = 9
Persistent = 0
scale  =0.5,0.5
;IgnoreHitPause = 1
;removeongethit = 1
anim = 173
id=173
pos = 20,0
postype = p1
sprpriority = 3
bindtime = 1
removetime =20
ownpal = 1
vel = -1,0
Pausemovetime=0
;supermove = 1
;supermovetime =8

[State 440, 3]
type = HitDef
trigger1 = AnimElem = 11
Persistent = 0
attr = C, SA
damage    = ceil(60+Var(18)/2),10
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
hitflag = MAFD
guardflag = L
pausetime = 10,10
sparkno = s704
guard.sparkno =s2
sparkxy = 0,-15
hitsound =s10,1
guardsound =s10,9
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -2.0,-4.0
air.velocity = -1.8,-3.2
guard.velocity = -3
fall = 1
fall.recover = 1
id=1320

[State 2100, ガード]
type = Helper
triggerall = MoveGuarded && NumTarget
trigger1 = target,GetHitVar(chainid) = 1320
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "Guarded"
stateno = 3
ID = 3
pos =0,-20
postype = p2
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1320
time = 1
add = 255,255,255
mul = 255,255,255
ignorehitpause = 1
persistent = 0

;-------------------------------------------- カウンター
[State 6500, counter]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1320
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "counter"
ID = 6499
pos =0,0
postype = p1
stateno = 6499
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-------------------------------------------- カウンター

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 1071, 4]
type = ChangeState
triggerall = Command = "y"
triggerall = movehit != 0
trigger1 = time <= 32
value = 1325
;---------------------------------------------------------------------------
; 追い水・足打ち(追い打ち)
[Statedef 1325]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = 1325
sprpriority = 2

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 4
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "backhitover"
ID = 1501
pos =-20,0
postype = p1
stateno = 1501
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
timeGap  = 2
frameGap = 1
length = 4
palBright   =   0,  0, 80
palContrast = 240,240,255
palAdd      =   0,  0,  0
palMul      =   1,  1,  1
trans = none;add1

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s600,2
channel = 5

[State 410, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 2

[State -2, 着地煙１]
type = Explod
trigger1 = AnimElem = 3
anim = 182
pos = -25,0
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 1,0
scale  =0.5,0.5

[State 210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = Medium
damage = ceil(60*Var(10)/100),5;damage    = 20,10
;--------------------
getpower = 60,30
givepower =15,0
;--------------------
guardflag = M
pausetime = 5,5
sparkno =s710
guard.sparkno =s2
sparkxy = -10,-70
hitsound =s10,2
guardsound =s10,9
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -2,-4
air.velocity = -2,-4
;air.fall = 1
envshake.time = 15
envshake.ampl = 15
envshake.freq = 50
id=1325
p2stateno = 850
;-----------------------------------------------
[State 2100, 2];血
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1325
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "chi"
ID = 706
pos =0,-70
postype = p2
stateno = 706
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1325
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "zanhit"
ID = 1503
pos =0,-70
postype = p2
stateno = 1503
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1325
time = 1
add = 255,0,0
mul = 255,0,0
ignorehitpause = 1
persistent = 0
;-----------------------------------------------
;ガード分岐
[State 830, 4]
type = ChangeState
trigger1 = MoveGuarded = 1
value = 450
ctrl = 0

[State 2100, 2];回転刀
type = Helper
trigger1 = AnimElem = 7
trigger1 = numhelper(1326) <= 0
helpertype = normal
name = "katana"
ID = 1326
pos =  40,-100;20,-120
postype = p1
stateno = 1326
keyctrl = 0
ownpal = 1

[State 2100, 2];
type = Helper
trigger1 = AnimElem = 8
trigger1 = numhelper(1327) <= 0
helpertype = normal
name = "tukami"
ID = 1327
pos =  0,0;20,-120
postype = p1
stateno = 1327
keyctrl = 0
ownpal = 1

[State 410, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 10,4

;[State 2100, 2]
;type = Helper
;trigger1 = AnimElem = 5
;trigger1 = movehit =0
;Persistent = 0
;;IgnoreHitPause = 1
;helpertype = normal
;name = "fukidashi"
;ID = 7800
;pos =-20,-100
;postype = p1
;stateno = 7800
;pausemovetime = 9999
;supermovetime = 9999
;bindtime = 1
;keyctrl = 0
;ownpal = 1


[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-------------------------------------------------------------------
;刀パーツ
[Statedef 1326]
type    = S
physics = S
velset = 0,0
anim = 1326
ctrl = 0
sprpriority = 1

[State 410, 1]
type = PlaySnd
trigger1 = (GameTime%5) =1;Time = 0
value = 0, 6
channel = 5

[State 2501]
type = bindtoroot
trigger1 = parent,Alive = 1
pos = 40,-100
time = -1

[State 2027, 5]
type = Angleset
trigger1 = Time = 0
value = 0.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 1
value = 35.0;17.0

[State 1027, Pos]
type = Angledraw
trigger1 = Time >= 1

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 20
trigger2 = parent,movetype = H

;-------------------------------------------------------------------------------------------------
;エフェクト・ヘルパー
[Statedef 1327]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = -1

;[State 2501]
;type = bindtoroot
;;trigger1 = parent,Statetype = A
;trigger1 = IsHelper(1327) = 1
;pos = 0, 0
;time = -1

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1327
ID=1327
postype =p1
pos = 40,-100
vel=0,0
sprpriority = 10
bindtime = -1
removetime = 26
;ownpal = 1
ontop = 1
supermove = 1
;ignorehitpause = 1
;removeongethit = 1
pausemovetime = 999
scale =0.0, 0.0

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
anim = 1327
ID = 1327
sprpriority = 10
vel=0,0
scale =0.2 +Time*0.02 , 0.2 +Time*0.02

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 5
ignorehitpause = 1
var(30) = -10

[State 8100, option]
type = PalFX
trigger1 = Time >= 5
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------

[State 2104, 9]
type = DestroySelf
trigger1 = time = 26

;---------------------------------------------------------------------------
; 追い水・ 兜割り
[Statedef 1330]
type = S
movetype = A
physics = N
anim = 1330
velset = 0
ctrl = 0
poweradd = 0
juggle = 0


[State 3500 ]
type = Palfx    
trigger1= Time = 0
time = 1
ignorehitpause = 1
add = -12,-12,-12
;invertall = 1

[State 3050, Super B]
type = AfterImage
trigger1= Time = 0
time = 20
timeGap  = 2
frameGap = 1
length = 4
palBright   =   0,  0, 80
palContrast = 240,240,255
palAdd      =   0,  0,  0
palMul      =   1,  1,  1
trans = none;add1

[State -2, エフェクト]
type = Explod
trigger1 = AnimElem = 5
Persistent = 0
;scale  =0.5,1.5
;IgnoreHitPause = 1
;removeongethit = 1
anim = 173
id=173
pos = 40,0
postype = p1
sprpriority = 4
bindtime = 1
removetime =20
ownpal = 1
vel = -0.2,0
Pausemovetime=0
;supermove = 1
;supermovetime =8

[State 1000, ]
type = ChangeState
trigger1 = AnimTime = 0
value = 1331

;---------------------------------------------------------------------------
; 追い水・ 兜割り2
[Statedef 1331]
type    = A;S
movetype= A
physics = S
juggle  = 10
ctrl = 0
velset = 0,0
anim = 1331
sprpriority = 2

[State 3022, 0]
type = Velset
trigger1 = time = [0,10]
x = 1.5
y = -2.8

[State 2500, 2]
type = VelAdd
trigger1 = time >= 12
y = .32

[State 900, 4]
type = HitDef
trigger1 = AnimElem = 7
Persistent = 0
attr = A, SA
damage = ceil(80*Var(10)/100)+Var(18),10;damage = 40,10
;--------------------
getpower = 60,30
givepower =15,0
;--------------------
guardflag = HA
priority = 4
pausetime = 5,15
sparkno =s710
guard.sparkno =s2
sparkxy = -10,-20
hitsound =s10,2
guardsound =s10,9
animtype = Med
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6
air.velocity = -7,-5
id=1330

[State 2100, ガード]
type = Helper
triggerall = MoveGuarded && NumTarget
trigger1 = target,GetHitVar(chainid) = 1330
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "Guarded"
stateno = 3
ID = 3
pos =0,-55
postype = p2
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-----------------------------------------------
[State 2100, 2];血
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1330
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "chi"
ID = 706
pos =0,-60
postype = p2
stateno = 706
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1330
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "zanhit"
ID = 1503
pos =0,-60
postype = p2
stateno = 1503
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1330
time = 1
add = 255,0,0
mul = 255,0,0
ignorehitpause = 1
persistent = 0

[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1330
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "srow"
ID = 1505
pos =0,0
postype = p1
stateno = 1505
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

;-------------------------------------------- カウンター
[State 6500, counter]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1330
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "counter"
ID = 6499
pos =0,0
postype = p1
stateno = 6499
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-------------------------------------------- カウンター

;-----------------------------------------------

[State 240, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 1103, 2]
type = PosSet
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0

[State 105, 5]
type = StateTypeSet
trigger1 = Pos Y >= -10
physics = n

[State -2, エフェクト1]
type = Explod
trigger1 = AnimElem = 5
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 641
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=641

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 8
id = 641

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 8
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 642
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =5
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=642

;ガード分岐
[State 830, 4]
type = ChangeState
trigger1 = MoveGuarded = 1
value = 650
ctrl = 0

[State 1071, 4]
type = ChangeState
triggerall = Command = "y"
trigger1 = movehit != 0
value = 1335

[State 105, 5]
type = ChangeState
trigger1 = Time >= 10
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; 追い水・ 兜割り（追い打ち）
[Statedef 1335]
type    = A
movetype= A
physics = S
juggle  = 3
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1335
sprpriority = 2

[State -2,エフェクト消去]
type = removeExplod
trigger1 = Time = 0
id = 641

[State -2,エフェクト消去2]
type = removeExplod
trigger1 = Time = 0
id = 642

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
timeGap  = 2
frameGap = 1
length = 4
palBright   =   0,  0, 80
palContrast = 240,240,255
palAdd      =   0,  0,  0
palMul      =   1,  1,  1
trans = none;add1

[State 3022, 0]
type = Velset
trigger1 = time >= 5
x = -0.8

[State 2500, 2]
type = VelAdd
trigger1 = time >= 3
y = .32

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s600,2
channel = 5

[State 230, 1];失敗ボイス
type = PlaySnd
trigger1 = AnimElem = 3
trigger1 = movehit =0
value = s600,3
channel = 5

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
damage = 10
;--------------------
getpower = 60,30
givepower =15,0
;--------------------
animtype  = Up
;animtype = Hard
guardflag =MA
hitflag = MAFP
pausetime = 5,5
sparkno = s704
guard.sparkno =s2
;guard.sparkno	=s690
hitsound = s10,3
guardsound = s10,9
sparkxy = 0,-20
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0,-15.0
air.velocity = -2.0,-15.0
fall = 1
air.recover = 0
fall.recover = 0
yaccel = .32
;palfx.time = 47
;palfx.mul = 70,140,230
;palfx.sinadd = 50,60,90,80
;palfx.add = 50,100,130
;palfx.color = 0
envshake.time = 5
envshake.ampl = 20
envshake.freq = 30
id=1335

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1335
time = 1
add = 255,255,255
mul = 255,255,255
ignorehitpause = 1
persistent = 0

[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1335
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "srw2"
ID = 1504
pos =0,0
postype = p1
stateno = 1504
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 105, 1]
type = VelSet
trigger1 = AnimElem = 3
x = -1.5
y = -5


;------------------------------------------------- エフェクト操作
[State -2, エフェクト1]
type = Explod
trigger1 = AnimElem = 2
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 232
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=232

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 3
id = 232

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 3
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 233
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=233

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 4
id = 233

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 4
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 234
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =-1
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=234

[State -2, kesu]
type = removeExplod
trigger1 = AnimElem = 5
id = 234

[State -2, エフェクト2]
type = Explod
trigger1 = AnimElem = 5
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 236
pos = 0,0
postype = p1
sprpriority = 3
bindtime = -1
removetime =4
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8
id=236
;------------------------------------------------- エフェクト操作




[State 2100, 2]
type = Helper
trigger1 = AnimElem = 3
trigger1 = movehit =0
Persistent = 0
;IgnoreHitPause = 1
helpertype = normal
name = "fukidashi"
ID = 7800
pos =-20,-100
postype = p1
stateno = 7800
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


[State 105, 5]
type = ChangeState
;trigger1 = Time > 10
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106
ctrl = 1


;-------------------------------------------------------------------
; スパロボチックなエフェクト効果線の操作 （縦）
[Statedef 1504]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = -1

[State 200, 1]
type = PlaySnd
trigger1 = time = 0
value = 800, 1

;---------------------------------------
[State -2, スクリーン効果]
type = Explod
triggerall = NumExplod(7781) = 0
trigger1 = time = 0
;Persistent = 0
scale =1.0,1.0
IgnoreHitPause = 1
removeongethit = 1
anim = 7781
id=7781
pos = 0,-2200
postype = back
sprpriority = -10
bindtime = 1
removetime =80
ownpal = 1
;ontop = 1
vel = 0,25
Pausemovetime=-1
supermove = 1
;supermovetime =8

[State -2, エフェクト効果]
type = Explod
triggerall = NumExplod(7787) = 0
trigger1 = time = 0
;Persistent = 0
scale =1.0,1.0
IgnoreHitPause = 1
removeongethit = 1
anim = 7787
id=7787
pos = 0,-1100
postype = back
sprpriority = 15
bindtime = 1
removetime =-1
ownpal = 1
ontop = 1
vel = 0,15
Pausemovetime=-1
supermove = 1
;supermovetime =8

[State -2, エフェクト効果]
type = Explod
triggerall = NumExplod(7788) = 0
trigger1 = time = 0
;Persistent = 0
scale =1.0,1.0
IgnoreHitPause = 1
removeongethit = 1
anim = 7788
id=7788
pos = 320,-1100
postype = back
sprpriority = 15
bindtime = 1
removetime =-1
ownpal = 1
ontop = 1
vel = 0,15
Pausemovetime=-1
supermove = 1
;supermovetime =8
;---------------------------------------
[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
anim = 7781
ID = 7781
sprpriority = -10
;vel = -60,0
scale =1.0 ,8.0 +Time*0.25;-Time*0.03 

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 30
anim = 7787
ID = 7787
sprpriority = 15
;vel = -30,0
scale =1.8 -Time*0.028, 1.8 +Time*0.03

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 30
anim = 7788
ID = 7788
sprpriority = 15
;vel = -30,0
scale =1.8 -Time*0.028 , 1.8 +Time*0.03

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

[State -2, kesu]
type = removeExplod
trigger1 = Time = 64
id = 7787

[State -2, kesu]
type = removeExplod
trigger1 = Time = 64
id = 7788

[State 2104, 9]
type = DestroySelf
trigger1 = Time = 65;parent,stateNo =0


;-----------------------------------------------------------------------------------------------------------------------------------------
;裏旋風
;-----------------------------------------------------------------------------------------------------------------------------------------
[Statedef 1400]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 0
ctrl = 0
velset = 5,0
anim = 1400
sprpriority = 3

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 1
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "backhitover"
ID = 1500
pos =0,0
postype = p1
stateno = 1500
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 3050, Super B]
type = AfterImage
trigger1 = Time = 1
time = 35
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s600,4

[State 230, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 210, 2]
type = HitDef
trigger1 = (GameTime%12) =1
attr = S, NA
animtype  = Medium
damage = ceil(30*Var(10)/100), 5;damage    = 15,5
;--------------------
getpower = 20,10
givepower = 5,0
;--------------------
guardflag = M
pausetime = 8,10
sparkno =s705
guard.sparkno =s2
sparkxy = -5,-60
hitsound =s10,2
guardsound =s10,8
ground.type = High
ground.slidetime = 16
ground.hittime  = 22
ground.velocity = -6.0
air.velocity = -3.5,-3.5
id=1400


;-----------------------------------------------------------
[State 2100, 2]; 斬！
type = Helper
triggerall = movehit && NumTarget
triggerall = numhelper(1420) = 0
trigger1 = target,GetHitVar(chainid) = 1400
;Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "zanhit ver2"
ID = 1420
pos =0,-60
postype = p2
stateno = 1420
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 2100, ガード]
type = Helper
triggerall = MoveGuarded && NumTarget
trigger1 = target,GetHitVar(chainid) = 1400
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "Guarded"
stateno = 3
ID = 3
pos =0,-55
postype = p2
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1



[State 2100, 2];血
type = Helper
triggerall = movehit && NumTarget
triggerall = numhelper(706) = 0
trigger1 = target,GetHitVar(chainid) = 1400
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "chi"
ID = 706
pos =0,-60
postype = p2
stateno = 706
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1400
time = 5
add = 255,0,0
mul = 255,0,0
ignorehitpause = 1
persistent = 0
;-----------------------------------------------------------

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 3
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "katana1"
ID = 1401
stateno = 1401
;size.xscale=0.5
;size.yscale=2
pos =0,0
postype = p1
;pausemovetime = 9999
;supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 210, 5]
type = ChangeState
trigger1 = Time = 30
value = 1405

;---------------------------------------------------------------------------
;裏旋風2
[Statedef 1405]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1405
sprpriority = 3

[State 2100, 2];
type = Helper
trigger1 = Time = 1
trigger1 = numhelper(1402) <= 0
helpertype = normal
name = "tukami"
ID = 1402
pos =  0,0;20,-120
postype = p1
stateno = 1402
keyctrl = 0
ownpal = 1

[State 230, 1]
type = PlaySnd
trigger1 = Time = 1
value = 10, 4

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------
;刀パーツ
[Statedef 1401]
type    = S
physics = S
velset = 0,0
anim = 1401
ctrl = 0
sprpriority = 1

[State 3050, Super B]
type = AfterImage
trigger1 = Time = 1
time = 30
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State 410, 1]
type = PlaySnd
trigger1 = (GameTime%5) =1;Time = 0
value = 0, 6
channel = 5

[State 2501]
type = bindtoroot
trigger1 = parent,Alive = 1
pos = 53,-63
time = -1

[State 2027, 5]
type = Angleset
trigger1 = Time = 0
value = 0.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 1
;trigger1 = Time <= 25
value = 40;35.0;17.0

;[State 2027, 5]
;type = AngleAdd
;trigger1 = Time >= 25
;value = 15;13.0

[State 1027, Pos]
type = Angledraw
trigger1 = Time >= 1

[State -2, 着地煙１]
type = Explod
trigger1 = (GameTime%10) =1
anim = 182
pos = 5,64
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 1,0
;scale  =0.8,0.5

[State -2, 着地煙２]
type = Explod
trigger1 = (GameTime%10) =1
anim = 182
pos = -5,64
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = -1,0
;scale  =0.8,0.5

[State 10000, 6]
type = DestroySelf
trigger1 = parent,Stateno = 1405
trigger2 = parent,movetype = H

;-------------------------------------------------------------------------------------------------
;エフェクト・ヘルパー
[Statedef 1402]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = 3

;[State 2501]
;type = bindtoroot
;;trigger1 = parent,Statetype = A
;trigger1 = IsHelper(1327) = 1
;pos = 0, 0
;time = -1

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1327
ID=1327
postype =p1
pos = 60,-55
vel=0,0
sprpriority = 10
bindtime = -1
removetime = 26
;ownpal = 1
ontop = 1
supermove = 1
;ignorehitpause = 1
;removeongethit = 1
pausemovetime = 999
scale =0.0, 0.0

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
anim = 1327
ID = 1327
sprpriority = 10
vel=0,0
scale =0.2 +Time*0.02 , 0.2 +Time*0.02

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow


;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 5
ignorehitpause = 1
var(30) = -10

[State 8100, option]
type = PalFX
trigger1 = Time >= 5
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------

[State 2104, 9]
type = DestroySelf
trigger1 = time = 26


;-----------------------------------------------------------------------------------------------------------------------------------------
;空中裏旋風
;-----------------------------------------------------------------------------------------------------------------------------------------
[Statedef 1410]
type    = A
movetype= A
physics = S
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1410
sprpriority = 3

;[State 3500 ]
;type = Palfx    
;triggerall = time = 99999
;trigger1 = PrevStateNo = 635
;trigger1 = P2statetype != A
;trigger1 = P2statetype != L
;ignorehitpause = 1
;time = 1
;add = 255,255,255
;invertall = 1

[State 3050, Super B]
type = PosFreeze
trigger1 = 1
value = 1

[State 3050, Super B]
type = AfterImage
trigger1 = Time = 1
time = 30
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s600,4

[State 230, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 210, 2]
type = HitDef
trigger1 = (GameTime%5) =1
attr = S, NA
animtype  = Medium
damage = ceil(30*Var(10)/100), 5;damage    = 15,5
;--------------------
getpower = 20,10
givepower = 5,0
;--------------------
guardflag = MA
pausetime = 8,15
sparkno =s705
guard.sparkno =s2
sparkxy = 0,-60
hitsound =s10,2
guardsound =s10,8
ground.type = High
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -3.5
air.velocity = -1.0,-2.5
id=1410

;-----------------------------------------------------------
[State 2100, 2]; 斬！
type = Helper
triggerall = movehit && NumTarget
triggerall = numhelper(1420) = 0
trigger1 = target,GetHitVar(chainid) = 1410
;Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "zanhit ver2"
ID = 1420
pos =0,-60
postype = p2
stateno = 1420
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


[State 2100, ガード]
type = Helper
triggerall = MoveGuarded && NumTarget
trigger1 = target,GetHitVar(chainid) = 1410
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "Guarded"
stateno = 3
ID = 3
pos =0,-55
postype = p2
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


;[State 2100, 2];血
;type = Helper
;triggerall = movehit && NumTarget
;triggerall = numhelper(706) = 0
;trigger1 = target,GetHitVar(chainid) = 1410
;Persistent = 0
;IgnoreHitPause = 1
;helpertype = normal
;name = "chi"
;ID = 706
;pos =0,-60
;postype = p2
;stateno = 706
;pausemovetime = 9999
;supermovetime = 9999
;bindtime = 1
;keyctrl = 0
;ownpal = 1

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1410
time = 5
add = 255,0,0
mul = 255,0,0
ignorehitpause = 1
persistent = 0
;-----------------------------------------------------------

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 3
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "katana2"
ID = 1411
stateno = 1411
;size.xscale=0.5
;size.yscale=2
pos =0,0
postype = p1
;pausemovetime = 9999
;supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 210, 5]
type = ChangeState
trigger1 = Time = 15
value = 1414

;---------------------------------------------------------------------------
;空中裏旋風2
[Statedef 1414]
type    = A
movetype= A
physics = S
juggle  = 1
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1414
sprpriority = 3

[State 3050, Super B]
type = PosFreeze
trigger1 = 1
value = 1

[State 210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
;--------------------
getpower = 60,30
givepower =15,0
;--------------------
animtype  = back
damage = ceil(50*Var(10)/100), 5;damage    = 30,5
guardflag = MA
pausetime = 8,5
sparkno =s710
guard.sparkno =s2
sparkxy = 0,-60
hitsound =s10,3
guardsound = s10,9
ground.type = High
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -4.0,-3.5
air.velocity = -3.6,2;-3.5
fall = 1
air.recover = 0
fall.recover = 0
yaccel = .35
;palfx.time = 2
;palfx.mul = 255,0,0
;palfx.sinadd = 50,60,90,80
;palfx.add = 255,0,0
;palfx.color = 0
envshake.time = 10
envshake.ampl = 20
envshake.freq = 30
id=1414

;-----------------------------------------------------------

[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
;triggerall = numhelper(1503) <= 2
trigger1 = target,GetHitVar(chainid) = 1414
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "zanhit"
ID = 1503
pos =0,-60
postype = p2
stateno = 1503
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 2100, 2];血
type = Helper
triggerall = movehit && NumTarget
;triggerall = numhelper(706) = 0
trigger1 = target,GetHitVar(chainid) = 1414
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "chi"
ID = 706
pos =0,-60
postype = p2
stateno = 706
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 1414
time = 1
add = 255,255,255
ignorehitpause = 1
persistent = 0
;-----------------------------------------------------------

;ガード分岐
[State 830, 4]
type = ChangeState
trigger1 = MoveGuarded = 1
value = 650
ctrl = 0

[State 210, 5]
type = ChangeState
trigger1 = Time = 10
trigger2 = movehit!=0
value = 1415

;-------------------------------------------------------------------
;刀パーツ
[Statedef 1411]
type    = S
physics = S
velset = 0,0
anim = 1401
ctrl = 0
sprpriority = 1

[State 3050, Super B]
type = AfterImage
trigger1 = Time = 1
time = 30
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State 410, 1]
type = PlaySnd
trigger1 = (GameTime%5) =1;Time = 0
value = 0, 6
channel = 5

[State 2501]
type = bindtoroot
trigger1 = parent,Alive = 1
pos = 38,-65
time = -1

[State 2027, 5]
type = Angleset
trigger1 = Time = 0
value = 0.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 1
;trigger1 = Time <= 25
value = 40;35.0;17.0

;[State 2027, 5]
;type = AngleAdd
;trigger1 = Time >= 25
;value = 15;13.0

[State 1027, Pos]
type = Angledraw
trigger1 = Time >= 1

[State 10000, 6]
type = DestroySelf
trigger1 = parent,Stateno = 1415
trigger2 = parent,Stateno = 650
trigger3 = parent,movetype = H


;----------------------------------------------------------
;下降
[Statedef 1415]
type = A
movetype = I
physics = N
velset = 0
anim = 1415

[State 230, 1]
type = PlaySnd
trigger1 = Time = 1
value = 10, 4

[State 1101, 1]
type = VelSet
trigger1 = time >= 0
x = -1.5
;y = 0

[State 2500, 2]
type = VelAdd
trigger1 = time >= 0
y = .33

[State 1103, 2]
type = PosSet
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0

[State 105, 5]
type = StateTypeSet
trigger1 = Pos Y >= -10
physics = n

[State 105, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52

;--------------------------------------------------------------------------
;ジャンプキック（コンボ）
[Statedef 1416]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 0
ctrl = 0
anim = 1416
sprpriority = 2

[State 3050, Super B]
type = PosFreeze
trigger1 = Time = [0,10]
value = 1

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 40
;--------------------
getpower = 20,5
givepower =10,0
;--------------------
guardflag = HA
priority = 3
pausetime = 8,15
sparkno = s704
guard.sparkno =s2
sparkxy = -10,-40
hitsound =s10,1
guardsound =s10,9
ground.type = High
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -4
air.velocity = -1.5,-3

[State 1071, 4]; 裏旋風
type = ChangeState
triggerall = PrevStateNo = 600 || PrevStateNo = 605
triggerall=Time >= 1
triggerall= Command ="ura"
trigger1=movehit!=0
trigger2=MoveGuarded !=0
value = 1410

[State 3500 ]
type = Palfx    
triggerall = time = 99999
trigger1 = PrevStateNo = 600|| PrevStateNo = 605
;trigger1 = P2statetype != A
;trigger1 = P2statetype != L
ignorehitpause = 1
time = 1
add = 255,255,255
;invertall = 1

[State 110, 4]
type =AfterImage
triggerall = time = 1
trigger1 = PrevStateNo = 600|| PrevStateNo = 605
time = 10
timeGap  = 2
frameGap = 1
length = 4
trans = none;add1
palBright   =   0,  0, 80
palContrast = 240,240,255
palAdd      =   0,  0,  0
palMul      =   1,  1,  1

[State 1071, 4]
type = ChangeState
triggerall = AnimElem = 6
trigger1=movehit!=0
trigger2=MoveGuarded!=0
value = 109

;-------------------------------------------------------------------------------------------
; ヒット演出 2
[Statedef 1420]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = -1


[State 180, 0]
type = VarRandom
trigger1 = Time = 0
v = 5
range = 1,2

;------------------------------
[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1503
ID=1503
postype =p1
pos =0,0
vel=0,0
sprpriority = 6
bindtime = 1
removetime = 10
ownpal = 1
supermove = 1
ignorehitpause = 1
removeongethit = 1
pausemovetime = 999
scale =0.0, 0.0

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
trigger1 = Var(5) = 1
anim = 1503
ID = 1503
sprpriority = 6
vel=0,0
scale =0.5 -Time*0.052 , 0.5 +Time*0.5

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
trigger1 = Var(5) = 2
anim = 1503
ID = 1503
sprpriority = 6
vel=0,0
scale =0.5 +Time*0.5 , 0.5 -Time*0.052
;------------------------------
[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

[State 2104, 9]
type = DestroySelf
trigger1 = time = 10

;-----------------------------------------------------------------------------------------------------------------------------------------
;アバンストラッシュ
;-----------------------------------------------------------------------------------------------------------------------------------------
[Statedef 2000]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2000
poweradd = 0
sprpriority = 1

[State -2, EX_-1]
type = VarAdd
trigger1 = time = 0
trigger1 = Var(10) >=5
v = 10
value = -2


;------------------------- パワーゲージ
[State 0, 0]
type = PowerAdd
trigger1 = Time = 0
Persistent = 0
IgnoreHitPause = 1
value = 40
;-------------------------

;---------------------------------- キャンセル時の処理
[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 411

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 412

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 211

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 212

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 241

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 225

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 226
;----------------------------------
;[State 210, 4]
;type = SprPriority
;trigger1 = AnimElem = 8;10
;value = 1

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 8
value = s200,2
channel = 5

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 8
value = 0, 8

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 15
value = 800, 0

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 25
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State -2, エフェクト1]
type = Explod
trigger1 = AnimElem = 8
Persistent = 0
;IgnoreHitPause = 1
removeongethit = 1
anim = 2001
id=2001
pos = 0,0
postype = p1
sprpriority = 2
bindtime = -1
removetime =18
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 8
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "2002"
stateno = 2002
ID = 2002
pos =0,0
postype = p1
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

;-----------------------------------------
[State 800, 3]
type = HitDef
trigger1 = AnimElem = 8
trigger1=P2MoveType !=H
;Trigger1 = P2StateNo != 40
attr = S, ST
getpower  = 0
givepower = 0
;hitflag = M-
sparkxy =999,-999
hitsound = S0,5
priority = 1, Miss
animtype  = Light
pausetime = 0,0
ground.type = Low
damage = 0
p1facing = 1
p2facing = 1
p1stateno = 2100
p2stateno = 2150
fall = 0
kill = 0
;-----------------------------------------

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------
;わっかエフェクト
[Statedef 2002]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = -1

[State 230, 1]
type = PlaySnd
trigger1 = time = 0
value = 800, 1

;------------------------------
[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 2002
ID=2002
postype =p1
pos =0,0
vel=0,0
sprpriority = -1
bindtime = 1
removetime = 30
;ownpal = 1
supermove = 1
ignorehitpause = 1
;removeongethit = 1
pausemovetime = 999
scale =0.0, 0.0

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
anim = 2002
ID = 2002
sprpriority = -1
vel=0,0
scale =0.55 +Time*0.04 , 0.15 ;-Time*0.001
;-----------------------------
[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

[State -2, kesu]
type = removeExplod
trigger1 = parent,Stateno = 2100
id = 2002


;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 1
ignorehitpause = 1
var(30) = -10

[State 8100, option]
type = PalFX
trigger1 = Time >= 1
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------


[State 2104, 9]
type = DestroySelf
trigger1 = time = 30
trigger2 = parent,Stateno = 2100

;--------------------------------------------------------------------------------------------------------------------
;アバンストラッシュ　発動
[Statedef 2100]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2100
poweradd = 150
sprpriority = 1

[State 801, ]
type = TargetBind
trigger1 = time = 0
pos = 45, 0

;------------------------
[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 2001
;------------------------
[State 230, 1];ボイス
type = PlaySnd
triggerall = var(13) = [0,50]
trigger1 = AnimElem = 1
value = s600,5
channel = 5

[State 230, 1];ボイス
type = PlaySnd
triggerall = var(13) = [51,100]
trigger1 = AnimElem = 1
value = s600,6
channel = 5

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 0, 9

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time >= 1
value = SCA
time=1

[State 330, 1]; 黒
type = BGPalFX
trigger1 = Time = 0
time = 22
add = 0,0,0
mul = 0,0,0
ignorehitpause = 1
persistent = 0

[State 5151, 0]
type = AssertSpecial
trigger1 = Time = (1,23)
flag = noFG
flag2 = nobardisplay

[State 3050, Super B]
type = AfterImage
trigger1 = time = 0
time = 10
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1


[State 2100, 2]
type = Helper
trigger1 = AnimElem = 5
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "hikari"
stateno =2110
ID = 2110
pos =0,0
postype = p1
;pausemovetime = 9999
;supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 5
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "koukasen"
ID = 1502
pos =0,0
postype = p1
stateno = 1502
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State -2, バックダッシュエフェクト]
type = Explod
trigger1 = AnimElem = 5
trigger1 = NumExplod(179) = 0
Persistent = 0
scale  =1.5,1.5
;IgnoreHitPause = 1
;removeongethit = 1
anim = 179
id=179
pos = -10,0
postype = p1
sprpriority = 3
bindtime = 1
removetime =24
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------
;エフェクト
[Statedef 2110]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = -1

;------------------------------------------ 光
[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 2110
ID=2110
postype =p1
pos =50,-40
vel=0,0
sprpriority = 5
bindtime = 1
removetime = 15
ownpal = 1
supermove = 1
ignorehitpause = 1
;removeongethit = 1
pausemovetime = 999
scale =1.5, 0.5

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 2
anim = 2110
ID = 2110
sprpriority = -5
vel=0,0
scale =0.3 +Time*0.15 , 0.3 +Time*0.15
;scale =1.0 +Time*0.08 , 1.2 -Time*0.1
;---------------------------------------------

;------------------------------------------ ＨＩＴマーク
[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 704
ID=704
postype =p1
pos =60,-40
vel=0,0
sprpriority = 6
bindtime = 1
removetime = 16
ownpal = 1
supermove = 1
ignorehitpause = 1
;removeongethit = 1
pausemovetime = 999
scale =0.0, 0.0

[State 8100, option]
type = ModifyExplod
trigger1 = Time >= 1
anim = 704
ID = 704
sprpriority = 6
vel=0,0
scale =1.0 +Time*0.15 , 1.0 +Time*0.15
;---------------------------------------------

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

[State 2104, 9]
type = DestroySelf
trigger1 = time = 16
;-------------------------------------------------------
;2p
;-------------------------------------------------------
[Statedef 2150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time >= 1
value = SCA
time=1

[State 1610, 1] 
type = PosFreeze
trigger1 = time = 0
x = 0 
y = 0 

[State 802, 0]
type = VelSet
trigger1 = 1
y = 0

[State 8601, 1]
type = Turn
trigger = time = 0
trigger1 = p2dist X < -25

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
;trigger1 = name != "Reika Murasame"&&AuthorName = "taruse"
trigger1 = Time = 0
value = 2150

[State 1025, State]
type = ChangeState
trigger1 = time = 10
;trigger1 = HitShakeOver = 1
value = 2151
;------------------
[Statedef 2151]
type    = A
movetype= H
physics = N

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = Time = 0
value = 2151;1025

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time >= 1
value = SCA
time=1

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
x = -2.0
y = -1.5

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1


[State 191, 4] 
type = EnvShake
triggerall = Pos y < -10
trigger1 = BackEdgeBodyDist <= 10
trigger2 = FrontEdgeBodyDist <= 10
time = 12
ampl = 6
freq = 600
phase = 600

[State 1026, Hit wall]
type = ChangeState
;triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 2152

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
; 2P
[Statedef 2152]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 230, 1]
type = PlaySnd
trigger1 = Time = 0
value = 10, 3

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time >= 1
value = SCA
time=1

[State 801, Damage]
type = LifeAdd
trigger1 = Time = 0
value = -160

[State 100 , 3]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = Time = 0
value = 4017;5005

[State 191, 4] 
type = EnvShake
trigger1 = Time = 0
time = 12
ampl = 9
freq = 600
phase = 600

[State 195, 2]
type = SelfState 
trigger1 = Time = 15
value = 5050

[State 1026, Hit wall]
type = ChangeState
trigger1 = Time = 0
trigger1 = Pos Y >= -50
value = 2153

;------------------
; Hit by Fast Kung Fu Palm - bounce off wall
; (a custom gethit state)
[Statedef 2153]
type    = A
movetype= H
physics = N

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time >= 1
value = SCA
time=1

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.8

[State 1028, Turn]
type = Turn
trigger1 =Time = 0; (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100



;-----------------------------------------------------------------------------------------------------------------------------------------
;必殺、旋風剣
;-----------------------------------------------------------------------------------------------------------------------------------------

;---------------------------------------------------------------------------
;旋風剣　開始
[Statedef 2500]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 0
ctrl = 0
velset = 0,0
anim = 2500
sprpriority = 2

;---------------------------------- キャンセル時の処理
[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 411

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 412

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 211

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 212

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 241

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 225

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 226
;---------------------------------- キャンセル時の処理

[State -2, EX_-1]
type = VarAdd
trigger1 = time = 0
trigger1 = Var(10) >=5
v = 10
value = -2

;------------------------- パワーゲージ
[State 0, 0]
type = PowerAdd
trigger1 = Time = 0
Persistent = 0
IgnoreHitPause = 1
value = 40
;-------------------------
[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s500,4
channel = 5

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0, 0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 9
value = 0, 7

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 11
value = 6,1

;-----------------------------------------------------------
[State 830, 0]
type = Velset
trigger1 = AnimElem = 9;trigger1 = time = 16
x = 3.5

[State -2, エフェクト]
type = Explod
trigger1 = AnimElem = 9
Persistent = 0
scale  =0.8,1.5
;IgnoreHitPause = 1
;removeongethit = 1
anim = 173
id=173
pos = 15,0
postype = p1
sprpriority = 4
bindtime = 1
removetime =20
ownpal = 1
vel = 0,0
Pausemovetime=0
;supermove = 1
;supermovetime =8

[State -2, 着地煙１]
type = Explod
trigger1 = Time > 20
trigger1 = (GameTime%10) =1
anim = 182
pos = 35,0
postype = p1
sprpriority = 4
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = -2,0
scale  =0.8,0.6

;-----------------------------------------------------------

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 11
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "katana"
ID = 2520
stateno = 2520
pos =0,0
postype = p1
;pausemovetime = 9999
;supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 210, 5]
type = ChangeState
trigger1 = Time = 30
value = 2505

;---------------------------------------------------------------------------
;旋風剣　回し中
[Statedef 2505]
type    = S
movetype= A
physics = S
juggle  = 9
poweradd= 0
ctrl = 0
velset = 0,0
anim = 2505
sprpriority = 2

[State 230, 1];ボイス
type = PlaySnd
trigger1 = Time = 0
value = s500,5
channel = 5

;----------------------------------------------------------- 燕返し発動処理
[State 2100, 2];
type = Helper
trigger1 = Time = 0
trigger1 = numhelper(2601) = 0
helpertype = normal
name = "kagami"
ID = 2601
stateno = 2601
pos =  0,0;20,-120
postype = p1
keyctrl = 0
ownpal = 1


[State 210, 5]
type = ChangeState
trigger1 = numhelper(2601) = 0
value = 2600

;-------------------------------------------- カウンター
[State 6500, counter]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 2505
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "counter"
ID = 6499
pos =0,0
postype = p1
stateno = 6499
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-------------------------------------------- カウンター

;---------------------------------------------------------- 暫烈拳風

[State 230, 2]
type = HitDef
trigger1 = (GameTime%6) =1
attr = S, SA
animtype  = Medium
damage    = 0+var(18),10
;--------------------
getpower =  10,5
givepower = 0,0
;--------------------
guardflag = MA
pausetime =8,8
sparkno =s710
guard.sparkno =s2
sparkxy = 0,-60
hitsound =s10,2
guardsound =s10,8
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -6
air.velocity = -3.5,-6.5
envshake.time = 20
envshake.ampl = 20
envshake.freq = 60
p1stateno = 2506
id=2505

[State 2100, ガード]
type = Helper
triggerall = MoveGuarded && NumTarget
trigger1 = target,GetHitVar(chainid) = 2505
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "Guarded"
stateno = 3
ID = 3
pos =0,-55
postype = p2
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

;-----------------------------------------------------------

[State 210, 5]
type = ChangeState
trigger1 = Time = 60
value = 2510


;---------------------------------------------------------------------------
;旋風剣　ヒット！
[Statedef 2506]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 2506
sprpriority = -2

[State -2, EX_-1]
type = Varset
trigger1 = time = 0
v = 15
value = 0

[State -2, EX_-1]
type = VarAdd
trigger1 = time >= 15
v = 15
value = -1

[State 3021, 1]
type = TargetBind
trigger1 = Time >= 1
pos = 65,var(15)

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time >= 1
value = SCA
time=1

;---------------------------------------------------------- 暫烈拳風

[State 230, 2]
type = HitDef
trigger1 = (GameTime%10) =1
attr = S, SA
animtype  = Medium
damage    = 12
;--------------------
getpower = 30,10
givepower = 5,0
;--------------------
;guardflag = MA
pausetime =5,10
sparkno =s710
guard.sparkno =s2
sparkxy = 0,-60
hitsound =s10,2
guardsound =s10,8
ground.type = High
ground.slidetime = 20
ground.hittime  = 30
ground.velocity = -5,-6
air.velocity = -2.8,-4.0
fall = 1
air.recover = 0
fall.recover = 0
yaccel = .32
;envshake.time = 10
;envshake.ampl = 20
;envshake.freq = 60
id=2506
kill = 0

[State 330, 1]
type = BGPalFX
trigger1 = (GameTime%10) =1
time = 1
add = 255,0,0
mul = 255,0,0
ignorehitpause = 1
;persistent = 0

[State 2100, 2]; 斬！
type = Helper
triggerall = numhelper(1420) = 0
trigger1 = (GameTime%5) =1
;Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "zanhit ver2"
ID = 1420
pos =0,-50
postype = p2
stateno = 1420
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1
;-----------------------------------------------------------

[State 210, 5]
type = ChangeState
trigger1 = Time = 60
trigger2 = HitCount = 8
value = 2507


;---------------------------------------------------------------------------
; 最後
[Statedef 2507]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 2507
sprpriority = 2

[State 230, 1];ボイス
type = PlaySnd
trigger1 = Time = 0
value = s500,6
channel = 5

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time >= 1
value = SCA
time=1

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 6

[State -3,ジャンプ音]
type = PlaySnd
trigger1 = AnimElem = 3
value = 10,4

[State 210, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
animtype  = hard
damage = ceil(100*Var(10)/100), 0;damage    = 60,10
;--------------------
getpower = 120,60
givepower = 30,0
;--------------------
;guardflag = M
pausetime = 10,12
sparkno =s9999
guard.sparkno =s2
sparkxy = -10,-50
hitsound =s10,3
guardsound =s10,9
ground.type = Trip
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -5.5,-6
air.velocity = -3.5,-6
fall = 1
air.recover = 0
fall.recover = 0
yaccel = .32
envshake.time = 12
envshake.ampl = 20
envshake.freq = 60
id=2507

;-----------------------------------------------
[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 2507
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "zanhit"
ID = 1503
pos =0,-50
postype = p2
stateno = 1503
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 2507
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "chi"
ID = 706
pos =0,-50
postype = p2
stateno = 706
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 2100, 2]
type = Helper
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 2507
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "srow"
ID = 1505
pos =0,0
postype = p1
stateno = 1505
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

[State 330, 1]
type = BGPalFX
trigger1 = AnimElem = 8
;triggerall = movehit && NumTarget
;trigger1 = target,GetHitVar(chainid) = 2507
time = 5
add = 255,255,255
mul = 255,255,255
ignorehitpause = 1
persistent = 0

[State 2100, 2]
type = Helper
trigger1 = AnimElem = 7
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "backhitover"
ID = 1500
pos =10,0
postype = p1
stateno = 1500
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1


[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;旋風剣終了・・・
[Statedef 2510]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 2510
sprpriority = 2

[State 2100, 2];
type = Helper
trigger1 = Time = 1
trigger1 = numhelper(1402) <= 0
helpertype = normal
name = "tukami"
ID = 1402
pos =  0,0;20,-120
postype = p1
stateno = 1402
keyctrl = 0
ownpal = 1

[State 230, 1]
type = PlaySnd
trigger1 = Time = 1
value = 10, 4

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 8

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-------------------------------------------------------------------
;回転する刀パーツ
[Statedef 2520]
type    = S
physics = S
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = 1

[State 3050, Super B]
type = AfterImage
trigger1 = Time = 1
time = 30
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State 410, 1]
type = PlaySnd
trigger1 = (GameTime%5) =1;Time = 0
value = 0, 7
channel = 5

[State 2501]
type = bindtoroot
trigger1 = parent,Alive = 1
pos = 55,-62
time = -1


;-----------------------------------------------
[State -2, 剣]
type = Explod
;triggerall = NumExplod(2550)= 0
trigger1 = Time =0
anim = 2550
id=2550
pos = 0,0
postype = p1
sprpriority = 3
;supermove = 1
;supermovetime =8
bindtime = -1
removetime =-1
ownpal = 1  
vel = 0,0
scale  =0,0

;-----------------------------------------------
[State -2, 残像]
type = Explod
;triggerall = NumExplod(2550)= 0
trigger1 = Time =0
anim = 2551
id=2551
pos = 0,0
postype = p1
sprpriority = 3
;supermove = 1
;supermovetime =8
bindtime = -1
removetime =-1
ownpal = 1  
vel = 0,0
scale  =0,0
;---------------------------------------------
[State 8100, option]
type = ModifyExplod
triggerall = parent,Stateno != 2506
trigger1 = Time >= 1
trigger1 = Time < 26
anim = 2550
ID = 2550
sprpriority = 3
vel=0,0
scale =1.0 -Time*0.015 , 1.0; -Time*0.01

[State 8100, option]
type = ModifyExplod
triggerall = parent,Stateno != 2506
trigger1 = Time >= 26
anim = 2550
ID = 2550
sprpriority = 3
vel=0,0
scale =0.55 , 1.0
;-----------------------------
[State 8100, option]
type = ModifyExplod
triggerall = parent,Stateno != 2506
trigger1 = Time >= 1
trigger1 = Time < 26
anim = 2551
ID = 2551
sprpriority = 3
vel=0,0
scale =1.0 -Time*0.015 , 1.0; -Time*0.01

[State 8100, option]
type = ModifyExplod
triggerall = parent,Stateno != 2506
trigger1 = Time >= 26
anim = 2551
ID = 2551
sprpriority = 3
vel=0,0
scale =0.55 , 1.0
;-----------------------------------------------


;--------------------------------------------- ヒット時変化
[State 8100, option]
type = ModifyExplod
triggerall = parent,Stateno = 2506
trigger1 = Time >= 1
anim = 2552
ID = 2550
sprpriority = 2
vel=0,0
scale =0.55 , 1.0
;-----------------------------
[State 8100, option]
type = ModifyExplod
triggerall = parent,Stateno = 2506
trigger1 = Time >= 1
anim = 2553
ID = 2551
sprpriority = 2
vel=0,0
scale =0.55 , 1.0
;-----------------------------------------------


[State -2, 着地煙１]
type = Explod
trigger1 = (GameTime%10) =1
anim = 182
pos = 5,64
postype = p1
sprpriority = 5
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 1.5,0
;scale  =0.8,0.5

[State -2, 着地煙２]
type = Explod
trigger1 = (GameTime%10) =1
anim = 182
pos = -5,64
postype = p1
sprpriority = 5
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = -1.5,0
;scale  =0.8,0.5

[State -2, kesu]
type = removeExplod
trigger1 = parent,Stateno = 2510
trigger2 = parent,Stateno = 2600
trigger3 = parent,movetype = H
trigger4 = parent,Stateno = 2507
id = 2550

[State -2, kesu]
type = removeExplod
trigger1 = parent,Stateno = 2510
trigger2 = parent,Stateno = 2600
trigger3 = parent,movetype = H
trigger4 = parent,Stateno = 2507
id = 2551

[State 10000, 6]
type = DestroySelf
trigger1 = parent,Stateno = 2510
trigger2 = parent,Stateno = 2600
trigger3 = parent,movetype = H
trigger4 = parent,Stateno = 2507


;--------------------------------------------------------------------------------
; リフレクター判定ヘルパー
[Statedef 2601]
movetype = A
velset =  0,0
anim = 2601
sprpriority = -1

[State 2501]
type = bindtoroot
trigger1 = parent,Alive = 1
pos = 0,0
time = -1

[State 1001, 1]
type = NotHitBy 
trigger1 = 1
value = , AA, AT
time = 1

[State 10000, 3]
type = HitOverride
trigger1 = 1
slot = 1
time = 0
attr = SCA, AA, AP
stateno = 2602

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

[State 10000, 6]
type = DestroySelf
trigger1 = parent,Stateno != 2505
trigger2 = parent,movetype = H


;--------------------------------------------------------------------------------
; リフレクター判定ヘルパー
[Statedef 2602]
movetype = A
velset =  0,0
anim = 9999
sprpriority = -1

[State 2501]
type = bindtoroot
trigger1 = parent,Alive = 1
pos = 0,0
time = -1

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 1
;--------------------------------------------------------------------------------

;-----------------------------------------------------------------------------------------------------------------------------------------
;燕返し〜
;-----------------------------------------------------------------------------------------------------------------------------------------
[Statedef 2600]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 2600
poweradd = 0
sprpriority = 2

;------------------------- パワーゲージ
[State 0, 0]
type = PowerAdd
trigger1 = Time = 0
Persistent = 0
IgnoreHitPause = 1
value = 200
;-------------------------

[State 1200, Muteki] 
type = NotHitBy
trigger1 = Time = 0
value = SCA
time=10

[State 3050, Super B]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
TimeGap  = 1
;FrameGap = 1
length = 12
palcolor = 200
palBright   =   0, 20,180
palContrast = 150,220,255
palAdd      = -150,-70,-50
palMul      =   1,  1,  1
trans = none;add1

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s500,7
channel = 5

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10, 4

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 10
value = 0, 5

[State -2, 着地煙１]
type = Explod
trigger1 = AnimElem = 10
anim = 182
pos = -25,0
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 0.5,-0.5
;scale  =0.8,0.8


[State 6000, Helper]
type = Helper
trigger1 = AnimElem = 11
postype = p1
pos = 20,-50
stateno = 2610
name = "hien"
id = 2610
ownpal = 1


[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;--------------------------------------------------------------------------------
;弾
[Statedef 2610]
movetype = A
velset =  0,0
anim = 2610
sprpriority = 5

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
value = 6,3

[State 200, 1]
type = PlaySnd
trigger1 = Time = 8
value = 6,2

[State 2221, 1]
type = VelSet
trigger1 = Time >= 5
x = 14
y = 0

[State 1001, 1]
type = NotHitBy 
trigger1 = 1
value = , AA, AT
time = 1

[State 10000, 3]
type = HitOverride
trigger1 = 1
slot = 1
time = 0
attr = SCA, AA, AP
stateno = 2615

[State 10000, 4]
type = ChangeState
trigger1 = MoveHit = 1
trigger2 = MoveGuarded = 1
value = 2615

[State 2102, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SP
damage = 120,10
getpower = 50
givepower = 0
animtype = Hard
guardflag =MA
hitflag = MAFD
pausetime = 0,12
sparkno = s704
guard.sparkno =s2
hitsound = s10,3
guardsound = s10,9
sparkxy = 0,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 13
ground.velocity = -5
air.velocity = -2.5,-3.5
;fall = 1
;air.recover = 0
;fall.recover = 0
;yaccel = .32
palfx.time = 20
palfx.mul = 70,140,230
palfx.sinadd = 50,60,90,80
palfx.add = 50,100,130
;palfx.color = 0
envshake.time = 5
envshake.ampl = 20
envshake.freq = 30

[State 2821]
type = AssertSpecial
trigger1 = 1
Time = 1
flag = noshadow

[State 10000, 6]
type = DestroySelf
trigger1 = FrontEdgeDist <= -20
;--------------------------------------------------------------------------------
;--------------------------------------------------------------------------------
;エフェクト消去
[Statedef 2615]
type = A
movetype = A
physics = N
velset =  0,0
anim = 9999
sprpriority = 1

[State 330, 1]
type = BGPalFX
trigger1 = time = 0
time = 2
add = 255,255,255
mul = 255,255,255
ignorehitpause = 1
persistent = 0

[State 8100, option]
type = Explod
trigger1 = time = 0
anim = 1562
ID=1562
postype =p1
pos = 0,0
vel=-1.0,-1
sprpriority = 6
bindtime = 1
removetime = 25
;ownpal = 1
supermove = 1
ignorehitpause = 1
removeongethit = 1
pausemovetime = 999
scale =1.0, 0.6

[State 2100, 2]
type = Helper
trigger1 = Time = 0
Persistent = 0
IgnoreHitPause = 1
helpertype = normal
name = "kakusan"
ID = 1585
pos =0,0
postype = p1
stateno = 1585
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
keyctrl = 0
ownpal = 1

;---------------------------------------- 透明度調整
[State 8100, option]
type = Varset
trigger1 = Time = 0
ignorehitpause = 1
var(30) = 0

[State 8100, option]
type = Varadd
trigger1 = Time >= 1
ignorehitpause = 1
var(30) = -10

[State 8100, option]
type = PalFX
trigger1 = Time >= 1
add = Var(30)-1,Var(30)-1,Var(30)-1
time = 1
;----------------------------------------

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 25





;------------------------------------------------------------------------------------------------------------------------------
; 刀呼び
;------------------------------------------------------------------------------------------------------------------------------
[Statedef 2300]
type    = S
movetype = I
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 2300
sprpriority = 2

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 1
value = s700,0
;channel = 5

[State 2100, 2]
type = Helper
trigger1 = numhelper(2310) = 0
trigger1 = AnimElem = 4
helpertype = normal
name = "Arms"
ID = 2310
stateno = 2310
pos = -20,-170
postype = back
facing = 1
keyctrl = 0
ownpal = 1

[State 100 , 5]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------
;刀パーツ
[Statedef 2310]
type    = S
physics = S
movetype= A
velset = 2.2,0
anim = 2310;193
ctrl = 0
sprpriority = 5

[State 410, 1]
type = PlaySnd
trigger1 = (GameTime%6) =1;Time = 0
value = 0, 6
channel = 5

[State 830, 0]
type = Velset
trigger1 = time > 1
x = 4

[State 2101, 1]
type = veladd
trigger1 = time > 1
y = .35

;[State 2501]
;type = bindtoroot
;trigger1 = parent,Alive = 1
;pos =-10,-45
;time = -1

[State 2027, 5]
type = Angleset
trigger1 = Time = 0
value = 0.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 1
value = -28.0;17.0

[State 1027, Pos]
type = Angledraw
trigger1 = Time >= 1
;trigger1 = Time <= 32

[State 1103, 2]
type = PosSet
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0

;----------------------------------------------------
[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 15,5
guardflag = HA
priority = 4
pausetime = 0,5
sparkno =s705
guard.sparkno =s2
sparkxy = 0,0
hitsound =s10,6
guardsound =s10,9
animtype = Med
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -5
air.velocity = -3,-4
;--------------------
getpower = 0,0
givepower =0,0
;--------------------
id=2310

[State 330, 1]
type = BGPalFX
triggerall = movehit && NumTarget
trigger1 = target,GetHitVar(chainid) = 2310
time = 1
add = 255,0,0
mul = 255,0,0
ignorehitpause = 1
persistent = 0
;----------------------------------------------------

[State 105, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2350

;-------------------------------------------------------------------
;刀パーツ
[Statedef 2350]
type    = S
physics = S
velset =0,0
anim = 2350
ctrl = 0
sprpriority = 5

[State 2027, 5]
type = Angleset
trigger1 = Time = 0
value = 0.0

[State -2　]
type = PlaySnd
trigger1 = Time = 0
value =  s0,8

[State -2　]
type = PlaySnd
trigger1 = Time = 0
value =  s40,0

[State -2, ダウン煙１]
type = Explod
trigger1 = Time = 0
anim = 182
pos = 0,0
postype = p1
sprpriority = 6
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 0,0
scale  =2.0,0.5

[State -2,削岩]
type = Explod
trigger1 = Time = 0
anim = 305
id=305
pos = 0,5
postype = p1
sprpriority = 4
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 0,0
scale  =0.5,0.5

[State 2103, 2]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 1101, 1]
type = VelSet
trigger1 = time >= 0
x = 0
y = 0


;---------------------------------------------------------------------------------------------------------------
;1Ｐ
[State 10000, effect]
type = Explod
trigger1 = PrevStateNo != 5888
triggerall = NumExplod(2351)= 0
trigger1 = TeamSide = 1
anim = 2351
ID = 2351
;scale  =60.0,1.0
pos = 0,0
sprpriority = 5
postype = p1
removetime = -1
supermove = 1
bindtime = -1
vel=0,0
Pausemovetime=-1
ownpal = 1
ontop=0

;2Ｐ
[State 10000, effect]
type = Explod
trigger1 = PrevStateNo != 5888
triggerall = NumExplod(2352)= 0
trigger1 = TeamSide = 2
anim = 2352
ID = 2352
;scale  =60.0,1.0
pos = 0,0
sprpriority = 5
postype = p1
removetime = -1
supermove = 1
bindtime = -1
vel=0,0
Pausemovetime=-1
ownpal = 1
ontop=0


[State -2, kesu]
type = removeExplod
trigger1 = parent,Stateno = 2411
trigger2 = parent,Stateno = 7200
id = 2351

[State -2, kesu]
type = removeExplod
trigger1 = parent,Stateno = 2411
trigger2 = parent,Stateno = 7200
id = 2352

[State 10000, 6]
type = DestroySelf
trigger1 = parent,Stateno = 2411
trigger2 = parent,Stateno = 7200

;---------------------------------------------------------------------------------------------------------------
;[State 8000,End]
;type = ChangeState
;trigger1 = RootDist X = [-5,5]
;trigger1 = RootDist Y = 0
;value = 2351


;-------------------------------- 状態変更
[State 2100, 2]
type = Helper
triggerall = numHelper(2351) = 0
trigger1 = RootDist X = [-15,15]
trigger1 = RootDist Y = 0
helpertype = normal
name = "Arms ok"
ID = 2351
stateno = 2351
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
;--------------------------------

;-------------------------------------------------------------------
;刀パーツ 取れる状態
[Statedef 2351]
type    = S
physics = S
velset =0,0
anim = 9999
ctrl = 0
sprpriority = 6

[State -2, kesu]
type = DestroySelf
trigger1 = RootDist X <= -15
trigger2 = RootDist X >= 15
;------------------------------------------------------------------------------------------------------------------------------
; 刀交換
;------------------------------------------------------------------------------------------------------------------------------
[Statedef 2410]
type    = S
movetype = I
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 2410
sprpriority = 2

;---------------------------------- キャンセル時の処理
[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 411

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 412

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 211

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 212

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 241

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 225

[State -2, kesu]
type = removeExplod
trigger1 = Time = 0
id = 226
;----------------------------------

[State 100 , 5]
type = ChangeState
trigger1 = animTime = 0
value = 2411
;-----------------------------------------------------------------------------
; 刀交換　終わり
[Statedef 2411]
type    = S
movetype = I
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 2411
sprpriority = 2

;----------------------------
[State -2, ダウン煙１]
type = Explod
trigger1 = Time = 0
anim = 182
pos = 15,0
postype = p1
sprpriority = 4
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 0,0
scale  =2.0,0.5

[State -2,削岩]
type = Explod
trigger1 = Time = 0
anim = 305
id=305
pos = 15,5
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =20
ownpal = 1  
vel = 0,0
scale  =0.5,0.5
;------------------------------
[State 40, 9]; 剣気セット
type = VarSet
trigger1 = Time = 0
v = 10
value = 100

[State 230, 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 7
value = s700,1
;channel = 5

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10,4

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0,8



[State 2100, 2]
type = Helper
trigger1 = numhelper(2412) = 0
trigger1 = AnimElem = 2
helpertype = normal
name = "Arms"
ID = 2412
stateno = 2412
pos = 35,-48
postype = p1
facing = 1
keyctrl = 0
ownpal = 1


[State 100 , 5]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------
; 落とした刀
[Statedef 2412]
type    = S
physics = S
;movetype= A
velset = 0,0
anim = 2412
ctrl = 0
sprpriority = -1

[State 410, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 6

;[State 830, 0]
;type = Velset
;trigger1 = time > 1
;y = 8

[State 2101, 1]
type = veladd
trigger1 = 1
y = .50

[State 2027, 5]
type = Angleset
trigger1 = Time >= 1
value = 0.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 1
value = 7.5

[State 1027, Pos]
type = Angledraw
trigger1 = Time >= 1
;trigger1 = Time <= 32

[State 1103, 2]
type = PosSet
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0

[State 100 , 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2413

;----------------------------------------------------
;-------------------------------------------------------------------
; 落とした刀
[Statedef 2413]
type    = S
physics = S
;movetype= A
velset = 0,0
anim = 2413
ctrl = 0
sprpriority = -1

[State 410, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 8

[State 830, 0]
type = Velset
trigger1 = Time = 0
y = -4

[State 2101, 1]
type = veladd
trigger1 = 1
y = .30

[State 2027, 5]
type = Angleset
trigger1 = Time >= 1
value = 0.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 1
trigger1 = Time <= 10
value = -5.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 10
value = 8.0

[State 1027, Pos]
type = Angledraw
trigger1 = Time >= 1

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 25
;----------------------------------------------------



;-------------------------------------------------------------------
;刀パーツ （ファイナルダウン）
[Statedef 5888]
type    = S
physics = S
velset = 2.2,0
anim = 2310;193
ctrl = 0
sprpriority = 5

[State -2,布]
type = Explod
trigger1 = Time = 0
anim = 5887
id=5887
pos = -10,-50
postype = p1
sprpriority = 3
supermove = 1
;supermovetime =8
bindtime = 1
removetime =40
ownpal = 1  
vel = -1,-0.5
;scale  =0.5,0.5


[State 410, 1]
type = PlaySnd
trigger1 = (GameTime%8) =1;Time = 0
value = 0, 6
channel = 5

[State 830, 0]
type = Velset
trigger1 = time > 1
x = 1

[State 830, 0]
type = Velset
trigger1 = time = 1
y = -6

[State 2101, 1]
type = veladd
trigger1 = time > 1
y = .35


[State 2027, 5]
type = Angleset
trigger1 = Time = 0
value = 0.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 1
value = -25.0;17.0

[State 1027, Pos]
type = Angledraw
trigger1 = Time >= 1
;trigger1 = Time <= 32

[State 1103, 2]
type = PosSet
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0
;----------------------------------------------------

[State 105, 5]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2350
;-------------------------------------------------------------------
;刀パーツ （WIN2）
[Statedef 6001]
type    = S
physics = S
velset = 0,0
anim = 2310;193
ctrl = 0
sprpriority = -1

[State 410, 1]
type = PlaySnd
trigger1 = (GameTime%8) =1;Time = 0
value = 0, 6
channel = 5

[State 830, 0]
type = Velset
trigger1 = time = 1
y = -4

[State 2101, 1]
type = veladd
trigger1 = time > 1
y = .35


[State 2027, 5]
type = Angleset
trigger1 = Time = 0
value = 0.0

[State 2027, 5]
type = AngleAdd
trigger1 = Time >= 1
value = -25.0;17.0

[State 1027, Pos]
type = Angledraw
trigger1 = Time >= 1
;trigger1 = Time <= 32

;----------------------------------------------------

[State 10000, 6]
type = DestroySelf
trigger1 = Time = 33
